{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Samsung\\\\code\\\\cacp\\\\client\\\\components\\\\forms\\\\SoldAsset.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nimport React, { useState, useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { newContextComponents } from \"@drizzle/react-components\";\nimport { Button, Progress, Row, Form } from \"shards-react\";\nimport Web3 from \"web3\";\nimport ForSaleInnerModal from '../modals/ForSaleInnerModal.js'; //data.balance is 0 because it does not update until payout starts\n\nconst ContractForm = newContextComponents.ContractForm,\n      ContractData = newContextComponents.ContractData;\n\nconst SoldAsset = ({\n  drizzle,\n  drizzleState,\n  propAddress,\n  tokenId,\n  listPrice,\n  startPay,\n  proposalBalance\n}) => {\n  const account = drizzleState.accounts[0];\n\n  const _useState = useState([]),\n        deposits = _useState[0],\n        setDespositInfo = _useState[1];\n\n  useEffect(() => {\n    fetchProposalInfo();\n  }, []);\n\n  const fetchProposalInfo = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n      var state, proposalContract, depositInfoLength, i, depositerArray, depositInfo, depositerAmount, convertlistPrice, convertPropBalance, listPricePercent, deposterPayOut;\n      return regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            state = drizzle.store.getState();\n\n            if (!state.drizzleStatus.initialized) {\n              _context.next = 25;\n              break;\n            }\n\n            _context.next = 4;\n            return drizzle.contracts[\"\".concat(propAddress)];\n\n          case 4:\n            proposalContract = _context.sent;\n            _context.next = 7;\n            return proposalContract.methods.countDepositers().call();\n\n          case 7:\n            depositInfoLength = _context.sent;\n            depositerArray = [];\n            i = 0;\n\n          case 10:\n            if (!(i < depositInfoLength)) {\n              _context.next = 25;\n              break;\n            }\n\n            _context.next = 13;\n            return proposalContract.methods.depositers([i]).call();\n\n          case 13:\n            depositInfo = _context.sent;\n            depositerAmount = Web3.utils.fromWei(depositInfo.amount, 'ether');\n            convertlistPrice = Web3.utils.fromWei(listPrice, 'ether');\n            convertPropBalance = Web3.utils.fromWei(proposalBalance, 'ether');\n            listPricePercent = (depositerAmount / convertlistPrice * 100).toFixed(0);\n            deposterPayOut = convertPropBalance / 100 * listPricePercent;\n            console.log(deposterPayOut);\n            depositerArray.push([i, depositInfo.depositer, deposterPayOut.toString()]);\n            setDespositInfo(depositerArray);\n\n          case 22:\n            i++;\n            _context.next = 10;\n            break;\n\n          case 25:\n            return _context.abrupt(\"return\", 'Loading....');\n\n          case 26:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee);\n    }));\n\n    return function fetchProposalInfo() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(React.Fragment, null, deposits ? __jsx(Row, {\n    className: \"card-text justify-content-center mt-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 11\n    }\n  }, __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }\n  }, __jsx(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 15\n    }\n  }, __jsx(\"h5\", {\n    className: \"mb-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 17\n    }\n  }, \"Owners:\")), deposits.map(deposit => __jsx(\"div\", {\n    className: \"deposit-info\",\n    key: deposit[0],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 15\n    }\n  }, __jsx(Row, {\n    className: \"border-top\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 17\n    }\n  }, __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 19\n    }\n  }, __jsx(\"p\", {\n    className: \"mb-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 21\n    }\n  }, deposit[1]), __jsx(\"p\", {\n    className: \"deposit-text mb-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 21\n    }\n  }, \"Contribution:\\xA0\", __jsx(\"span\", {\n    className: \"purchase-price\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 42\n    }\n  }, Web3.utils.fromWei(deposit[2], 'ether')), \"\\xA0MANA\"), __jsx(Progress, {\n    className: \"mb-2\",\n    value: Web3.utils.fromWei(deposit[2], 'ether'),\n    max: Web3.utils.fromWei(proposalBalance, 'ether'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 21\n    }\n  }))))))) : __jsx(\"div\", {\n    className: \"align-items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 11\n    }\n  }, __jsx(Loader, {\n    className: \"mx-auto\",\n    color: \"#007bff\",\n    size: \"40px\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }\n  })), __jsx(ContractForm, {\n    drizzle: drizzle,\n    drizzleState: drizzleState,\n    contract: propAddress,\n    method: \"payOut\",\n    sendArgs: {\n      from: account\n    },\n    render: ({\n      handleSubmit\n    }) => __jsx(Form, {\n      onSubmit: handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 11\n      }\n    }, __jsx(\"div\", {\n      className: \"jsx-1214855048\" + \" \" + \"modal-footer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 13\n      }\n    }, __jsx(\"button\", {\n      key: \"submit\",\n      type: \"button\",\n      onClick: handleSubmit,\n      style: {\n        fontSize: 16\n      },\n      className: \"jsx-1214855048\" + \" \" + \"btn btn-block btn-success join-form-btn\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 15\n      }\n    }, \"Pay Out\")), __jsx(_JSXStyle, {\n      id: \"1214855048\",\n      __self: this\n    }, \".sell-text.jsx-1214855048{font-weight:400;color:black;font-size:1rem;font-family:Poppins;}.amount-number.jsx-1214855048{color:#66a3ff;font-family:Poppins;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcU2Ftc3VuZ1xcY29kZVxcY2FjcFxcY2xpZW50XFxjb21wb25lbnRzXFxmb3Jtc1xcU29sZEFzc2V0LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQXNIeUIsQUFFd0MsQUFDRyxjQUFtQixFQURYLFlBQWMsTUFDRixTQURzQixvQkFBQyIsImZpbGUiOiJDOlxcVXNlcnNcXFNhbXN1bmdcXGNvZGVcXGNhY3BcXGNsaWVudFxcY29tcG9uZW50c1xcZm9ybXNcXFNvbGRBc3NldC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBjb25uZWN0IH0gZnJvbSAncmVhY3QtcmVkdXgnO1xyXG5pbXBvcnQgeyBuZXdDb250ZXh0Q29tcG9uZW50cyB9IGZyb20gXCJAZHJpenpsZS9yZWFjdC1jb21wb25lbnRzXCI7XHJcbmltcG9ydCB7IEJ1dHRvbiwgUHJvZ3Jlc3MsIFJvdywgRm9ybSB9IGZyb20gXCJzaGFyZHMtcmVhY3RcIjtcclxuaW1wb3J0IFdlYjMgZnJvbSBcIndlYjNcIjtcclxuaW1wb3J0IEZvclNhbGVJbm5lck1vZGFsIGZyb20gJy4uL21vZGFscy9Gb3JTYWxlSW5uZXJNb2RhbC5qcyc7XHJcblxyXG4vL2RhdGEuYmFsYW5jZSBpcyAwIGJlY2F1c2UgaXQgZG9lcyBub3QgdXBkYXRlIHVudGlsIHBheW91dCBzdGFydHNcclxuY29uc3QgeyBDb250cmFjdEZvcm0sIENvbnRyYWN0RGF0YSB9ID0gbmV3Q29udGV4dENvbXBvbmVudHM7XHJcblxyXG5jb25zdCBTb2xkQXNzZXQgPSAoe2RyaXp6bGUsIGRyaXp6bGVTdGF0ZSwgcHJvcEFkZHJlc3MsIHRva2VuSWQsIGxpc3RQcmljZSwgc3RhcnRQYXksIHByb3Bvc2FsQmFsYW5jZSAgfSkgPT4ge1xyXG4gIGNvbnN0IGFjY291bnQgPSBkcml6emxlU3RhdGUuYWNjb3VudHNbMF07XHJcbiAgY29uc3QgW2RlcG9zaXRzLCBzZXREZXNwb3NpdEluZm9dID0gdXNlU3RhdGUoW10pO1xyXG5cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgZmV0Y2hQcm9wb3NhbEluZm8oKTtcclxuICB9LCBbXSlcclxuXHJcbiAgY29uc3QgZmV0Y2hQcm9wb3NhbEluZm8gPSBhc3luYyAoKSA9PiB7IFxyXG4gICAgICBsZXQgc3RhdGUgPSBkcml6emxlLnN0b3JlLmdldFN0YXRlKClcclxuICAgICAgaWYoc3RhdGUuZHJpenpsZVN0YXR1cy5pbml0aWFsaXplZCl7XHJcblxyXG4gICAgICBjb25zdCBwcm9wb3NhbENvbnRyYWN0ID0gYXdhaXQgZHJpenpsZS5jb250cmFjdHNbYCR7cHJvcEFkZHJlc3N9YF07XHJcbiAgICAgIGNvbnN0IGRlcG9zaXRJbmZvTGVuZ3RoID0gYXdhaXQgcHJvcG9zYWxDb250cmFjdC5tZXRob2RzLmNvdW50RGVwb3NpdGVycygpLmNhbGwoKTtcclxuXHJcbiAgICAgIGxldCBpO1xyXG4gICAgICBsZXQgZGVwb3NpdGVyQXJyYXkgPSBbXTtcclxuICAgICAgZm9yIChpID0gMDsgaSA8IGRlcG9zaXRJbmZvTGVuZ3RoOyBpKyspIHtcclxuICAgICAgY29uc3QgZGVwb3NpdEluZm8gPSBhd2FpdCBwcm9wb3NhbENvbnRyYWN0Lm1ldGhvZHMuZGVwb3NpdGVycyhbaV0pLmNhbGwoKTtcclxuICAgICAgXHJcbiAgICAgIGxldCBkZXBvc2l0ZXJBbW91bnQgPSBXZWIzLnV0aWxzLmZyb21XZWkoZGVwb3NpdEluZm8uYW1vdW50LCdldGhlcicpO1xyXG4gICAgICBsZXQgY29udmVydGxpc3RQcmljZSA9IFdlYjMudXRpbHMuZnJvbVdlaShsaXN0UHJpY2UsJ2V0aGVyJyk7XHJcbiAgICAgIGxldCBjb252ZXJ0UHJvcEJhbGFuY2UgPSBXZWIzLnV0aWxzLmZyb21XZWkocHJvcG9zYWxCYWxhbmNlLCdldGhlcicpO1xyXG4gICAgICBsZXQgbGlzdFByaWNlUGVyY2VudCA9ICgoZGVwb3NpdGVyQW1vdW50IC8gY29udmVydGxpc3RQcmljZSkgKiAxMDApLnRvRml4ZWQoMCk7XHJcbiAgICAgIGxldCBkZXBvc3RlclBheU91dCA9IChjb252ZXJ0UHJvcEJhbGFuY2UvMTAwKSAqIGxpc3RQcmljZVBlcmNlbnQ7XHJcbiAgICAgIGNvbnNvbGUubG9nKGRlcG9zdGVyUGF5T3V0KVxyXG4gICAgICBkZXBvc2l0ZXJBcnJheS5wdXNoKFtpLCBkZXBvc2l0SW5mby5kZXBvc2l0ZXIsIGRlcG9zdGVyUGF5T3V0LnRvU3RyaW5nKCldKTtcclxuICAgICAgc2V0RGVzcG9zaXRJbmZvKGRlcG9zaXRlckFycmF5KTtcclxuICAgIH1cclxuICAgICBcclxuICAgIC8vICAgbGV0IGk7XHJcbiAgICAvLyAgIGxldCBkZXBvc2l0ZXJBcnJheSA9IFtdO1xyXG4gICAgLy8gICBmb3IgKGkgPSAwOyBpIDwgZGVwb3NpdEluZm9MZW5ndGg7IGkrKykge1xyXG4gICAgLy8gICBjb25zdCBkZXBvc2l0SW5mbyA9IGF3YWl0IHByb3Bvc2FsQ29udHJhY3QubWV0aG9kcy5kZXBvc2l0ZXJzKFtpXSkuY2FsbCgpO1xyXG4gICAgLy8gICBkZXBvc2l0ZXJBcnJheS5wdXNoKFtpLCBkZXBvc2l0SW5mby5kZXBvc2l0ZXIsIGRlcG9zaXRJbmZvLmFtb3VudF0pO1xyXG4gICAgLy8gICBzZXREZXNwb3NpdEluZm8oZGVwb3NpdGVyQXJyYXkpO1xyXG4gICAgLy8gfVxyXG4gICBcclxuICB9XHJcbiAgIHJldHVybiAnTG9hZGluZy4uLi4nXHJcbiAgfVxyXG5cclxuXHJcbiAgcmV0dXJuKFxyXG4gICAgPD5cclxuICAgICAgey8qIDxGb3JTYWxlSW5uZXJNb2RhbFxyXG4gICAgICAgICBkcml6emxlPXtkcml6emxlfVxyXG4gICAgICAgICBkcml6emxlU3RhdGU9e2RyaXp6bGVTdGF0ZX1cclxuICAgICAgICAgcHJvcEFkZHJlc3M9e3Byb3BBZGRyZXNzfVxyXG4gICAgICAgICBsaXN0UHJpY2U9e2xpc3RQcmljZX1cclxuICAgICAgICAgc3RhcnRQYXk9e3N0YXJ0UGF5fVxyXG4gICAgICAvPiAqL31cclxuXHJcblxyXG4gICAgICAgIHtkZXBvc2l0cyA/ICAgXHJcbiAgICAgICAgICA8Um93IGNsYXNzTmFtZT1cImNhcmQtdGV4dCBqdXN0aWZ5LWNvbnRlbnQtY2VudGVyIG10LTFcIj4gXHJcbiAgICAgICAgICAgIDxkaXY+XHJcbiAgICAgICAgICAgICAgPFJvdz5cclxuICAgICAgICAgICAgICAgIDxoNSBjbGFzc05hbWU9XCJtYi0xXCI+XHJcbiAgICAgICAgICAgICAgICAgIE93bmVyczpcclxuICAgICAgICAgICAgICAgIDwvaDU+XHJcbiAgICAgICAgICAgICAgPC9Sb3c+XHJcbiAgICAgICAgICAgIHtkZXBvc2l0cy5tYXAoZGVwb3NpdCA9PiAoXHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJkZXBvc2l0LWluZm9cIiBrZXk9e2RlcG9zaXRbMF19ID5cclxuICAgICAgICAgICAgICAgIDxSb3cgY2xhc3NOYW1lPVwiYm9yZGVyLXRvcFwiPiBcclxuICAgICAgICAgICAgICAgICAgPGRpdj4gIFxyXG4gICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTFcIj5cclxuICAgICAgICAgICAgICAgICAgICAgIHtkZXBvc2l0WzFdfSBcclxuICAgICAgICAgICAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwiZGVwb3NpdC10ZXh0IG1iLTFcIj5cclxuICAgICAgICAgICAgICAgICAgICAgIENvbnRyaWJ1dGlvbjombmJzcDs8c3BhbiBjbGFzc05hbWU9XCJwdXJjaGFzZS1wcmljZVwiPntXZWIzLnV0aWxzLmZyb21XZWkoZGVwb3NpdFsyXSwnZXRoZXInKX08L3NwYW4+Jm5ic3A7TUFOQVxyXG4gICAgICAgICAgICAgICAgICAgIDwvcD5cclxuICAgICAgICAgICAgICAgICAgICA8UHJvZ3Jlc3MgY2xhc3NOYW1lPVwibWItMlwiIHZhbHVlPXtXZWIzLnV0aWxzLmZyb21XZWkoZGVwb3NpdFsyXSwnZXRoZXInKX0gbWF4PXtXZWIzLnV0aWxzLmZyb21XZWkocHJvcG9zYWxCYWxhbmNlLCdldGhlcicpfSA+PC9Qcm9ncmVzcz5cclxuICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L1Jvdz5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgKSl9XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPC9Sb3c+XHJcbiAgICAgICAgOlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhbGlnbi1pdGVtcy1jZW50ZXJcIj4gICBcclxuICAgICAgICAgICAgPExvYWRlciBjbGFzc05hbWU9XCJteC1hdXRvXCIgY29sb3I9XCIjMDA3YmZmXCIgc2l6ZT1cIjQwcHhcIiAvPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgfSBcclxuIFxyXG4gICAgICA8Q29udHJhY3RGb3JtXHJcbiAgICAgICAgZHJpenpsZT17ZHJpenpsZX1cclxuICAgICAgICBkcml6emxlU3RhdGU9e2RyaXp6bGVTdGF0ZX1cclxuICAgICAgICBjb250cmFjdD17cHJvcEFkZHJlc3N9XHJcbiAgICAgICAgbWV0aG9kPVwicGF5T3V0XCIgXHJcbiAgICAgICAgc2VuZEFyZ3M9e3sgZnJvbTphY2NvdW50IH19XHJcbiAgICAgICAgcmVuZGVyPXsoeyBoYW5kbGVTdWJtaXQgfSkgPT4gKFxyXG4gICAgICAgICAgPEZvcm0gb25TdWJtaXQ9e2hhbmRsZVN1Ym1pdH0+XHJcbiAgICAgICAgICAgIHsvKiA8ZGl2IGNsYXNzTmFtZT1cImp1c3RpZnktY29udGVudC1jZW50ZXIgbXgtYXV0byBcIj5cclxuICAgICAgICAgICAgICA8Q29udHJhY3REYXRhIGRyaXp6bGU9e2RyaXp6bGV9IGRyaXp6bGVTdGF0ZT17ZHJpenpsZVN0YXRlfSBjb250cmFjdD17cHJvcEFkZHJlc3N9IG1ldGhvZD1cInByb3Bvc2Fsc1wiIG1ldGhvZEFyZ3M9e1t0b2tlbklkXX0gXHJcbiAgICAgICAgICAgICAgICByZW5kZXI9e2RhdGEgPT4gKFxyXG4gICAgICAgICAgICAgICAgICA8PlxyXG4gICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm10LTQgbWItMSB0ZXh0LWNlbnRlclwiID5DdXJyZW50IFBvb2wgRGVwdGg6IHtXZWIzLnV0aWxzLmZyb21XZWkoYCR7ZGF0YS5iYWxhbmNlfWAsJ2V0aGVyJyl9IE1BTkE8L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgPFByb2dyZXNzIHZhbHVlPXtXZWIzLnV0aWxzLmZyb21XZWkoYCR7ZGF0YS5iYWxhbmNlfWAsJ2V0aGVyJyl9ICBtYXg9e2RhdGEucmVTYWxlUHJpY2V9ID48L1Byb2dyZXNzPlxyXG4gICAgICAgICAgICAgICAgICA8Lz5cclxuICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgPC9kaXY+ICAqL31cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtb2RhbC1mb290ZXJcIj5cclxuICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT1cImJ0biBidG4tYmxvY2sgYnRuLXN1Y2Nlc3Mgam9pbi1mb3JtLWJ0blwiIGtleT1cInN1Ym1pdFwiIHR5cGU9XCJidXR0b25cIiBvbkNsaWNrPXtoYW5kbGVTdWJtaXR9IHN0eWxlPXt7IGZvbnRTaXplOiAxNiB9fSA+IFxyXG4gICAgICAgICAgICAgICAgUGF5IE91dFxyXG4gICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPHN0eWxlIGpzeD4ge2AgXHJcbiAgICAgICAgICAgICAgLnNlbGwtdGV4dHtmb250LXdlaWdodDo0MDA7Y29sb3I6YmxhY2s7Zm9udC1zaXplOjFyZW07Zm9udC1mYW1pbHk6IFBvcHBpbnM7fVxyXG4gICAgICAgICAgICAgIC5hbW91bnQtbnVtYmVyIHtjb2xvcjojNjZhM2ZmO2ZvbnQtZmFtaWx5OiBQb3BwaW5zfSBcclxuICAgICAgICAgICAgICBgfSAgICBcclxuICAgICAgICAgICAgPC9zdHlsZT5cclxuICAgICAgICAgIDwvRm9ybT5cclxuICAgICAgICApfVxyXG4gICAgICAvPlxyXG4gICAgPC8+XHJcbiAgKVxyXG59XHJcbjxzdHlsZSBqc3g+XHJcbntgIFxyXG4gIC5jYXJkLXRleHR7Zm9udC1mYW1pbHk6UG9wcGlucztmb250LXNpemU6MXJlbTt9XHJcbiAgLnB1cmNoYXNlLXByaWNle2NvbG9yOiMwMDdiZmY7fVxyXG4gIC5kZXBvc2l0LWluZm97Y29sb3I6IzAwMDtmb250LXdlaWdodDo0MDA7fVxyXG4gIC5kZXBvc2l0LXRleHR7Zm9udC1zaXplOi45cmVtO2NvbG9yOiMwMDA7fVxyXG5gfSAgICAgICAgICAgICAgICBcclxuPC9zdHlsZT5cclxuY29uc3QgbWFwU3RhdGVUb1Byb3BzID0gKHN0YXRlKSA9PiAoe1xyXG4gIGxpc3RQcmljZTpzdGF0ZS5hcHBSZWR1Y2Vycy5saXN0UHJpY2VcclxufSlcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNvbm5lY3QobWFwU3RhdGVUb1Byb3BzLCBudWxsKShTb2xkQXNzZXQpO1xyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuICAiXX0= */\\n/*@ sourceURL=C:\\\\\\\\Users\\\\\\\\Samsung\\\\\\\\code\\\\\\\\cacp\\\\\\\\client\\\\\\\\components\\\\\\\\forms\\\\\\\\SoldAsset.js */\")),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }\n  }));\n};\n\n__jsx(\"style\", {\n  jsx: true,\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 130,\n    columnNumber: 1\n  }\n}, \" \\n  .card-text{font-family:Poppins;font-size:1rem;}\\n  .purchase-price{color:#007bff;}\\n  .deposit-info{color:#000;font-weight:400;}\\n  .deposit-text{font-size:.9rem;color:#000;}\\n\");\n\nconst mapStateToProps = state => ({\n  listPrice: state.appReducers.listPrice\n});\n\nexport default connect(mapStateToProps, null)(SoldAsset);","map":{"version":3,"sources":["C:/Users/Samsung/code/cacp/client/components/forms/SoldAsset.js"],"names":["React","useState","useEffect","connect","newContextComponents","Button","Progress","Row","Form","Web3","ForSaleInnerModal","ContractForm","ContractData","SoldAsset","drizzle","drizzleState","propAddress","tokenId","listPrice","startPay","proposalBalance","account","accounts","deposits","setDespositInfo","fetchProposalInfo","state","store","getState","drizzleStatus","initialized","contracts","proposalContract","methods","countDepositers","call","depositInfoLength","depositerArray","i","depositers","depositInfo","depositerAmount","utils","fromWei","amount","convertlistPrice","convertPropBalance","listPricePercent","toFixed","deposterPayOut","console","log","push","depositer","toString","map","deposit","from","handleSubmit","fontSize","mapStateToProps","appReducers"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { newContextComponents } from \"@drizzle/react-components\";\r\nimport { Button, Progress, Row, Form } from \"shards-react\";\r\nimport Web3 from \"web3\";\r\nimport ForSaleInnerModal from '../modals/ForSaleInnerModal.js';\r\n\r\n//data.balance is 0 because it does not update until payout starts\r\nconst { ContractForm, ContractData } = newContextComponents;\r\n\r\nconst SoldAsset = ({drizzle, drizzleState, propAddress, tokenId, listPrice, startPay, proposalBalance  }) => {\r\n  const account = drizzleState.accounts[0];\r\n  const [deposits, setDespositInfo] = useState([]);\r\n\r\n  useEffect(() => {\r\n    fetchProposalInfo();\r\n  }, [])\r\n\r\n  const fetchProposalInfo = async () => { \r\n      let state = drizzle.store.getState()\r\n      if(state.drizzleStatus.initialized){\r\n\r\n      const proposalContract = await drizzle.contracts[`${propAddress}`];\r\n      const depositInfoLength = await proposalContract.methods.countDepositers().call();\r\n\r\n      let i;\r\n      let depositerArray = [];\r\n      for (i = 0; i < depositInfoLength; i++) {\r\n      const depositInfo = await proposalContract.methods.depositers([i]).call();\r\n      \r\n      let depositerAmount = Web3.utils.fromWei(depositInfo.amount,'ether');\r\n      let convertlistPrice = Web3.utils.fromWei(listPrice,'ether');\r\n      let convertPropBalance = Web3.utils.fromWei(proposalBalance,'ether');\r\n      let listPricePercent = ((depositerAmount / convertlistPrice) * 100).toFixed(0);\r\n      let deposterPayOut = (convertPropBalance/100) * listPricePercent;\r\n      console.log(deposterPayOut)\r\n      depositerArray.push([i, depositInfo.depositer, deposterPayOut.toString()]);\r\n      setDespositInfo(depositerArray);\r\n    }\r\n     \r\n    //   let i;\r\n    //   let depositerArray = [];\r\n    //   for (i = 0; i < depositInfoLength; i++) {\r\n    //   const depositInfo = await proposalContract.methods.depositers([i]).call();\r\n    //   depositerArray.push([i, depositInfo.depositer, depositInfo.amount]);\r\n    //   setDespositInfo(depositerArray);\r\n    // }\r\n   \r\n  }\r\n   return 'Loading....'\r\n  }\r\n\r\n\r\n  return(\r\n    <>\r\n      {/* <ForSaleInnerModal\r\n         drizzle={drizzle}\r\n         drizzleState={drizzleState}\r\n         propAddress={propAddress}\r\n         listPrice={listPrice}\r\n         startPay={startPay}\r\n      /> */}\r\n\r\n\r\n        {deposits ?   \r\n          <Row className=\"card-text justify-content-center mt-1\"> \r\n            <div>\r\n              <Row>\r\n                <h5 className=\"mb-1\">\r\n                  Owners:\r\n                </h5>\r\n              </Row>\r\n            {deposits.map(deposit => (\r\n              <div className=\"deposit-info\" key={deposit[0]} >\r\n                <Row className=\"border-top\"> \r\n                  <div>  \r\n                    <p className=\"mb-1\">\r\n                      {deposit[1]} \r\n                    </p>\r\n                    <p className=\"deposit-text mb-1\">\r\n                      Contribution:&nbsp;<span className=\"purchase-price\">{Web3.utils.fromWei(deposit[2],'ether')}</span>&nbsp;MANA\r\n                    </p>\r\n                    <Progress className=\"mb-2\" value={Web3.utils.fromWei(deposit[2],'ether')} max={Web3.utils.fromWei(proposalBalance,'ether')} ></Progress>\r\n                  </div>\r\n                </Row>\r\n              </div>\r\n            ))}\r\n            </div>\r\n          </Row>\r\n        :\r\n          <div className=\"align-items-center\">   \r\n            <Loader className=\"mx-auto\" color=\"#007bff\" size=\"40px\" />\r\n          </div>\r\n        } \r\n \r\n      <ContractForm\r\n        drizzle={drizzle}\r\n        drizzleState={drizzleState}\r\n        contract={propAddress}\r\n        method=\"payOut\" \r\n        sendArgs={{ from:account }}\r\n        render={({ handleSubmit }) => (\r\n          <Form onSubmit={handleSubmit}>\r\n            {/* <div className=\"justify-content-center mx-auto \">\r\n              <ContractData drizzle={drizzle} drizzleState={drizzleState} contract={propAddress} method=\"proposals\" methodArgs={[tokenId]} \r\n                render={data => (\r\n                  <>\r\n                    <p className=\"mt-4 mb-1 text-center\" >Current Pool Depth: {Web3.utils.fromWei(`${data.balance}`,'ether')} MANA</p>\r\n                    <Progress value={Web3.utils.fromWei(`${data.balance}`,'ether')}  max={data.reSalePrice} ></Progress>\r\n                  </>\r\n                )}\r\n              />\r\n            </div>  */}\r\n            <div className=\"modal-footer\">\r\n              <button className=\"btn btn-block btn-success join-form-btn\" key=\"submit\" type=\"button\" onClick={handleSubmit} style={{ fontSize: 16 }} > \r\n                Pay Out\r\n              </button>\r\n            </div>\r\n            <style jsx> {` \r\n              .sell-text{font-weight:400;color:black;font-size:1rem;font-family: Poppins;}\r\n              .amount-number {color:#66a3ff;font-family: Poppins} \r\n              `}    \r\n            </style>\r\n          </Form>\r\n        )}\r\n      />\r\n    </>\r\n  )\r\n}\r\n<style jsx>\r\n{` \r\n  .card-text{font-family:Poppins;font-size:1rem;}\r\n  .purchase-price{color:#007bff;}\r\n  .deposit-info{color:#000;font-weight:400;}\r\n  .deposit-text{font-size:.9rem;color:#000;}\r\n`}                \r\n</style>\r\nconst mapStateToProps = (state) => ({\r\n  listPrice:state.appReducers.listPrice\r\n})\r\n\r\nexport default connect(mapStateToProps, null)(SoldAsset);\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n  "]},"metadata":{},"sourceType":"module"}