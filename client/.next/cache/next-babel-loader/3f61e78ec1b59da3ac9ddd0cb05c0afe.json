{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Samsung\\\\code\\\\cacp\\\\client\\\\components\\\\Nominations.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nimport React, { useState, useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport Web3 from \"web3\";\nimport { Loader } from 'rimble-ui';\nimport { Card, CardHeader, CardBody, CardFooter, CardTitle, Button, Row } from \"shards-react\";\nimport NominationModal from './modals/NominationModal';\nimport FundingModal from './modals/FundingModal.js';\nimport SaleModal from './modals/SaleModal.js';\nimport SoldModal from './modals/SoldModal.js';\nimport PaidOutModal from './modals/PaidOutModal.js';\nimport PurchaseModal from './modals/PurchaseModal.js';\nimport NominationDetailsLink from './NominationDetailsLink.js';\nimport Moment from \"react-moment\";\n\nconst CardFooterButton = ({\n  props,\n  userManaBalance,\n  getSoldStatus,\n  nftAddress,\n  expiresAt,\n  assetPrice,\n  tokenId,\n  orderId,\n  getOrderId,\n  orderStatus,\n  storedOrderId\n}) => {\n  const _useState = useState(null),\n        isStatus = _useState[0],\n        setStatus = _useState[1]; // const [isStoredOrderId, setStoredOrderId] = useState();\n\n\n  console.log(storedOrderId);\n\n  const fetchProposals = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n      var proposal, proposalAddress, proposalBalance, propData, status, soldStatus;\n      return regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return props.drizzle.contracts.ProposalController.methods.deployedProposals(\"\".concat(tokenId)).call();\n\n          case 2:\n            proposal = _context.sent;\n\n            if (!proposal) {\n              _context.next = 18;\n              break;\n            }\n\n            _context.next = 6;\n            return props.drizzle.contracts.ProposalController.methods.proposalTokenIdMap(\"\".concat(tokenId)).call();\n\n          case 6:\n            proposalAddress = _context.sent;\n            _context.next = 9;\n            return props.drizzle.contracts.MANAToken.methods.balanceOf(\"\".concat(proposalAddress)).call();\n\n          case 9:\n            proposalBalance = _context.sent;\n            _context.next = 12;\n            return props.drizzle.contracts.ProposalController.methods.getPropData(\"\".concat(proposalAddress)).call();\n\n          case 12:\n            propData = _context.sent;\n            status = propData[0];\n            getOrderId(propData[2]);\n\n            if (status === '4') {\n              if (proposalBalance > assetPrice) {\n                soldStatus = '6';\n                getSoldStatus(proposalBalance, soldStatus);\n                setStatus('6');\n              } else {\n                setStatus(status);\n                getOrderId(orderId);\n              }\n            } else {\n              setStatus(status);\n              getOrderId(orderId);\n            }\n\n            _context.next = 20;\n            break;\n\n          case 18:\n            setStatus(null);\n            getOrderId(orderId);\n\n          case 20:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee);\n    }));\n\n    return function fetchProposals() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  useEffect(() => {\n    fetchProposals();\n  }, [tokenId]);\n  return __jsx(React.Fragment, null, (() => {\n    switch (isStatus) {\n      //switch ('6') {\n      //0-FUNDING\n      case '0':\n        return __jsx(CardFooter, {\n          className: \"p-0\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 15\n          }\n        }, \"Funding:\", storedOrderId, __jsx(FundingModal, {\n          nftAddress: nftAddress,\n          tokenId: tokenId,\n          assetPrice: assetPrice,\n          expiresAt: expiresAt,\n          props: props,\n          userManaBalance: userManaBalance,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 17\n          }\n        }));\n      // case '0'  && orderId === storedOrderId:\n      //   return  (\n      //     <>\n      //       <CardFooter className=\"p-0\"> \n      //       Nomination=0:{storedOrderId} \n      //         <NominationModal\n      //           nftAddress={nftAddress}\n      //           tokenId={tokenId}\n      //           assetPrice={assetPrice}\n      //           expiresAt={expiresAt} \n      //           props={props} \n      //           orderId={orderId}\n      //           userManaBalance={userManaBalance}\n      //           orderStatus={orderStatus}\n      //         />\n      //       </CardFooter> \n      //     </>\n      // )\n      //FUNDED\n\n      case '1':\n        return __jsx(CardFooter, {\n          className: \"p-0\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 15\n          }\n        }, __jsx(PurchaseModal, {\n          nftAddress: nftAddress,\n          tokenId: tokenId,\n          assetPrice: assetPrice,\n          expiresAt: expiresAt,\n          props: props,\n          userManaBalance: userManaBalance,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 17\n          }\n        }));\n      //FOR_SALE\n\n      case '4':\n        return __jsx(CardFooter, {\n          className: \"p-0\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 15\n          }\n        }, __jsx(SaleModal, {\n          nftAddress: nftAddress,\n          tokenId: tokenId,\n          assetPrice: assetPrice,\n          expiresAt: expiresAt,\n          props: props,\n          userManaBalance: userManaBalance,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 17\n          }\n        }));\n      //PAYINGOUT\n\n      case '6':\n        return __jsx(React.Fragment, null, __jsx(CardFooter, {\n          className: \"p-0\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 17\n          }\n        }, __jsx(SoldModal, {\n          nftAddress: nftAddress,\n          tokenId: tokenId,\n          assetPrice: assetPrice,\n          expiresAt: expiresAt,\n          props: props,\n          userManaBalance: userManaBalance,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 19\n          }\n        })));\n\n      case '7':\n        return __jsx(React.Fragment, null, __jsx(CardFooter, {\n          className: \"p-0\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 19\n          }\n        }, __jsx(PaidOutModal, {\n          nftAddress: nftAddress,\n          tokenId: tokenId,\n          assetPrice: assetPrice,\n          expiresAt: expiresAt,\n          props: props,\n          userManaBalance: userManaBalance,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 21\n          }\n        })));\n\n      case null && \"\\\"\".concat(orderId, \"\\\"\") == \"\\\"\".concat(storedOrderId, \"\\\"\"):\n        return __jsx(React.Fragment, null, __jsx(CardFooter, {\n          className: \"p-0\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 19\n          }\n        }, \"null:\", storedOrderId, __jsx(NominationModal, {\n          nftAddress: nftAddress,\n          tokenId: tokenId,\n          assetPrice: assetPrice,\n          expiresAt: expiresAt,\n          props: props,\n          orderId: orderId,\n          userManaBalance: userManaBalance,\n          orderStatus: orderStatus,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 21\n          }\n        })));\n\n      case 'error':\n        return 'error';\n\n      default:\n        return __jsx(CardFooter, {\n          className: \"p-0\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 15\n          }\n        }, \"default:\", storedOrderId, __jsx(NominationModal, {\n          nftAddress: nftAddress,\n          tokenId: tokenId,\n          assetPrice: assetPrice,\n          expiresAt: expiresAt,\n          props: props,\n          orderId: orderId,\n          userManaBalance: userManaBalance,\n          orderStatus: orderStatus,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 17\n          }\n        }));\n    }\n  })());\n};\n\nconst Nominations = ({\n  orders,\n  loading,\n  props,\n  userManaBalance,\n  getSoldStatus,\n  getOrderId,\n  storedOrderId\n}) => {\n  if (loading) {\n    return __jsx(Loader, {\n      className: \"mt-2 mx-auto\",\n      size: \"30px\",\n      color: \"blue\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 12\n      }\n    });\n  }\n\n  return __jsx(Row, {\n    className: \"mt-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 5\n    }\n  }, orders.map(parcel => __jsx(\"div\", {\n    key: parcel.nft.activeOrder.txHash,\n    className: \"jsx-104154341\" + \" \" + \"mb-4 col-sm-12 col-md-12 col-lg-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 11\n    }\n  }, __jsx(Card, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 13\n    }\n  }, __jsx(CardHeader, {\n    className: \"asset-header p-2 card-title text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 15\n    }\n  }, \"Decentraland\"), __jsx(\"div\", {\n    className: \"jsx-104154341\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 15\n    }\n  }, __jsx(\"div\", {\n    className: \"jsx-104154341\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 17\n    }\n  }, __jsx(CardTitle, {\n    className: \"asset-title text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 19\n    }\n  }, __jsx(\"div\", {\n    className: \"jsx-104154341\" + \" \" + \"current-price\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 21\n    }\n  }, \"Price:\\xA0\", Web3.utils.fromWei(\"\".concat(parcel.nft.activeOrder.price), 'ether'), \" MANA\")))), __jsx(Row, {\n    className: \"justify-content-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 15\n    }\n  }, __jsx(NominationDetailsLink, {\n    tokenId: parcel.nft.parcel.tokenId,\n    drizzle: props.drizzle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 17\n    }\n  })), __jsx(CardBody, {\n    className: \"pb-.4rem;px-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 15\n    }\n  }, __jsx(Row, {\n    className: \"asset-image align-items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 17\n    }\n  }, __jsx(\"img\", {\n    src: 'https://api.decentraland.org/v1/parcels/' + parcel.nft.parcel.x + '/' + parcel.nft.parcel.y + '/map.png?height=260&width=260&size=12',\n    className: \"jsx-104154341\" + \" \" + \"mx-auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 19\n    }\n  })), __jsx(Row, {\n    className: \"mt-2 justify-content-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 17\n    }\n  }, __jsx(\"div\", {\n    className: \"jsx-104154341\" + \" \" + \"my-2 asset-card text-center card-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 17\n    }\n  }, \"Parcel:\\xA0\", parcel.nft.parcel.x, \",\", parcel.nft.parcel.y)), __jsx(Row, {\n    className: \"mt-3 justify-content-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 17\n    }\n  }, __jsx(\"div\", {\n    className: \"jsx-104154341\" + \" \" + \"mb-2 col-sm asset-card text-left card-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 19\n    }\n  }, \"End Date\"), __jsx(\"div\", {\n    className: \"jsx-104154341\" + \" \" + \"mb-2 col-sm asset-card-time text-right card-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 19\n    }\n  }, typeof Number(parcel.nft.activeOrder.expiresAt) == 'number' ? __jsx(Moment, {\n    format: \"h:mma M/DD/YY\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 23\n    }\n  }, Number(parcel.nft.activeOrder.expiresAt)) : 'no end date'))), __jsx(CardFooterButton, {\n    tokenId: parcel.nft.parcel.tokenId,\n    assetPrice: parcel.nft.activeOrder.price,\n    expiresAt: parcel.nft.activeOrder.expiresAt,\n    nftAddress: parcel.nft.activeOrder.nftAddress,\n    orderId: parcel.nft.activeOrder.id,\n    orderStatus: parcel.status,\n    props: props,\n    storedOrderId: storedOrderId,\n    userManaBalance: userManaBalance,\n    getSoldStatus: getSoldStatus,\n    getOrderId: getOrderId,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 15\n    }\n  })), __jsx(_JSXStyle, {\n    id: \"104154341\",\n    __self: this\n  }, \".modal-content.jsx-104154341{border-top:2px solid #bff;}.asset-card.jsx-104154341{font-weight:400;color:black;font-size:.9rem;font-family:Poppins;}.card-footer-btn.jsx-104154341{font-family:Poppins;font-weight:400;color:#000;font-size:1rem;-webkit-letter-spacing:.3rem;-moz-letter-spacing:.3rem;-ms-letter-spacing:.3rem;letter-spacing:.3rem;border-radius:.01rem .01rem .2rem .2rem;}.card-footer-btn.jsx-104154341:hover{background:#007bff;color:white;}.asset-total-fund.jsx-104154341{font-weight:200;font-size:.9rem;-webkit-letter-spacing:.2rem;-moz-letter-spacing:.2rem;-ms-letter-spacing:.2rem;letter-spacing:.2rem;color:#000;}.asset-card-numbers.jsx-104154341{font-size:1rem;-webkit-letter-spacing:.2rem;-moz-letter-spacing:.2rem;-ms-letter-spacing:.2rem;letter-spacing:.2rem;color:#007bff;hover:black;}.asset-card-time.jsx-104154341{font-weight:400;color:#ff8080;font-size:.9rem;font-family:Poppins;}.current-price.jsx-104154341{font-size:.9rem;-webkit-letter-spacing:.1rem;-moz-letter-spacing:.1rem;-ms-letter-spacing:.1rem;letter-spacing:.1rem;font-weight:400;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcU2Ftc3VuZ1xcY29kZVxcY2FjcFxcY2xpZW50XFxjb21wb25lbnRzXFxOb21pbmF0aW9ucy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUF1UHVCLEFBRW1ELEFBQ1osQUFDVSxBQUVJLEFBQ1IsQUFDQyxBQUNGLEFBQ0YsZUFGd0IsQ0FMaEIsQUFJVSxBQUVILEFBQ0ssR0FKRSxDQUZBLE1BRlosRUFDYSxFQU1PLENBSFAsQ0FDZSxJQUhOLFFBRFcsRUFNTSxDQUxILGVBQ3ZELEVBRnFELEVBTU0sa0RBRGIsQ0FFRixhQUZhLEdBREEsQUFHWixTQUZhLEVBREEsbUJBRm5CLHdDQUFDIiwiZmlsZSI6IkM6XFxVc2Vyc1xcU2Ftc3VuZ1xcY29kZVxcY2FjcFxcY2xpZW50XFxjb21wb25lbnRzXFxOb21pbmF0aW9ucy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBjb25uZWN0IH0gZnJvbSAncmVhY3QtcmVkdXgnO1xyXG5pbXBvcnQgV2ViMyBmcm9tIFwid2ViM1wiO1xyXG5pbXBvcnQgeyBMb2FkZXIgfSBmcm9tICdyaW1ibGUtdWknO1xyXG5pbXBvcnQgeyBDYXJkLCBDYXJkSGVhZGVyLCBDYXJkQm9keSwgQ2FyZEZvb3RlciwgQ2FyZFRpdGxlLCBCdXR0b24sIFJvdyB9IGZyb20gXCJzaGFyZHMtcmVhY3RcIjtcclxuaW1wb3J0IE5vbWluYXRpb25Nb2RhbCBmcm9tICcuL21vZGFscy9Ob21pbmF0aW9uTW9kYWwnO1xyXG5pbXBvcnQgRnVuZGluZ01vZGFsIGZyb20gJy4vbW9kYWxzL0Z1bmRpbmdNb2RhbC5qcyc7XHJcbmltcG9ydCBTYWxlTW9kYWwgZnJvbSAnLi9tb2RhbHMvU2FsZU1vZGFsLmpzJztcclxuaW1wb3J0IFNvbGRNb2RhbCBmcm9tICcuL21vZGFscy9Tb2xkTW9kYWwuanMnO1xyXG5pbXBvcnQgUGFpZE91dE1vZGFsIGZyb20gJy4vbW9kYWxzL1BhaWRPdXRNb2RhbC5qcyc7XHJcbmltcG9ydCBQdXJjaGFzZU1vZGFsIGZyb20gJy4vbW9kYWxzL1B1cmNoYXNlTW9kYWwuanMnO1xyXG5pbXBvcnQgTm9taW5hdGlvbkRldGFpbHNMaW5rIGZyb20gJy4vTm9taW5hdGlvbkRldGFpbHNMaW5rLmpzJztcclxuaW1wb3J0IE1vbWVudCBmcm9tIFwicmVhY3QtbW9tZW50XCI7XHJcblxyXG5jb25zdCBDYXJkRm9vdGVyQnV0dG9uID0gKHsgcHJvcHMsIHVzZXJNYW5hQmFsYW5jZSwgZ2V0U29sZFN0YXR1cywgbmZ0QWRkcmVzcywgZXhwaXJlc0F0LCBhc3NldFByaWNlLCB0b2tlbklkLCBvcmRlcklkLCBnZXRPcmRlcklkLCBvcmRlclN0YXR1cywgc3RvcmVkT3JkZXJJZCB9KSA9PiB7XHJcbiAgY29uc3QgW2lzU3RhdHVzLCBzZXRTdGF0dXNdID0gdXNlU3RhdGUobnVsbCk7XHJcbiAgLy8gY29uc3QgW2lzU3RvcmVkT3JkZXJJZCwgc2V0U3RvcmVkT3JkZXJJZF0gPSB1c2VTdGF0ZSgpO1xyXG4gIGNvbnNvbGUubG9nKHN0b3JlZE9yZGVySWQpXHJcbiAgY29uc3QgZmV0Y2hQcm9wb3NhbHMgPSBhc3luYyAoKSA9PiB7XHJcbiAgICBjb25zdCBwcm9wb3NhbCA9IGF3YWl0IHByb3BzLmRyaXp6bGUuY29udHJhY3RzLlByb3Bvc2FsQ29udHJvbGxlci5tZXRob2RzLmRlcGxveWVkUHJvcG9zYWxzKGAke3Rva2VuSWR9YCkuY2FsbCgpO1xyXG4gICAgaWYocHJvcG9zYWwpe1xyXG4gICAgICBjb25zdCBwcm9wb3NhbEFkZHJlc3MgPSBhd2FpdCBwcm9wcy5kcml6emxlLmNvbnRyYWN0cy5Qcm9wb3NhbENvbnRyb2xsZXIubWV0aG9kcy5wcm9wb3NhbFRva2VuSWRNYXAoYCR7dG9rZW5JZH1gKS5jYWxsKCk7XHJcbiAgICAgIGNvbnN0IHByb3Bvc2FsQmFsYW5jZSA9IGF3YWl0IHByb3BzLmRyaXp6bGUuY29udHJhY3RzLk1BTkFUb2tlbi5tZXRob2RzLmJhbGFuY2VPZihgJHtwcm9wb3NhbEFkZHJlc3N9YCkuY2FsbCgpO1xyXG4gICAgICBjb25zdCBwcm9wRGF0YSA9IGF3YWl0IHByb3BzLmRyaXp6bGUuY29udHJhY3RzLlByb3Bvc2FsQ29udHJvbGxlci5tZXRob2RzLmdldFByb3BEYXRhKGAke3Byb3Bvc2FsQWRkcmVzc31gKS5jYWxsKCk7XHJcbiAgICAgIGNvbnN0IHN0YXR1cyA9IHByb3BEYXRhWzBdO1xyXG4gICAgICBnZXRPcmRlcklkKHByb3BEYXRhWzJdKTtcclxuICAgICAgaWYoc3RhdHVzID09PSAnNCcpe1xyXG4gICAgICAgIGlmKHByb3Bvc2FsQmFsYW5jZSA+IGFzc2V0UHJpY2Upe1xyXG4gICAgICAgICAgY29uc3Qgc29sZFN0YXR1cyA9ICc2JztcclxuICAgICAgICAgIGdldFNvbGRTdGF0dXMocHJvcG9zYWxCYWxhbmNlLCBzb2xkU3RhdHVzKTtcclxuICAgICAgICAgIHNldFN0YXR1cygnNicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgIHNldFN0YXR1cyhzdGF0dXMpO1xyXG4gICAgICAgICAgICBnZXRPcmRlcklkKG9yZGVySWQpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICBzZXRTdGF0dXMoc3RhdHVzKTtcclxuICAgICAgICAgIGdldE9yZGVySWQob3JkZXJJZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGVsc2V7XHJcbiAgICAgICAgc2V0U3RhdHVzKG51bGwpXHJcbiAgICAgICAgZ2V0T3JkZXJJZChvcmRlcklkKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICAgIGZldGNoUHJvcG9zYWxzKCk7XHJcbiAgICB9LCBbdG9rZW5JZF0pO1xyXG5cclxuICAgIHJldHVybiAoXHJcbiAgICAgICAgPD5cclxuICAgICAgICB7KCgpID0+IHtcclxuICAgICAgICBzd2l0Y2ggKGlzU3RhdHVzKSB7XHJcbiAgICAgICAgLy9zd2l0Y2ggKCc2Jykge1xyXG4gICAgICAgICAgLy8wLUZVTkRJTkdcclxuICAgICAgICAgIGNhc2UgJzAnOlxyXG4gICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgIDxDYXJkRm9vdGVyIGNsYXNzTmFtZT1cInAtMFwiPiAgXHJcbiAgICAgICAgICAgICAgICBGdW5kaW5nOntzdG9yZWRPcmRlcklkfVxyXG4gICAgICAgICAgICAgICAgPEZ1bmRpbmdNb2RhbCBcclxuICAgICAgICAgICAgICAgICAgbmZ0QWRkcmVzcz17bmZ0QWRkcmVzc31cclxuICAgICAgICAgICAgICAgICAgdG9rZW5JZD17dG9rZW5JZH1cclxuICAgICAgICAgICAgICAgICAgYXNzZXRQcmljZT17YXNzZXRQcmljZX1cclxuICAgICAgICAgICAgICAgICAgZXhwaXJlc0F0PXtleHBpcmVzQXR9ICBcclxuICAgICAgICAgICAgICAgICAgcHJvcHM9e3Byb3BzfSBcclxuICAgICAgICAgICAgICAgICAgdXNlck1hbmFCYWxhbmNlPXt1c2VyTWFuYUJhbGFuY2V9XHJcbiAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgIDwvQ2FyZEZvb3Rlcj4gXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgICAgLy8gY2FzZSAnMCcgICYmIG9yZGVySWQgPT09IHN0b3JlZE9yZGVySWQ6XHJcbiAgICAgICAgICAgIC8vICAgcmV0dXJuICAoXHJcbiAgICAgICAgICAgIC8vICAgICA8PlxyXG4gICAgICAgICAgICAvLyAgICAgICA8Q2FyZEZvb3RlciBjbGFzc05hbWU9XCJwLTBcIj4gXHJcbiAgICAgICAgICAgIC8vICAgICAgIE5vbWluYXRpb249MDp7c3RvcmVkT3JkZXJJZH0gXHJcbiAgICAgICAgICAgIC8vICAgICAgICAgPE5vbWluYXRpb25Nb2RhbFxyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgbmZ0QWRkcmVzcz17bmZ0QWRkcmVzc31cclxuICAgICAgICAgICAgLy8gICAgICAgICAgIHRva2VuSWQ9e3Rva2VuSWR9XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICBhc3NldFByaWNlPXthc3NldFByaWNlfVxyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgZXhwaXJlc0F0PXtleHBpcmVzQXR9IFxyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgcHJvcHM9e3Byb3BzfSBcclxuICAgICAgICAgICAgLy8gICAgICAgICAgIG9yZGVySWQ9e29yZGVySWR9XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICB1c2VyTWFuYUJhbGFuY2U9e3VzZXJNYW5hQmFsYW5jZX1cclxuICAgICAgICAgICAgLy8gICAgICAgICAgIG9yZGVyU3RhdHVzPXtvcmRlclN0YXR1c31cclxuICAgICAgICAgICAgLy8gICAgICAgICAvPlxyXG4gICAgICAgICAgICAvLyAgICAgICA8L0NhcmRGb290ZXI+IFxyXG4gICAgICAgICAgICAvLyAgICAgPC8+XHJcbiAgICAgICAgICAgIC8vIClcclxuICAgICAgICAgIC8vRlVOREVEXHJcbiAgICAgICAgICBjYXNlICcxJzpcclxuICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICA8Q2FyZEZvb3RlciBjbGFzc05hbWU9XCJwLTBcIj5cclxuICAgICAgICAgICAgICAgIDxQdXJjaGFzZU1vZGFsIFxyXG4gICAgICAgICAgICAgICAgICBuZnRBZGRyZXNzPXtuZnRBZGRyZXNzfVxyXG4gICAgICAgICAgICAgICAgICB0b2tlbklkPXt0b2tlbklkfVxyXG4gICAgICAgICAgICAgICAgICBhc3NldFByaWNlPXthc3NldFByaWNlfVxyXG4gICAgICAgICAgICAgICAgICBleHBpcmVzQXQ9e2V4cGlyZXNBdH0gXHJcbiAgICAgICAgICAgICAgICAgIHByb3BzPXtwcm9wc30gXHJcbiAgICAgICAgICAgICAgICAgIHVzZXJNYW5hQmFsYW5jZT17dXNlck1hbmFCYWxhbmNlfVxyXG4gICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICA8L0NhcmRGb290ZXI+IFxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICAvL0ZPUl9TQUxFXHJcbiAgICAgICAgICBjYXNlICc0JzpcclxuICAgICAgICAgICAgcmV0dXJuICAoXHJcbiAgICAgICAgICAgICAgPENhcmRGb290ZXIgY2xhc3NOYW1lPVwicC0wXCI+XHJcbiAgICAgICAgICAgICAgICA8U2FsZU1vZGFsIFxyXG4gICAgICAgICAgICAgICAgICBuZnRBZGRyZXNzPXtuZnRBZGRyZXNzfVxyXG4gICAgICAgICAgICAgICAgICB0b2tlbklkPXt0b2tlbklkfVxyXG4gICAgICAgICAgICAgICAgICBhc3NldFByaWNlPXthc3NldFByaWNlfVxyXG4gICAgICAgICAgICAgICAgICBleHBpcmVzQXQ9e2V4cGlyZXNBdH0gXHJcbiAgICAgICAgICAgICAgICAgIHByb3BzPXtwcm9wc30gXHJcbiAgICAgICAgICAgICAgICAgIHVzZXJNYW5hQmFsYW5jZT17dXNlck1hbmFCYWxhbmNlfVxyXG4gICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICA8L0NhcmRGb290ZXI+IFxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgLy9QQVlJTkdPVVRcclxuICAgICAgICAgIGNhc2UgJzYnOlxyXG4gICAgICAgICAgICByZXR1cm4gIChcclxuICAgICAgICAgICAgICA8PlxyXG4gICAgICAgICAgICAgICAgPENhcmRGb290ZXIgY2xhc3NOYW1lPVwicC0wXCI+XHJcbiAgICAgICAgICAgICAgICAgIDxTb2xkTW9kYWwgXHJcbiAgICAgICAgICAgICAgICAgICAgbmZ0QWRkcmVzcz17bmZ0QWRkcmVzc31cclxuICAgICAgICAgICAgICAgICAgICB0b2tlbklkPXt0b2tlbklkfVxyXG4gICAgICAgICAgICAgICAgICAgIGFzc2V0UHJpY2U9e2Fzc2V0UHJpY2V9XHJcbiAgICAgICAgICAgICAgICAgICAgZXhwaXJlc0F0PXtleHBpcmVzQXR9IFxyXG4gICAgICAgICAgICAgICAgICAgIHByb3BzPXtwcm9wc30gXHJcbiAgICAgICAgICAgICAgICAgICAgdXNlck1hbmFCYWxhbmNlPXt1c2VyTWFuYUJhbGFuY2V9XHJcbiAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICA8L0NhcmRGb290ZXI+IFxyXG4gICAgICAgICAgICAgIDwvPlxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICAgIGNhc2UgJzcnOlxyXG4gICAgICAgICAgICAgIHJldHVybiAgKFxyXG4gICAgICAgICAgICAgICAgPD5cclxuICAgICAgICAgICAgICAgICAgPENhcmRGb290ZXIgY2xhc3NOYW1lPVwicC0wXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPFBhaWRPdXRNb2RhbFxyXG4gICAgICAgICAgICAgICAgICAgICAgbmZ0QWRkcmVzcz17bmZ0QWRkcmVzc31cclxuICAgICAgICAgICAgICAgICAgICAgIHRva2VuSWQ9e3Rva2VuSWR9XHJcbiAgICAgICAgICAgICAgICAgICAgICBhc3NldFByaWNlPXthc3NldFByaWNlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgZXhwaXJlc0F0PXtleHBpcmVzQXR9IFxyXG4gICAgICAgICAgICAgICAgICAgICAgcHJvcHM9e3Byb3BzfSBcclxuICAgICAgICAgICAgICAgICAgICAgIHVzZXJNYW5hQmFsYW5jZT17dXNlck1hbmFCYWxhbmNlfVxyXG4gICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgIDwvQ2FyZEZvb3Rlcj4gXHJcbiAgICAgICAgICAgICAgICA8Lz5cclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICBjYXNlIG51bGwgJiYgYFwiJHtvcmRlcklkfVwiYCA9PSBgXCIke3N0b3JlZE9yZGVySWR9XCJgOlxyXG4gICAgICAgICAgICAgIHJldHVybiAgKFxyXG4gICAgICAgICAgICAgICAgPD5cclxuICAgICAgICAgICAgICAgICAgPENhcmRGb290ZXIgY2xhc3NOYW1lPVwicC0wXCI+XHJcbiAgICAgICAgICAgICAgICAgIG51bGw6e3N0b3JlZE9yZGVySWR9XHJcbiAgICAgICAgICAgICAgICAgICAgPE5vbWluYXRpb25Nb2RhbFxyXG4gICAgICAgICAgICAgICAgICAgICAgbmZ0QWRkcmVzcz17bmZ0QWRkcmVzc31cclxuICAgICAgICAgICAgICAgICAgICAgIHRva2VuSWQ9e3Rva2VuSWR9XHJcbiAgICAgICAgICAgICAgICAgICAgICBhc3NldFByaWNlPXthc3NldFByaWNlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgZXhwaXJlc0F0PXtleHBpcmVzQXR9IFxyXG4gICAgICAgICAgICAgICAgICAgICAgcHJvcHM9e3Byb3BzfSBcclxuICAgICAgICAgICAgICAgICAgICAgIG9yZGVySWQ9e29yZGVySWR9XHJcbiAgICAgICAgICAgICAgICAgICAgICB1c2VyTWFuYUJhbGFuY2U9e3VzZXJNYW5hQmFsYW5jZX1cclxuICAgICAgICAgICAgICAgICAgICAgIG9yZGVyU3RhdHVzPXtvcmRlclN0YXR1c31cclxuICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICA8L0NhcmRGb290ZXI+IFxyXG4gICAgICAgICAgICAgICAgPC8+XHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgIGNhc2UgJ2Vycm9yJzpcclxuICAgICAgICAgICAgcmV0dXJuJ2Vycm9yJ1xyXG4gICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICA8Q2FyZEZvb3RlciBjbGFzc05hbWU9XCJwLTBcIj5cclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6e3N0b3JlZE9yZGVySWR9XHJcbiAgICAgICAgICAgICAgICA8Tm9taW5hdGlvbk1vZGFsXHJcbiAgICAgICAgICAgICAgICAgIG5mdEFkZHJlc3M9e25mdEFkZHJlc3N9XHJcbiAgICAgICAgICAgICAgICAgIHRva2VuSWQ9e3Rva2VuSWR9XHJcbiAgICAgICAgICAgICAgICAgIGFzc2V0UHJpY2U9e2Fzc2V0UHJpY2V9XHJcbiAgICAgICAgICAgICAgICAgIGV4cGlyZXNBdD17ZXhwaXJlc0F0fSBcclxuICAgICAgICAgICAgICAgICAgcHJvcHM9e3Byb3BzfSBcclxuICAgICAgICAgICAgICAgICAgb3JkZXJJZD17b3JkZXJJZH1cclxuICAgICAgICAgICAgICAgICAgdXNlck1hbmFCYWxhbmNlPXt1c2VyTWFuYUJhbGFuY2V9XHJcbiAgICAgICAgICAgICAgICAgIG9yZGVyU3RhdHVzPXtvcmRlclN0YXR1c31cclxuICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgPC9DYXJkRm9vdGVyPiBcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgKSgpfVxyXG4gICAgPC8+XHJcbiAgICApXHJcbiAgfVxyXG5cclxuY29uc3QgTm9taW5hdGlvbnMgPSAgKHsgb3JkZXJzLCBsb2FkaW5nLCBwcm9wcywgdXNlck1hbmFCYWxhbmNlLCBnZXRTb2xkU3RhdHVzLCBnZXRPcmRlcklkLCBzdG9yZWRPcmRlcklkIH0pID0+IHtcclxuICBcclxuICBpZiAobG9hZGluZykge1xyXG4gICAgcmV0dXJuIDxMb2FkZXIgY2xhc3NOYW1lPVwibXQtMiBteC1hdXRvXCIgc2l6ZT1cIjMwcHhcIiBjb2xvcj1cImJsdWVcIiAvPlxyXG4gIH1cclxuICByZXR1cm4gKCAgXHJcbiAgICA8Um93IGNsYXNzTmFtZT1cIm10LTRcIj5cclxuICAgICAge29yZGVycy5tYXAocGFyY2VsID0+IChcclxuICAgICAgICAgIDxkaXYga2V5PXtwYXJjZWwubmZ0LmFjdGl2ZU9yZGVyLnR4SGFzaH0gY2xhc3NOYW1lPVwibWItNCBjb2wtc20tMTIgY29sLW1kLTEyIGNvbC1sZy00XCI+XHJcbiAgICAgICAgICAgIDxDYXJkPlxyXG4gICAgICAgICAgICAgIDxDYXJkSGVhZGVyIGNsYXNzTmFtZT1cImFzc2V0LWhlYWRlciBwLTIgY2FyZC10aXRsZSB0ZXh0LWNlbnRlclwiPkRlY2VudHJhbGFuZDwvQ2FyZEhlYWRlcj5cclxuICAgICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICAgICAgPENhcmRUaXRsZSBjbGFzc05hbWU9XCJhc3NldC10aXRsZSB0ZXh0LWNlbnRlclwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY3VycmVudC1wcmljZVwiPlByaWNlOiZuYnNwO3tXZWIzLnV0aWxzLmZyb21XZWkoYCR7cGFyY2VsLm5mdC5hY3RpdmVPcmRlci5wcmljZX1gLCdldGhlcicpfSBNQU5BPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgIDwvQ2FyZFRpdGxlPiAgIFxyXG4gICAgICAgICAgICAgICAgPC9kaXY+ICBcclxuICAgICAgICAgICAgICA8L2Rpdj4gIFxyXG4gICAgICAgICAgICAgIDxSb3cgY2xhc3NOYW1lPVwianVzdGlmeS1jb250ZW50LWNlbnRlclwiPlxyXG4gICAgICAgICAgICAgICAgPE5vbWluYXRpb25EZXRhaWxzTGluayB0b2tlbklkPXtwYXJjZWwubmZ0LnBhcmNlbC50b2tlbklkfSBkcml6emxlPXtwcm9wcy5kcml6emxlfSAvPlxyXG4gICAgICAgICAgICAgIDwvUm93PlxyXG4gICAgICAgICAgICAgIDxDYXJkQm9keSBjbGFzc05hbWU9XCJwYi0uNHJlbTtweC0yXCI+XHJcbiAgICAgICAgICAgICAgICA8Um93IGNsYXNzTmFtZT1cImFzc2V0LWltYWdlIGFsaWduLWl0ZW1zLWNlbnRlclwiPlxyXG4gICAgICAgICAgICAgICAgICA8aW1nIGNsYXNzTmFtZT1cIm14LWF1dG9cIiBzcmM9eydodHRwczovL2FwaS5kZWNlbnRyYWxhbmQub3JnL3YxL3BhcmNlbHMvJyArIHBhcmNlbC5uZnQucGFyY2VsLnggKyAnLycgKyBwYXJjZWwubmZ0LnBhcmNlbC55ICsgJy9tYXAucG5nP2hlaWdodD0yNjAmd2lkdGg9MjYwJnNpemU9MTInfSAvPlxyXG4gICAgICAgICAgICAgICAgPC9Sb3c+XHJcbiAgICAgICAgICAgICAgICA8Um93IGNsYXNzTmFtZT1cIm10LTIganVzdGlmeS1jb250ZW50LWNlbnRlclwiPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJteS0yIGFzc2V0LWNhcmQgdGV4dC1jZW50ZXIgY2FyZC10ZXh0XCI+UGFyY2VsOiZuYnNwO3twYXJjZWwubmZ0LnBhcmNlbC54fSx7cGFyY2VsLm5mdC5wYXJjZWwueX08L2Rpdj5cclxuICAgICAgICAgICAgICAgIDwvUm93PlxyXG4gICAgICAgICAgICAgICAgPFJvdyBjbGFzc05hbWU9XCJtdC0zIGp1c3RpZnktY29udGVudC1jZW50ZXJcIj5cclxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYi0yIGNvbC1zbSBhc3NldC1jYXJkIHRleHQtbGVmdCBjYXJkLXRleHRcIj5FbmQgRGF0ZTwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1iLTIgY29sLXNtIGFzc2V0LWNhcmQtdGltZSB0ZXh0LXJpZ2h0IGNhcmQtdGV4dFwiPlxyXG4gICAgICAgICAgICAgICAgICAgIHsodHlwZW9mKE51bWJlcihwYXJjZWwubmZ0LmFjdGl2ZU9yZGVyLmV4cGlyZXNBdCkpID09ICdudW1iZXInKT9cclxuICAgICAgICAgICAgICAgICAgICAgIDxNb21lbnQgZm9ybWF0PVwiaDptbWEgTS9ERC9ZWVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7TnVtYmVyKHBhcmNlbC5uZnQuYWN0aXZlT3JkZXIuZXhwaXJlc0F0KX1cclxuICAgICAgICAgICAgICAgICAgICAgIDwvTW9tZW50PiAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAnbm8gZW5kIGRhdGUnXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICA8L2Rpdj4gXHJcbiAgICAgICAgICAgICAgICA8L1Jvdz4gIFxyXG4gICAgICAgICAgICAgIDwvQ2FyZEJvZHk+ICAgXHJcbiAgICAgICAgICAgICAgPENhcmRGb290ZXJCdXR0b24gXHJcbiAgICAgICAgICAgICAgICAgdG9rZW5JZD17cGFyY2VsLm5mdC5wYXJjZWwudG9rZW5JZH0gXHJcbiAgICAgICAgICAgICAgICAgYXNzZXRQcmljZT17cGFyY2VsLm5mdC5hY3RpdmVPcmRlci5wcmljZX0gXHJcbiAgICAgICAgICAgICAgICAgZXhwaXJlc0F0PXtwYXJjZWwubmZ0LmFjdGl2ZU9yZGVyLmV4cGlyZXNBdH0gXHJcbiAgICAgICAgICAgICAgICAgbmZ0QWRkcmVzcz17cGFyY2VsLm5mdC5hY3RpdmVPcmRlci5uZnRBZGRyZXNzfSBcclxuICAgICAgICAgICAgICAgICBvcmRlcklkPXtwYXJjZWwubmZ0LmFjdGl2ZU9yZGVyLmlkfSBcclxuICAgICAgICAgICAgICAgICBvcmRlclN0YXR1cz17cGFyY2VsLnN0YXR1c31cclxuICAgICAgICAgICAgICAgICBwcm9wcz17cHJvcHN9IFxyXG4gICAgICAgICAgICAgICAgIHN0b3JlZE9yZGVySWQ9e3N0b3JlZE9yZGVySWR9XHJcbiAgICAgICAgICAgICAgICAgdXNlck1hbmFCYWxhbmNlPXt1c2VyTWFuYUJhbGFuY2V9XHJcbiAgICAgICAgICAgICAgICAgZ2V0U29sZFN0YXR1cz17Z2V0U29sZFN0YXR1c31cclxuICAgICAgICAgICAgICAgICBnZXRPcmRlcklkPXtnZXRPcmRlcklkfVxyXG4gICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgIDwvQ2FyZD4gIFxyXG4gICAgICAgICAgPHN0eWxlIGpzeD4ge2AgXHJcbiAgICAgICAgICAgIC5tb2RhbC1jb250ZW50e2JvcmRlci10b3A6MnB4IHNvbGlkICNiZmZ9XHJcbiAgICAgICAgICAgIC5hc3NldC1jYXJke2ZvbnQtd2VpZ2h0OjQwMDtjb2xvcjpibGFjaztmb250LXNpemU6LjlyZW07Zm9udC1mYW1pbHk6IFBvcHBpbnM7fVxyXG4gICAgICAgICAgICAuY2FyZC1mb290ZXItYnRue2ZvbnQtZmFtaWx5OiBQb3BwaW5zO2ZvbnQtd2VpZ2h0OjQwMDtjb2xvcjojMDAwO2ZvbnQtc2l6ZToxcmVtO1xyXG4gICAgICAgICAgICBsZXR0ZXItc3BhY2luZzouM3JlbTtib3JkZXItcmFkaXVzOi4wMXJlbSAuMDFyZW0gLjJyZW0gLjJyZW07fVxyXG4gICAgICAgICAgICAuY2FyZC1mb290ZXItYnRuOmhvdmVye2JhY2tncm91bmQ6IzAwN2JmZjtjb2xvcjp3aGl0ZTt9XHJcbiAgICAgICAgICAgIC5hc3NldC10b3RhbC1mdW5ke2ZvbnQtd2VpZ2h0OjIwMDtmb250LXNpemU6LjlyZW07bGV0dGVyLXNwYWNpbmc6LjJyZW07Y29sb3I6IzAwMDt9XHJcbiAgICAgICAgICAgIC5hc3NldC1jYXJkLW51bWJlcnN7Zm9udC1zaXplOjFyZW07bGV0dGVyLXNwYWNpbmc6LjJyZW07Y29sb3I6IzAwN2JmZjtob3ZlcjpibGFjazt9XHJcbiAgICAgICAgICAgIC5hc3NldC1jYXJkLXRpbWV7Zm9udC13ZWlnaHQ6NDAwO2NvbG9yOiNmZjgwODA7Zm9udC1zaXplOi45cmVtO2ZvbnQtZmFtaWx5OlBvcHBpbnM7fVxyXG4gICAgICAgICAgICAuY3VycmVudC1wcmljZXtmb250LXNpemU6LjlyZW07bGV0dGVyLXNwYWNpbmc6LjFyZW07Zm9udC13ZWlnaHQ6NDAwO31cclxuICAgICAgICAgICAgYH0gICAgXHJcbiAgICAgICAgICA8L3N0eWxlPlxyXG4gICAgICAgIDwvZGl2PiAgIFxyXG4gICAgICApKX1cclxuICAgIDwvUm93PiBcclxuICApO1xyXG59O1xyXG5cclxuY29uc3QgbWFwU3RhdGVUb1Byb3BzID0gKHN0YXRlKSA9PiAoe1xyXG4gIHN0b3JlZE9yZGVySWQ6IHN0YXRlLmFwcFJlZHVjZXJzLnN0b3JlZE9yZGVySWQgXHJcbn0pXHJcblxyXG5jb25zdCBtYXBEaXNwYXRjaFRvUHJvcHMgPSAoZGlzcGF0Y2gpID0+ICh7XHJcbiAgZ2V0U29sZFN0YXR1czogKHByb3Bvc2FsQmFsYW5jZSwgc29sZFN0YXR1cykgPT4gIGRpc3BhdGNoKHsgdHlwZTogXCJHT1RfU09MRF9TVEFUVVNcIiwgc3RhdHVzOiBzb2xkU3RhdHVzLCBwcm9wb3NhbEJhbGFuY2U6IHByb3Bvc2FsQmFsYW5jZSB9KSxcclxuICBnZXRPcmRlcklkOiAoc3RvcmVkT3JkZXJJZCkgPT4gIGRpc3BhdGNoKHsgdHlwZTogXCJHT1RfU1RPUkVEX09SREVSX0lEXCIsIHN0b3JlZE9yZGVySWQ6IHN0b3JlZE9yZGVySWQgfSlcclxufSk7XHJcbiAgXHJcbiAgXHJcbmV4cG9ydCBkZWZhdWx0IGNvbm5lY3QobWFwU3RhdGVUb1Byb3BzLCBtYXBEaXNwYXRjaFRvUHJvcHMpKE5vbWluYXRpb25zKTsiXX0= */\\n/*@ sourceURL=C:\\\\\\\\Users\\\\\\\\Samsung\\\\\\\\code\\\\\\\\cacp\\\\\\\\client\\\\\\\\components\\\\\\\\Nominations.js */\"))));\n};\n\nconst mapStateToProps = state => ({\n  storedOrderId: state.appReducers.storedOrderId\n});\n\nconst mapDispatchToProps = dispatch => ({\n  getSoldStatus: (proposalBalance, soldStatus) => dispatch({\n    type: \"GOT_SOLD_STATUS\",\n    status: soldStatus,\n    proposalBalance: proposalBalance\n  }),\n  getOrderId: storedOrderId => dispatch({\n    type: \"GOT_STORED_ORDER_ID\",\n    storedOrderId: storedOrderId\n  })\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Nominations);","map":{"version":3,"sources":["C:/Users/Samsung/code/cacp/client/components/Nominations.js"],"names":["React","useState","useEffect","connect","Web3","Loader","Card","CardHeader","CardBody","CardFooter","CardTitle","Button","Row","NominationModal","FundingModal","SaleModal","SoldModal","PaidOutModal","PurchaseModal","NominationDetailsLink","Moment","CardFooterButton","props","userManaBalance","getSoldStatus","nftAddress","expiresAt","assetPrice","tokenId","orderId","getOrderId","orderStatus","storedOrderId","isStatus","setStatus","console","log","fetchProposals","drizzle","contracts","ProposalController","methods","deployedProposals","call","proposal","proposalTokenIdMap","proposalAddress","MANAToken","balanceOf","proposalBalance","getPropData","propData","status","soldStatus","Nominations","orders","loading","map","parcel","nft","activeOrder","txHash","utils","fromWei","price","x","y","Number","id","mapStateToProps","state","appReducers","mapDispatchToProps","dispatch","type"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport Web3 from \"web3\";\r\nimport { Loader } from 'rimble-ui';\r\nimport { Card, CardHeader, CardBody, CardFooter, CardTitle, Button, Row } from \"shards-react\";\r\nimport NominationModal from './modals/NominationModal';\r\nimport FundingModal from './modals/FundingModal.js';\r\nimport SaleModal from './modals/SaleModal.js';\r\nimport SoldModal from './modals/SoldModal.js';\r\nimport PaidOutModal from './modals/PaidOutModal.js';\r\nimport PurchaseModal from './modals/PurchaseModal.js';\r\nimport NominationDetailsLink from './NominationDetailsLink.js';\r\nimport Moment from \"react-moment\";\r\n\r\nconst CardFooterButton = ({ props, userManaBalance, getSoldStatus, nftAddress, expiresAt, assetPrice, tokenId, orderId, getOrderId, orderStatus, storedOrderId }) => {\r\n  const [isStatus, setStatus] = useState(null);\r\n  // const [isStoredOrderId, setStoredOrderId] = useState();\r\n  console.log(storedOrderId)\r\n  const fetchProposals = async () => {\r\n    const proposal = await props.drizzle.contracts.ProposalController.methods.deployedProposals(`${tokenId}`).call();\r\n    if(proposal){\r\n      const proposalAddress = await props.drizzle.contracts.ProposalController.methods.proposalTokenIdMap(`${tokenId}`).call();\r\n      const proposalBalance = await props.drizzle.contracts.MANAToken.methods.balanceOf(`${proposalAddress}`).call();\r\n      const propData = await props.drizzle.contracts.ProposalController.methods.getPropData(`${proposalAddress}`).call();\r\n      const status = propData[0];\r\n      getOrderId(propData[2]);\r\n      if(status === '4'){\r\n        if(proposalBalance > assetPrice){\r\n          const soldStatus = '6';\r\n          getSoldStatus(proposalBalance, soldStatus);\r\n          setStatus('6');\r\n        }\r\n          else{\r\n            setStatus(status);\r\n            getOrderId(orderId);\r\n          }\r\n      }\r\n        else {\r\n          setStatus(status);\r\n          getOrderId(orderId);\r\n        }\r\n      }\r\n      else{\r\n        setStatus(null)\r\n        getOrderId(orderId);\r\n      }\r\n    }\r\n\r\n    useEffect(() => {\r\n      fetchProposals();\r\n    }, [tokenId]);\r\n\r\n    return (\r\n        <>\r\n        {(() => {\r\n        switch (isStatus) {\r\n        //switch ('6') {\r\n          //0-FUNDING\r\n          case '0':\r\n            return (\r\n              <CardFooter className=\"p-0\">  \r\n                Funding:{storedOrderId}\r\n                <FundingModal \r\n                  nftAddress={nftAddress}\r\n                  tokenId={tokenId}\r\n                  assetPrice={assetPrice}\r\n                  expiresAt={expiresAt}  \r\n                  props={props} \r\n                  userManaBalance={userManaBalance}\r\n                />\r\n              </CardFooter> \r\n            )\r\n            // case '0'  && orderId === storedOrderId:\r\n            //   return  (\r\n            //     <>\r\n            //       <CardFooter className=\"p-0\"> \r\n            //       Nomination=0:{storedOrderId} \r\n            //         <NominationModal\r\n            //           nftAddress={nftAddress}\r\n            //           tokenId={tokenId}\r\n            //           assetPrice={assetPrice}\r\n            //           expiresAt={expiresAt} \r\n            //           props={props} \r\n            //           orderId={orderId}\r\n            //           userManaBalance={userManaBalance}\r\n            //           orderStatus={orderStatus}\r\n            //         />\r\n            //       </CardFooter> \r\n            //     </>\r\n            // )\r\n          //FUNDED\r\n          case '1':\r\n            return (\r\n              <CardFooter className=\"p-0\">\r\n                <PurchaseModal \r\n                  nftAddress={nftAddress}\r\n                  tokenId={tokenId}\r\n                  assetPrice={assetPrice}\r\n                  expiresAt={expiresAt} \r\n                  props={props} \r\n                  userManaBalance={userManaBalance}\r\n                />\r\n              </CardFooter> \r\n            )\r\n          //FOR_SALE\r\n          case '4':\r\n            return  (\r\n              <CardFooter className=\"p-0\">\r\n                <SaleModal \r\n                  nftAddress={nftAddress}\r\n                  tokenId={tokenId}\r\n                  assetPrice={assetPrice}\r\n                  expiresAt={expiresAt} \r\n                  props={props} \r\n                  userManaBalance={userManaBalance}\r\n                />\r\n              </CardFooter> \r\n            )\r\n        //PAYINGOUT\r\n          case '6':\r\n            return  (\r\n              <>\r\n                <CardFooter className=\"p-0\">\r\n                  <SoldModal \r\n                    nftAddress={nftAddress}\r\n                    tokenId={tokenId}\r\n                    assetPrice={assetPrice}\r\n                    expiresAt={expiresAt} \r\n                    props={props} \r\n                    userManaBalance={userManaBalance}\r\n                  />\r\n                </CardFooter> \r\n              </>\r\n            )\r\n            case '7':\r\n              return  (\r\n                <>\r\n                  <CardFooter className=\"p-0\">\r\n                    <PaidOutModal\r\n                      nftAddress={nftAddress}\r\n                      tokenId={tokenId}\r\n                      assetPrice={assetPrice}\r\n                      expiresAt={expiresAt} \r\n                      props={props} \r\n                      userManaBalance={userManaBalance}\r\n                    />\r\n                  </CardFooter> \r\n                </>\r\n            )\r\n            case null && `\"${orderId}\"` == `\"${storedOrderId}\"`:\r\n              return  (\r\n                <>\r\n                  <CardFooter className=\"p-0\">\r\n                  null:{storedOrderId}\r\n                    <NominationModal\r\n                      nftAddress={nftAddress}\r\n                      tokenId={tokenId}\r\n                      assetPrice={assetPrice}\r\n                      expiresAt={expiresAt} \r\n                      props={props} \r\n                      orderId={orderId}\r\n                      userManaBalance={userManaBalance}\r\n                      orderStatus={orderStatus}\r\n                    />\r\n                  </CardFooter> \r\n                </>\r\n            )\r\n          case 'error':\r\n            return'error'\r\n          default:\r\n            return (\r\n              <CardFooter className=\"p-0\">\r\n                default:{storedOrderId}\r\n                <NominationModal\r\n                  nftAddress={nftAddress}\r\n                  tokenId={tokenId}\r\n                  assetPrice={assetPrice}\r\n                  expiresAt={expiresAt} \r\n                  props={props} \r\n                  orderId={orderId}\r\n                  userManaBalance={userManaBalance}\r\n                  orderStatus={orderStatus}\r\n                />\r\n              </CardFooter> \r\n            );\r\n        }\r\n      }\r\n      )()}\r\n    </>\r\n    )\r\n  }\r\n\r\nconst Nominations =  ({ orders, loading, props, userManaBalance, getSoldStatus, getOrderId, storedOrderId }) => {\r\n  \r\n  if (loading) {\r\n    return <Loader className=\"mt-2 mx-auto\" size=\"30px\" color=\"blue\" />\r\n  }\r\n  return (  \r\n    <Row className=\"mt-4\">\r\n      {orders.map(parcel => (\r\n          <div key={parcel.nft.activeOrder.txHash} className=\"mb-4 col-sm-12 col-md-12 col-lg-4\">\r\n            <Card>\r\n              <CardHeader className=\"asset-header p-2 card-title text-center\">Decentraland</CardHeader>\r\n              <div>\r\n                <div>\r\n                  <CardTitle className=\"asset-title text-center\">\r\n                    <div className=\"current-price\">Price:&nbsp;{Web3.utils.fromWei(`${parcel.nft.activeOrder.price}`,'ether')} MANA</div>\r\n                  </CardTitle>   \r\n                </div>  \r\n              </div>  \r\n              <Row className=\"justify-content-center\">\r\n                <NominationDetailsLink tokenId={parcel.nft.parcel.tokenId} drizzle={props.drizzle} />\r\n              </Row>\r\n              <CardBody className=\"pb-.4rem;px-2\">\r\n                <Row className=\"asset-image align-items-center\">\r\n                  <img className=\"mx-auto\" src={'https://api.decentraland.org/v1/parcels/' + parcel.nft.parcel.x + '/' + parcel.nft.parcel.y + '/map.png?height=260&width=260&size=12'} />\r\n                </Row>\r\n                <Row className=\"mt-2 justify-content-center\">\r\n                <div className=\"my-2 asset-card text-center card-text\">Parcel:&nbsp;{parcel.nft.parcel.x},{parcel.nft.parcel.y}</div>\r\n                </Row>\r\n                <Row className=\"mt-3 justify-content-center\">\r\n                  <div className=\"mb-2 col-sm asset-card text-left card-text\">End Date</div>\r\n                  <div className=\"mb-2 col-sm asset-card-time text-right card-text\">\r\n                    {(typeof(Number(parcel.nft.activeOrder.expiresAt)) == 'number')?\r\n                      <Moment format=\"h:mma M/DD/YY\">\r\n                        {Number(parcel.nft.activeOrder.expiresAt)}\r\n                      </Moment>       \r\n                    :\r\n                      'no end date'\r\n                    }\r\n                  </div> \r\n                </Row>  \r\n              </CardBody>   \r\n              <CardFooterButton \r\n                 tokenId={parcel.nft.parcel.tokenId} \r\n                 assetPrice={parcel.nft.activeOrder.price} \r\n                 expiresAt={parcel.nft.activeOrder.expiresAt} \r\n                 nftAddress={parcel.nft.activeOrder.nftAddress} \r\n                 orderId={parcel.nft.activeOrder.id} \r\n                 orderStatus={parcel.status}\r\n                 props={props} \r\n                 storedOrderId={storedOrderId}\r\n                 userManaBalance={userManaBalance}\r\n                 getSoldStatus={getSoldStatus}\r\n                 getOrderId={getOrderId}\r\n              />\r\n            </Card>  \r\n          <style jsx> {` \r\n            .modal-content{border-top:2px solid #bff}\r\n            .asset-card{font-weight:400;color:black;font-size:.9rem;font-family: Poppins;}\r\n            .card-footer-btn{font-family: Poppins;font-weight:400;color:#000;font-size:1rem;\r\n            letter-spacing:.3rem;border-radius:.01rem .01rem .2rem .2rem;}\r\n            .card-footer-btn:hover{background:#007bff;color:white;}\r\n            .asset-total-fund{font-weight:200;font-size:.9rem;letter-spacing:.2rem;color:#000;}\r\n            .asset-card-numbers{font-size:1rem;letter-spacing:.2rem;color:#007bff;hover:black;}\r\n            .asset-card-time{font-weight:400;color:#ff8080;font-size:.9rem;font-family:Poppins;}\r\n            .current-price{font-size:.9rem;letter-spacing:.1rem;font-weight:400;}\r\n            `}    \r\n          </style>\r\n        </div>   \r\n      ))}\r\n    </Row> \r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  storedOrderId: state.appReducers.storedOrderId \r\n})\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  getSoldStatus: (proposalBalance, soldStatus) =>  dispatch({ type: \"GOT_SOLD_STATUS\", status: soldStatus, proposalBalance: proposalBalance }),\r\n  getOrderId: (storedOrderId) =>  dispatch({ type: \"GOT_STORED_ORDER_ID\", storedOrderId: storedOrderId })\r\n});\r\n  \r\n  \r\nexport default connect(mapStateToProps, mapDispatchToProps)(Nominations);"]},"metadata":{},"sourceType":"module"}