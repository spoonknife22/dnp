{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Samsung\\\\code\\\\cacp\\\\client\\\\components\\\\forms\\\\InnerPropForm.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nimport React, { useState, useEffect } from 'react';\nimport Modal from 'react-bootstrap/Modal';\nimport { connect } from 'react-redux';\nimport Form from 'react-bootstrap/Form';\nimport { Formik } from 'formik';\nimport * as Yup from 'yup';\nimport { Col, Button, Row } from \"shards-react\";\nimport { toast } from 'react-toastify';\nimport NominationButton from '../buttons/NominateButton';\nimport { Loader } from 'rimble-ui';\nimport InitialContributeModal from '../modals/InitialContibModal';\nimport Web3 from \"web3\";\nimport Accordion from 'react-bootstrap/Accordion';\n\nconst InnerPropForm = ({\n  drizzle,\n  drizzleState,\n  prevOrderStatus,\n  props,\n  propAddress,\n  tokenId,\n  assetPrice,\n  userManaBalance,\n  expiresAt,\n  orderId,\n  orderStatus,\n  storedOrderId\n}) => {\n  let web3 = new Web3(Web3.givenProvider);\n\n  const _useState = useState(null),\n        currentProp = _useState[0],\n        setCurrentProp = _useState[1];\n\n  const listPrice = web3.utils.fromWei(\"\".concat(assetPrice), 'ether'); //Test network address\n\n  const nftAddress = '0x804516C4c64E3D2a78ef5eAc0E6a57A0b6bB96B3';\n  useEffect(() => {\n    setCurrentProp(propAddress);\n  }, [propAddress]);\n\n  const nominateAsset = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(values) {\n      var salePrice, reSalePrice, account, memberBool, user, userId, contract;\n      return regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            salePrice = values.salePrice;\n            reSalePrice = web3.utils.toWei(\"\".concat(salePrice), 'ether');\n            account = drizzleState.accounts['0'];\n            _context.next = 5;\n            return drizzle.contracts.UserStorage.methods.addresses(account).call();\n\n          case 5:\n            memberBool = _context.sent;\n\n            if (!memberBool) {\n              _context.next = 23;\n              break;\n            }\n\n            _context.next = 9;\n            return drizzle.contracts.UserStorage.methods.profiles(account).call();\n\n          case 9:\n            user = _context.sent;\n            userId = user.userId;\n            _context.next = 13;\n            return drizzle.contracts.ProposalController;\n\n          case 13:\n            contract = _context.sent;\n            _context.prev = 14;\n            contract.methods[\"createProposal\"].cacheSend(orderId, userId, expiresAt, assetPrice, reSalePrice, tokenId, nftAddress);\n            _context.next = 21;\n            break;\n\n          case 18:\n            _context.prev = 18;\n            _context.t0 = _context[\"catch\"](14);\n            return _context.abrupt(\"return\", toast.error(\"Sorry, we couldn't create asset nomination: \".concat(_context.t0), {\n              position: toast.POSITION.TOP_RIGHT\n            }));\n\n          case 21:\n            _context.next = 24;\n            break;\n\n          case 23:\n            return _context.abrupt(\"return\", toast.warning(\"Join the Consortium and nominate this asset\", {\n              position: toast.POSITION.TOP_RIGHT\n            }));\n\n          case 24:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee, null, [[14, 18]]);\n    }));\n\n    return function nominateAsset(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  let yup = require('yup');\n\n  const schema = yup.object({\n    // text: yup.string()\n    // .max(100, 'To many characters')\n    // .required('Required'),\n    salePrice: yup.number().typeError(\"Must be a number\").moreThan(listPrice.toString(), 'Must be more than current price.').required('Required'),\n    termsOfService: yup.bool().oneOf([true], \"You must accept the terms and conditions\")\n  });\n\n  if (currentProp === null) {\n    return __jsx(\"div\", {\n      className: \"align-items-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 5\n      }\n    }, currentProp, \" InnerPropForm 65\", __jsx(Loader, {\n      className: \"mx-auto\",\n      color: \"#007bff\",\n      size: \"40px\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 7\n      }\n    }));\n  } //if(currentProp === '0x0000000000000000000000000000000000000000' || prevOrderStatus === 'cancelled' ) {\n\n\n  if (currentProp === '0x0000000000000000000000000000000000000000' && orderStatus != 'sold') {\n    return __jsx(React.Fragment, null, __jsx(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 7\n      }\n    }, __jsx(Accordion, {\n      defaultActiveKey: \"1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 7\n      }\n    }, __jsx(\"div\", {\n      className: \"pr-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 13\n      }\n    }, __jsx(Accordion.Toggle, {\n      as: Button,\n      size: \"md\",\n      variant: \"link\",\n      eventKey: \"0\",\n      outline: true,\n      theme: \"light\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 13\n      }\n    }, __jsx(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 13\n      }\n    }, \"DNAP Details\")), __jsx(Accordion.Collapse, {\n      eventKey: \"0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 15\n      }\n    }, __jsx(\"div\", {\n      className: \"mb-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 17\n      }\n    }, __jsx(\"small\", {\n      className: \"text-muted\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 19\n      }\n    }, \" In the 1st year the asset will go on sale at the resale price. In the 2nd year it will go on sale at the purchase price. If it is not sold by the In the 3rd year the asset will be awarded to an owner through a weighted random number generation.\")))))), __jsx(Formik, {\n      initialValues: {\n        salePrice: '',\n        termsOfService: false\n      },\n      validationSchema: schema,\n      onSubmit: (values, actions) => {\n        nominateAsset(values);\n        addReview(values);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 7\n      }\n    }, ({\n      handleSubmit,\n      handleChange,\n      handleBlur,\n      values,\n      touched,\n      errors\n    }) => __jsx(Form, {\n      noValidate: true,\n      onSubmit: handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 5\n      }\n    }, __jsx(Form.Row, {\n      className: \"mt-3 justify-content-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 7\n      }\n    }, __jsx(Form.Group, {\n      controlId: \"validationFormik02\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 11\n      }\n    }, __jsx(Form.Control, {\n      size: \"md\",\n      type: \"text\",\n      name: \"salePrice\",\n      placeholder: \"Resale Price\",\n      value: values.salePrice,\n      onChange: handleChange,\n      onBlur: handleBlur,\n      isInvalid: touched.salePrice && !!errors.salePrice,\n      isValid: values.salePrice,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 13\n      }\n    }), __jsx(Form.Control.Feedback, {\n      type: \"invalid\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 13\n      }\n    }, errors.salePrice))), __jsx(Form.Row, {\n      className: \"justify-content-center checkbox-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 11\n      }\n    }, __jsx(Form.Group, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 13\n      }\n    }, __jsx(Form.Check, {\n      required: true,\n      className: \"\",\n      name: \"termsOfService\",\n      label: \"Agree to terms and conditions\",\n      onChange: handleChange,\n      isInvalid: !!errors.termsOfService,\n      feedback: errors.termsOfService,\n      id: \"validationFormik0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 15\n      }\n    }))), __jsx(Modal.Footer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 11\n      }\n    }, __jsx(NominationButton, {\n      props: props,\n      tokenId: tokenId,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 13\n      }\n    })), __jsx(_JSXStyle, {\n      id: \"1535412493\",\n      __self: this\n    }, \".checkbox-text.jsx-1535412493{.8rem;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcU2Ftc3VuZ1xcY29kZVxcY2FjcFxcY2xpZW50XFxjb21wb25lbnRzXFxmb3Jtc1xcSW5uZXJQcm9wRm9ybS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFvSnlCLEFBRW9DLE1BQUMiLCJmaWxlIjoiQzpcXFVzZXJzXFxTYW1zdW5nXFxjb2RlXFxjYWNwXFxjbGllbnRcXGNvbXBvbmVudHNcXGZvcm1zXFxJbm5lclByb3BGb3JtLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCBNb2RhbCBmcm9tICdyZWFjdC1ib290c3RyYXAvTW9kYWwnO1xyXG5pbXBvcnQgeyBjb25uZWN0IH0gZnJvbSAncmVhY3QtcmVkdXgnO1xyXG5pbXBvcnQgRm9ybSBmcm9tICdyZWFjdC1ib290c3RyYXAvRm9ybSc7XHJcbmltcG9ydCB7Rm9ybWlrfSBmcm9tICdmb3JtaWsnO1xyXG5pbXBvcnQgICogYXMgWXVwIGZyb20gJ3l1cCc7XHJcbmltcG9ydCB7IENvbCwgQnV0dG9uLCBSb3cgfSBmcm9tIFwic2hhcmRzLXJlYWN0XCI7XHJcbmltcG9ydCB7IHRvYXN0IH0gZnJvbSAncmVhY3QtdG9hc3RpZnknO1xyXG5pbXBvcnQgTm9taW5hdGlvbkJ1dHRvbiBmcm9tICcuLi9idXR0b25zL05vbWluYXRlQnV0dG9uJztcclxuaW1wb3J0IHsgTG9hZGVyIH0gZnJvbSAncmltYmxlLXVpJztcclxuaW1wb3J0IEluaXRpYWxDb250cmlidXRlTW9kYWwgZnJvbSAnLi4vbW9kYWxzL0luaXRpYWxDb250aWJNb2RhbCc7XHJcbmltcG9ydCBXZWIzIGZyb20gXCJ3ZWIzXCI7XHJcbmltcG9ydCBBY2NvcmRpb24gZnJvbSAncmVhY3QtYm9vdHN0cmFwL0FjY29yZGlvbic7XHJcblxyXG4gIFxyXG5cclxuY29uc3QgSW5uZXJQcm9wRm9ybSA9ICh7IGRyaXp6bGUsIGRyaXp6bGVTdGF0ZSwgcHJldk9yZGVyU3RhdHVzLCBwcm9wcywgcHJvcEFkZHJlc3MsIHRva2VuSWQsIGFzc2V0UHJpY2UsIHVzZXJNYW5hQmFsYW5jZSwgZXhwaXJlc0F0LCBvcmRlcklkLCBvcmRlclN0YXR1cywgc3RvcmVkT3JkZXJJZCB9KSA9PiB7XHJcbiAgbGV0IHdlYjMgPSBuZXcgV2ViMyhXZWIzLmdpdmVuUHJvdmlkZXIpO1xyXG4gIGNvbnN0IFtjdXJyZW50UHJvcCwgc2V0Q3VycmVudFByb3BdID0gdXNlU3RhdGUobnVsbCk7XHJcbiAgY29uc3QgbGlzdFByaWNlID0gd2ViMy51dGlscy5mcm9tV2VpKGAke2Fzc2V0UHJpY2V9YCwnZXRoZXInKTtcclxuXHJcbiAgLy9UZXN0IG5ldHdvcmsgYWRkcmVzc1xyXG4gIGNvbnN0IG5mdEFkZHJlc3MgPSAnMHg4MDQ1MTZDNGM2NEUzRDJhNzhlZjVlQWMwRTZhNTdBMGI2YkI5NkIzJztcclxuICAgICAgICAgICBcclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgc2V0Q3VycmVudFByb3AocHJvcEFkZHJlc3MpO1xyXG4gIH0sIFtwcm9wQWRkcmVzc10pXHJcblxyXG4gIGNvbnN0IG5vbWluYXRlQXNzZXQgPSBhc3luYyAodmFsdWVzKSA9PiB7XHJcbiAgICBjb25zdCB7IHNhbGVQcmljZSB9ID0gdmFsdWVzO1xyXG5cclxuICAgIGNvbnN0IHJlU2FsZVByaWNlID0gd2ViMy51dGlscy50b1dlaShgJHtzYWxlUHJpY2V9YCwnZXRoZXInKTtcclxuICBcclxuICAgIGNvbnN0IGFjY291bnQgPSBkcml6emxlU3RhdGUuYWNjb3VudHNbJzAnXTtcclxuICAgIGNvbnN0IG1lbWJlckJvb2wgPSBhd2FpdCBkcml6emxlLmNvbnRyYWN0cy5Vc2VyU3RvcmFnZS5tZXRob2RzLmFkZHJlc3NlcyhhY2NvdW50KS5jYWxsKCk7XHJcbiAgIFxyXG4gICAgaWYobWVtYmVyQm9vbCkge1xyXG4gICAgICBjb25zdCB1c2VyID0gYXdhaXQgZHJpenpsZS5jb250cmFjdHMuVXNlclN0b3JhZ2UubWV0aG9kcy5wcm9maWxlcyhhY2NvdW50KS5jYWxsKCk7XHJcbiAgICAgIGNvbnN0IHsgdXNlcklkIH0gPSB1c2VyO1xyXG4gICAgICBjb25zdCBjb250cmFjdCA9IGF3YWl0IGRyaXp6bGUuY29udHJhY3RzLlByb3Bvc2FsQ29udHJvbGxlcjtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnRyYWN0Lm1ldGhvZHNbXCJjcmVhdGVQcm9wb3NhbFwiXS5jYWNoZVNlbmQob3JkZXJJZCwgdXNlcklkLCBleHBpcmVzQXQsIGFzc2V0UHJpY2UsIHJlU2FsZVByaWNlLCB0b2tlbklkLCBuZnRBZGRyZXNzICk7XHJcbiBcclxuICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgIHJldHVybiB0b2FzdC5lcnJvcihgU29ycnksIHdlIGNvdWxkbid0IGNyZWF0ZSBhc3NldCBub21pbmF0aW9uOiAke2Vycn1gLHsgcG9zaXRpb246IHRvYXN0LlBPU0lUSU9OLlRPUF9SSUdIVCB9KVxyXG4gICAgfVxyXG4gIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICByZXR1cm4gdG9hc3Qud2FybmluZyggYEpvaW4gdGhlIENvbnNvcnRpdW0gYW5kIG5vbWluYXRlIHRoaXMgYXNzZXRgLCB7IHBvc2l0aW9uOiB0b2FzdC5QT1NJVElPTi5UT1BfUklHSFQgfSk7XHJcbiAgfVxyXG59XHJcblxyXG5sZXQgeXVwID0gcmVxdWlyZSgneXVwJyk7XHJcbmNvbnN0IHNjaGVtYSA9IHl1cC5vYmplY3Qoe1xyXG4gIC8vIHRleHQ6IHl1cC5zdHJpbmcoKVxyXG4gIC8vIC5tYXgoMTAwLCAnVG8gbWFueSBjaGFyYWN0ZXJzJylcclxuICAvLyAucmVxdWlyZWQoJ1JlcXVpcmVkJyksXHJcbiAgc2FsZVByaWNlOiB5dXAubnVtYmVyKClcclxuICAudHlwZUVycm9yKFwiTXVzdCBiZSBhIG51bWJlclwiKVxyXG4gIC5tb3JlVGhhbihsaXN0UHJpY2UudG9TdHJpbmcoKSwgJ011c3QgYmUgbW9yZSB0aGFuIGN1cnJlbnQgcHJpY2UuJylcclxuICAucmVxdWlyZWQoJ1JlcXVpcmVkJyksXHJcbiAgdGVybXNPZlNlcnZpY2U6IHl1cC5ib29sKCkub25lT2YoW3RydWVdLCBcIllvdSBtdXN0IGFjY2VwdCB0aGUgdGVybXMgYW5kIGNvbmRpdGlvbnNcIilcclxufSk7XHJcblxyXG5pZihjdXJyZW50UHJvcCA9PT0gbnVsbCkge1xyXG4gIHJldHVybiAoXHJcbiAgICA8ZGl2IGNsYXNzTmFtZT1cImFsaWduLWl0ZW1zLWNlbnRlclwiPiAgIFxyXG4gICAgICB7Y3VycmVudFByb3B9IElubmVyUHJvcEZvcm0gNjUgIFxyXG4gICAgICA8TG9hZGVyIGNsYXNzTmFtZT1cIm14LWF1dG9cIiBjb2xvcj1cIiMwMDdiZmZcIiBzaXplPVwiNDBweFwiIC8+XHJcbiAgICA8L2Rpdj5cclxuICApXHJcbn1cclxuXHJcbi8vaWYoY3VycmVudFByb3AgPT09ICcweDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAnIHx8IHByZXZPcmRlclN0YXR1cyA9PT0gJ2NhbmNlbGxlZCcgKSB7XHJcbmlmKGN1cnJlbnRQcm9wID09PSAnMHgwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwJyAmJiBvcmRlclN0YXR1cyAhPSAnc29sZCcpIHtcclxuICByZXR1cm4gKCAgIFxyXG4gICAgPD5cclxuICAgICAgPFJvdz5cclxuICAgICAgPEFjY29yZGlvbiAgZGVmYXVsdEFjdGl2ZUtleT1cIjFcIj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwci0yXCI+XHJcbiAgICAgICAgICAgIDxBY2NvcmRpb24uVG9nZ2xlIGFzPXtCdXR0b259IHNpemU9XCJtZFwiIHZhcmlhbnQ9XCJsaW5rXCIgZXZlbnRLZXk9XCIwXCIgb3V0bGluZSB0aGVtZT1cImxpZ2h0XCI+XHJcbiAgICAgICAgICAgIDxkaXY+RE5BUCBEZXRhaWxzPC9kaXY+XHJcbiAgICAgICAgICAgIDwvQWNjb3JkaW9uLlRvZ2dsZT5cclxuICAgICAgICAgICAgICA8QWNjb3JkaW9uLkNvbGxhcHNlIGV2ZW50S2V5PVwiMFwiPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYi0xXCI+XHJcbiAgICAgICAgICAgICAgICAgIDxzbWFsbCBjbGFzc05hbWU9XCJ0ZXh0LW11dGVkXCI+IEluIHRoZSAxc3QgeWVhciB0aGUgYXNzZXQgd2lsbCBnbyBvbiBzYWxlIGF0IHRoZSByZXNhbGUgcHJpY2UuIEluIHRoZSAybmQgeWVhciBpdCB3aWxsIGdvIG9uIHNhbGUgYXQgdGhlIHB1cmNoYXNlIHByaWNlLiBJZiBpdCBpcyBub3Qgc29sZCBieSB0aGUgSW4gdGhlIDNyZCB5ZWFyIHRoZSBhc3NldCB3aWxsIGJlIGF3YXJkZWQgdG8gYW4gb3duZXIgdGhyb3VnaCBhIHdlaWdodGVkIHJhbmRvbSBudW1iZXIgZ2VuZXJhdGlvbi48L3NtYWxsPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgPC9BY2NvcmRpb24uQ29sbGFwc2U+XHJcbiAgICAgICAgICAgIDwvZGl2PiBcclxuICAgICAgICAgIDwvQWNjb3JkaW9uPlxyXG4gICAgICA8L1Jvdz5cclxuXHJcbiAgICAgIDxGb3JtaWtcclxuICAgICAgICBpbml0aWFsVmFsdWVzPXt7XHJcbiAgICAgICAgc2FsZVByaWNlOiAnJyxcclxuICAgICAgICB0ZXJtc09mU2VydmljZTpmYWxzZSxcclxuICAgICAgICB9fVxyXG4gICAgICAgIHZhbGlkYXRpb25TY2hlbWE9e3NjaGVtYX1cclxuICAgICAgICBvblN1Ym1pdD17KHZhbHVlcywgYWN0aW9ucykgPT4ge1xyXG4gICAgICAgIG5vbWluYXRlQXNzZXQodmFsdWVzKTtcclxuICAgICAgICBhZGRSZXZpZXcodmFsdWVzKTtcclxuICAgICAgICB9fVxyXG4gICAgICA+XHJcbiAgICAgICAgeyh7ICAgXHJcbiAgICAgICAgICBoYW5kbGVTdWJtaXQsXHJcbiAgICAgICAgICBoYW5kbGVDaGFuZ2UsXHJcbiAgICAgICAgICBoYW5kbGVCbHVyLFxyXG4gICAgICAgICAgdmFsdWVzLFxyXG4gICAgICAgICAgdG91Y2hlZCxcclxuICAgICAgICAgIGVycm9ycyxcclxuICAgICAgICB9KSA9PiAoXHJcbiAgICBcclxuICAgIDxGb3JtIG5vVmFsaWRhdGUgb25TdWJtaXQ9e2hhbmRsZVN1Ym1pdH0+XHJcbiAgICAgIDxGb3JtLlJvdyBjbGFzc05hbWU9XCJtdC0zIGp1c3RpZnktY29udGVudC1jZW50ZXJcIj5cclxuICAgICAgICAgIDxGb3JtLkdyb3VwIGNvbnRyb2xJZD1cInZhbGlkYXRpb25Gb3JtaWswMlwiPlxyXG4gICAgICAgICAgICA8Rm9ybS5Db250cm9sXHJcbiAgICAgICAgICAgICAgc2l6ZT1cIm1kXCJcclxuICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiIFxyXG4gICAgICAgICAgICAgIG5hbWU9XCJzYWxlUHJpY2VcIlxyXG4gICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiUmVzYWxlIFByaWNlXCJcclxuICAgICAgICAgICAgICB2YWx1ZT17dmFsdWVzLnNhbGVQcmljZX1cclxuICAgICAgICAgICAgICBvbkNoYW5nZT17aGFuZGxlQ2hhbmdlfVxyXG4gICAgICAgICAgICAgIG9uQmx1cj17aGFuZGxlQmx1cn1cclxuICAgICAgICAgICAgICBpc0ludmFsaWQ9e3RvdWNoZWQuc2FsZVByaWNlICYmICEhZXJyb3JzLnNhbGVQcmljZX1cclxuICAgICAgICAgICAgICBpc1ZhbGlkPXt2YWx1ZXMuc2FsZVByaWNlfVxyXG4gICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICA8Rm9ybS5Db250cm9sLkZlZWRiYWNrIHR5cGU9XCJpbnZhbGlkXCI+ICBcclxuICAgICAgICAgICAge2Vycm9ycy5zYWxlUHJpY2V9XHJcbiAgICAgICAgICAgIDwvRm9ybS5Db250cm9sLkZlZWRiYWNrPlxyXG4gICAgICAgICAgPC9Gb3JtLkdyb3VwPlxyXG4gICAgICAgICAgPC9Gb3JtLlJvdz5cclxuICAgICAgICAgIDxGb3JtLlJvdyBjbGFzc05hbWU9XCJqdXN0aWZ5LWNvbnRlbnQtY2VudGVyIGNoZWNrYm94LXRleHRcIj5cclxuICAgICAgICAgICAgPEZvcm0uR3JvdXA+XHJcbiAgICAgICAgICAgICAgPEZvcm0uQ2hlY2tcclxuICAgICAgICAgICAgICAgIHJlcXVpcmVkXHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJcIlxyXG4gICAgICAgICAgICAgICAgbmFtZT1cInRlcm1zT2ZTZXJ2aWNlXCJcclxuICAgICAgICAgICAgICAgIGxhYmVsPVwiQWdyZWUgdG8gdGVybXMgYW5kIGNvbmRpdGlvbnNcIlxyXG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9e2hhbmRsZUNoYW5nZX1cclxuICAgICAgICAgICAgICAgIGlzSW52YWxpZD17ISFlcnJvcnMudGVybXNPZlNlcnZpY2V9XHJcbiAgICAgICAgICAgICAgICBmZWVkYmFjaz17ZXJyb3JzLnRlcm1zT2ZTZXJ2aWNlfVxyXG4gICAgICAgICAgICAgICAgaWQ9XCJ2YWxpZGF0aW9uRm9ybWlrMFwiXHJcbiAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgPC9Gb3JtLkdyb3VwPlxyXG4gICAgICAgICAgPC9Gb3JtLlJvdz5cclxuICAgICAgICAgIDxNb2RhbC5Gb290ZXI+XHJcbiAgICAgICAgICAgIDxOb21pbmF0aW9uQnV0dG9uIHByb3BzPXtwcm9wc30gdG9rZW5JZD17dG9rZW5JZH0gLz5cclxuICAgICAgICAgIDwvTW9kYWwuRm9vdGVyPlxyXG4gICAgICAgICAgICA8c3R5bGUganN4PiB7YCBcclxuICAgICAgICAgICAgICAgIC5jaGVja2JveC10ZXh0ey44cmVtO31cclxuICAgICAgICAgICAgICBgfSAgXHJcbiAgICAgICAgICAgIDwvc3R5bGU+XHJcbiAgICAgICAgPC9Gb3JtPlxyXG4gICAgICAgICl9XHJcbiAgICAgIDwvRm9ybWlrPlxyXG4gICAgPC8+XHJcbiAgKTsgICBcclxufSAgICAgICAgXHJcbiBpZihjdXJyZW50UHJvcCAhPT0gJ3VuZGVmaW5lZCcpe1xyXG4gICAgcmV0dXJuIChcclxuICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgPEluaXRpYWxDb250cmlidXRlTW9kYWwgXHJcbiAgICAgICAgICAgIHByb3BBZGRyZXNzPXtjdXJyZW50UHJvcH0gXHJcbiAgICAgICAgICAgIHVzZXJNYW5hQmFsYW5jZT17dXNlck1hbmFCYWxhbmNlfVxyXG4gICAgICAgICAgICBhc3NldFByaWNlPXthc3NldFByaWNlfSBcclxuICAgICAgICAgICAgZHJpenpsZVN0YXRlPXtkcml6emxlU3RhdGV9IFxyXG4gICAgICAgICAgICBkcml6emxlPXtkcml6emxlfSBcclxuICAgICAgICAgICAgdG9rZW5JZD17dG9rZW5JZH0gXHJcbiAgICAgICAgICAgIGN1cnJlbnRFeHBpcmVzQXQ9e2V4cGlyZXNBdH1cclxuICAgICAgICAgICAgb3JkZXJTdGF0dXM9e29yZGVyU3RhdHVzfVxyXG4gICAgICAgICAgICBvcmRlcklkPXtvcmRlcklkfVxyXG4gICAgICAgICAgICBwcmV2T3JkZXJTdGF0dXM9e3ByZXZPcmRlclN0YXR1c31cclxuICAgICAgICAgICAgc3RvcmVkT3JkZXJJZD17c3RvcmVkT3JkZXJJZH1cclxuICAgICAgICAgIC8+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICApXHJcbiAgfVxyXG4gIGVsc2V7XHJcbiAgICByZXR1cm4oXHJcbiAgICAgIDxkaXY+SW5uZXJQcm9wRm9yIDE2NzwvZGl2PlxyXG4gICAgKVxyXG4gIH1cclxufSBcclxuXHJcbmNvbnN0IG1hcFN0YXRlVG9Qcm9wcyA9IChzdGF0ZSkgPT4gKHtcclxuICBwcm9wQWRkcmVzczogc3RhdGUuYXBwUmVkdWNlcnMucHJvcEFkZHJlc3NcclxufSlcclxuICAgICBcclxuZXhwb3J0IGRlZmF1bHQgY29ubmVjdChtYXBTdGF0ZVRvUHJvcHMsIG51bGwpKElubmVyUHJvcEZvcm0pOyJdfQ== */\\n/*@ sourceURL=C:\\\\\\\\Users\\\\\\\\Samsung\\\\\\\\code\\\\\\\\cacp\\\\\\\\client\\\\\\\\components\\\\\\\\forms\\\\\\\\InnerPropForm.js */\"))));\n  }\n\n  if (currentProp !== 'undefined') {\n    return __jsx(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 9\n      }\n    }, __jsx(InitialContributeModal, {\n      propAddress: currentProp,\n      userManaBalance: userManaBalance,\n      assetPrice: assetPrice,\n      drizzleState: drizzleState,\n      drizzle: drizzle,\n      tokenId: tokenId,\n      currentExpiresAt: expiresAt,\n      orderStatus: orderStatus,\n      orderId: orderId,\n      prevOrderStatus: prevOrderStatus,\n      storedOrderId: storedOrderId,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 11\n      }\n    }));\n  } else {\n    return __jsx(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 7\n      }\n    }, \"InnerPropFor 167\");\n  }\n};\n\nconst mapStateToProps = state => ({\n  propAddress: state.appReducers.propAddress\n});\n\nexport default connect(mapStateToProps, null)(InnerPropForm);","map":{"version":3,"sources":["C:/Users/Samsung/code/cacp/client/components/forms/InnerPropForm.js"],"names":["React","useState","useEffect","Modal","connect","Form","Formik","Yup","Col","Button","Row","toast","NominationButton","Loader","InitialContributeModal","Web3","Accordion","InnerPropForm","drizzle","drizzleState","prevOrderStatus","props","propAddress","tokenId","assetPrice","userManaBalance","expiresAt","orderId","orderStatus","storedOrderId","web3","givenProvider","currentProp","setCurrentProp","listPrice","utils","fromWei","nftAddress","nominateAsset","values","salePrice","reSalePrice","toWei","account","accounts","contracts","UserStorage","methods","addresses","call","memberBool","profiles","user","userId","ProposalController","contract","cacheSend","error","position","POSITION","TOP_RIGHT","warning","yup","require","schema","object","number","typeError","moreThan","toString","required","termsOfService","bool","oneOf","actions","addReview","handleSubmit","handleChange","handleBlur","touched","errors","mapStateToProps","state","appReducers"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport Modal from 'react-bootstrap/Modal';\r\nimport { connect } from 'react-redux';\r\nimport Form from 'react-bootstrap/Form';\r\nimport {Formik} from 'formik';\r\nimport  * as Yup from 'yup';\r\nimport { Col, Button, Row } from \"shards-react\";\r\nimport { toast } from 'react-toastify';\r\nimport NominationButton from '../buttons/NominateButton';\r\nimport { Loader } from 'rimble-ui';\r\nimport InitialContributeModal from '../modals/InitialContibModal';\r\nimport Web3 from \"web3\";\r\nimport Accordion from 'react-bootstrap/Accordion';\r\n\r\n  \r\n\r\nconst InnerPropForm = ({ drizzle, drizzleState, prevOrderStatus, props, propAddress, tokenId, assetPrice, userManaBalance, expiresAt, orderId, orderStatus, storedOrderId }) => {\r\n  let web3 = new Web3(Web3.givenProvider);\r\n  const [currentProp, setCurrentProp] = useState(null);\r\n  const listPrice = web3.utils.fromWei(`${assetPrice}`,'ether');\r\n\r\n  //Test network address\r\n  const nftAddress = '0x804516C4c64E3D2a78ef5eAc0E6a57A0b6bB96B3';\r\n           \r\n  useEffect(() => {\r\n    setCurrentProp(propAddress);\r\n  }, [propAddress])\r\n\r\n  const nominateAsset = async (values) => {\r\n    const { salePrice } = values;\r\n\r\n    const reSalePrice = web3.utils.toWei(`${salePrice}`,'ether');\r\n  \r\n    const account = drizzleState.accounts['0'];\r\n    const memberBool = await drizzle.contracts.UserStorage.methods.addresses(account).call();\r\n   \r\n    if(memberBool) {\r\n      const user = await drizzle.contracts.UserStorage.methods.profiles(account).call();\r\n      const { userId } = user;\r\n      const contract = await drizzle.contracts.ProposalController;\r\n    try {\r\n      contract.methods[\"createProposal\"].cacheSend(orderId, userId, expiresAt, assetPrice, reSalePrice, tokenId, nftAddress );\r\n \r\n    } catch (err) {\r\n        return toast.error(`Sorry, we couldn't create asset nomination: ${err}`,{ position: toast.POSITION.TOP_RIGHT })\r\n    }\r\n  }\r\n    else {\r\n      return toast.warning( `Join the Consortium and nominate this asset`, { position: toast.POSITION.TOP_RIGHT });\r\n  }\r\n}\r\n\r\nlet yup = require('yup');\r\nconst schema = yup.object({\r\n  // text: yup.string()\r\n  // .max(100, 'To many characters')\r\n  // .required('Required'),\r\n  salePrice: yup.number()\r\n  .typeError(\"Must be a number\")\r\n  .moreThan(listPrice.toString(), 'Must be more than current price.')\r\n  .required('Required'),\r\n  termsOfService: yup.bool().oneOf([true], \"You must accept the terms and conditions\")\r\n});\r\n\r\nif(currentProp === null) {\r\n  return (\r\n    <div className=\"align-items-center\">   \r\n      {currentProp} InnerPropForm 65  \r\n      <Loader className=\"mx-auto\" color=\"#007bff\" size=\"40px\" />\r\n    </div>\r\n  )\r\n}\r\n\r\n//if(currentProp === '0x0000000000000000000000000000000000000000' || prevOrderStatus === 'cancelled' ) {\r\nif(currentProp === '0x0000000000000000000000000000000000000000' && orderStatus != 'sold') {\r\n  return (   \r\n    <>\r\n      <Row>\r\n      <Accordion  defaultActiveKey=\"1\">\r\n            <div className=\"pr-2\">\r\n            <Accordion.Toggle as={Button} size=\"md\" variant=\"link\" eventKey=\"0\" outline theme=\"light\">\r\n            <div>DNAP Details</div>\r\n            </Accordion.Toggle>\r\n              <Accordion.Collapse eventKey=\"0\">\r\n                <div className=\"mb-1\">\r\n                  <small className=\"text-muted\"> In the 1st year the asset will go on sale at the resale price. In the 2nd year it will go on sale at the purchase price. If it is not sold by the In the 3rd year the asset will be awarded to an owner through a weighted random number generation.</small>\r\n                </div>\r\n              </Accordion.Collapse>\r\n            </div> \r\n          </Accordion>\r\n      </Row>\r\n\r\n      <Formik\r\n        initialValues={{\r\n        salePrice: '',\r\n        termsOfService:false,\r\n        }}\r\n        validationSchema={schema}\r\n        onSubmit={(values, actions) => {\r\n        nominateAsset(values);\r\n        addReview(values);\r\n        }}\r\n      >\r\n        {({   \r\n          handleSubmit,\r\n          handleChange,\r\n          handleBlur,\r\n          values,\r\n          touched,\r\n          errors,\r\n        }) => (\r\n    \r\n    <Form noValidate onSubmit={handleSubmit}>\r\n      <Form.Row className=\"mt-3 justify-content-center\">\r\n          <Form.Group controlId=\"validationFormik02\">\r\n            <Form.Control\r\n              size=\"md\"\r\n              type=\"text\" \r\n              name=\"salePrice\"\r\n              placeholder=\"Resale Price\"\r\n              value={values.salePrice}\r\n              onChange={handleChange}\r\n              onBlur={handleBlur}\r\n              isInvalid={touched.salePrice && !!errors.salePrice}\r\n              isValid={values.salePrice}\r\n            />\r\n            <Form.Control.Feedback type=\"invalid\">  \r\n            {errors.salePrice}\r\n            </Form.Control.Feedback>\r\n          </Form.Group>\r\n          </Form.Row>\r\n          <Form.Row className=\"justify-content-center checkbox-text\">\r\n            <Form.Group>\r\n              <Form.Check\r\n                required\r\n                className=\"\"\r\n                name=\"termsOfService\"\r\n                label=\"Agree to terms and conditions\"\r\n                onChange={handleChange}\r\n                isInvalid={!!errors.termsOfService}\r\n                feedback={errors.termsOfService}\r\n                id=\"validationFormik0\"\r\n              />\r\n            </Form.Group>\r\n          </Form.Row>\r\n          <Modal.Footer>\r\n            <NominationButton props={props} tokenId={tokenId} />\r\n          </Modal.Footer>\r\n            <style jsx> {` \r\n                .checkbox-text{.8rem;}\r\n              `}  \r\n            </style>\r\n        </Form>\r\n        )}\r\n      </Formik>\r\n    </>\r\n  );   \r\n}        \r\n if(currentProp !== 'undefined'){\r\n    return (\r\n        <div>\r\n          <InitialContributeModal \r\n            propAddress={currentProp} \r\n            userManaBalance={userManaBalance}\r\n            assetPrice={assetPrice} \r\n            drizzleState={drizzleState} \r\n            drizzle={drizzle} \r\n            tokenId={tokenId} \r\n            currentExpiresAt={expiresAt}\r\n            orderStatus={orderStatus}\r\n            orderId={orderId}\r\n            prevOrderStatus={prevOrderStatus}\r\n            storedOrderId={storedOrderId}\r\n          />\r\n        </div>\r\n    )\r\n  }\r\n  else{\r\n    return(\r\n      <div>InnerPropFor 167</div>\r\n    )\r\n  }\r\n} \r\n\r\nconst mapStateToProps = (state) => ({\r\n  propAddress: state.appReducers.propAddress\r\n})\r\n     \r\nexport default connect(mapStateToProps, null)(InnerPropForm);"]},"metadata":{},"sourceType":"module"}