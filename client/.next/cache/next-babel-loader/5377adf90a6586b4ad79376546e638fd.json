{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\Samsung\\\\code\\\\cacp\\\\client\\\\components\\\\modals\\\\AwardAssetModal.js\",\n    _s = $RefreshSig$();\n\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport Accordion from 'react-bootstrap/Accordion';\nimport { Col, Container, Button, Row, Form } from \"shards-react\";\nimport Web3 from \"web3\";\nimport ClaimBtn from \"../buttons/ClaimAssetBtn\"; //\n\nimport { newContextComponents } from \"@drizzle/react-components\";\nconst ContractForm = newContextComponents.ContractForm,\n      ContractData = newContextComponents.ContractData; //\n\nconst AwardAsset = ({\n  drizzle,\n  drizzleState,\n  propAddress,\n  proposalBalance,\n  tokenId,\n  prevOrderStatus\n}) => {\n  _s();\n\n  const account = drizzleState.accounts[0];\n\n  const _useState = useState([]),\n        deposits = _useState[0],\n        setDespositInfo = _useState[1];\n\n  const _useState2 = useState(null),\n        winner = _useState2[0],\n        setWinner = _useState2[1];\n\n  useEffect(() => {\n    fetchProposalInfo();\n  }, []);\n\n  const fetchProposalInfo = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var state, proposalContract, depositInfoLength, propData, convertedListPrice, i, depositerArray, depositer, depositAmount, depositerAmount, listPricePercent;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            state = drizzle.store.getState();\n\n            if (!state.drizzleStatus.initialized) {\n              _context.next = 28;\n              break;\n            }\n\n            _context.next = 4;\n            return drizzle.contracts[\"\".concat(propAddress)];\n\n          case 4:\n            proposalContract = _context.sent;\n            _context.next = 7;\n            return proposalContract.methods.countDepositers().call();\n\n          case 7:\n            depositInfoLength = _context.sent;\n            _context.next = 10;\n            return proposalContract.methods[\"proposals\"](\"\".concat(tokenId)).call();\n\n          case 10:\n            propData = _context.sent;\n            convertedListPrice = Web3.utils.fromWei(\"\".concat(propData.listPrice), 'ether');\n            depositerArray = [];\n            i = 0;\n\n          case 14:\n            if (!(i < depositInfoLength)) {\n              _context.next = 28;\n              break;\n            }\n\n            _context.next = 17;\n            return proposalContract.methods.depositersArray([i]).call();\n\n          case 17:\n            depositer = _context.sent;\n            _context.next = 20;\n            return proposalContract.methods.deposits(depositer).call();\n\n          case 20:\n            depositAmount = _context.sent;\n            depositerAmount = Web3.utils.fromWei(depositAmount, 'ether');\n            listPricePercent = (depositerAmount / convertedListPrice * 100).toFixed(0);\n            depositerArray.push([i, depositer, listPricePercent]);\n            setDespositInfo(depositerArray);\n\n          case 25:\n            i++;\n            _context.next = 14;\n            break;\n\n          case 28:\n            return _context.abrupt(\"return\", console.log('Loading....'));\n\n          case 29:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee);\n    }));\n\n    return function fetchProposalInfo() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  const getWinner = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var contract, winningOwner;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return drizzle.contracts[\"\".concat(propAddress)];\n\n          case 2:\n            contract = _context2.sent;\n            //const winningOwner = await contract.methods.winningContributor.cacheCall();\n            winningOwner = __jsx(ContractData, {\n              drizzle: drizzle,\n              drizzleState: drizzleState,\n              contract: propAddress,\n              method: \"winningContributor\",\n              render: data => data,\n              __self: _this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 47,\n                columnNumber: 23\n              }\n            }); //can add if statement here \n\n            console.log(winningOwner);\n            setWinner(winningOwner);\n\n          case 6:\n          case \"end\":\n            return _context2.stop();\n        }\n      }, _callee2);\n    }));\n\n    return function getWinner() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  const select = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      var account, contract;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.next = 2;\n            return drizzleState.accounts[0];\n\n          case 2:\n            account = _context3.sent;\n            _context3.next = 5;\n            return drizzle.contracts[\"\".concat(propAddress)];\n\n          case 5:\n            contract = _context3.sent;\n\n            try {\n              contract.methods[\"weightContributors\"].cacheSend({\n                from: \"\".concat(account),\n                gas: 3000000\n              });\n              getWinner();\n            } catch (err) {\n              console.error(\"Err:\", err);\n            }\n\n          case 7:\n          case \"end\":\n            return _context3.stop();\n        }\n      }, _callee3);\n    }));\n\n    return function select() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(React.Fragment, null, winner != 'null' ? __jsx(\"div\", {\n    className: \"jsx-3650992039\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }\n  }, __jsx(\"div\", {\n    className: \"jsx-3650992039\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }\n  }, __jsx(Container, {\n    className: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 11\n    }\n  }, __jsx(\"h5\", {\n    className: \"jsx-3650992039\" + \" \" + \"text-center mb-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }\n  }, \"Owners\"), __jsx(ContractData, {\n    drizzle: drizzle,\n    drizzleState: drizzleState,\n    contract: propAddress,\n    method: \"winningContributor\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }\n  }), __jsx(\"div\", {\n    className: \"jsx-3650992039\" + \" \" + \"funds-info-container border border-secondary rounded px-3 my-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }\n  }, __jsx(Row, {\n    className: \"card-text justify-content-center mt-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }\n  }, deposits.map(deposit => __jsx(\"div\", {\n    key: deposit[0],\n    className: \"jsx-3650992039\" + \" \" + \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 17\n    }\n  }, __jsx(Container, {\n    className: \"mt-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 19\n    }\n  }, __jsx(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 21\n    }\n  }, \" \", console.log(winner), __jsx(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 23\n    }\n  }, __jsx(\"p\", {\n    className: \"jsx-3650992039\" + \" \" + \"addresses-text mb-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 25\n    }\n  }, deposit[1]), __jsx(\"p\", {\n    className: \"jsx-3650992039\" + \" \" + \"probability-text text-center mb-1 border-top border-primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 25\n    }\n  }, \"Probability:\\xA0\", __jsx(\"span\", {\n    className: \"jsx-3650992039\" + \" \" + \"probability-percent\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 45\n    }\n  }, \"\\xA0\", deposit[2], \"%\"))))))))))), __jsx(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 9\n    }\n  }, __jsx(Row, {\n    className: \" mt-2 mb-1 justify-content-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 11\n    }\n  }, __jsx(Form, {\n    onSubmit: select,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 13\n    }\n  }, __jsx(Button, {\n    size: \"md\",\n    theme: \"dark\",\n    className: \"mt-2 mx-auto\",\n    key: \"submit\",\n    type: \"button\",\n    onClick: select,\n    style: {\n      fontSize: 14\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 15\n    }\n  }, \"Award DNA\")))), __jsx(_JSXStyle, {\n    id: \"3650992039\",\n    __self: this\n  }, \".addresses-text.jsx-3650992039{font-size:.9rem;font-weight:300;}.funds-info-container.jsx-3650992039{background-color:#ecf2f9;}.card-text.jsx-3650992039{font-family:Poppins;font-size:1rem;}.probability-percent.jsx-3650992039{font-size:.9rem;color:#007bff;}.probability-text.jsx-3650992039{font-size:.9rem;color:#000;font-weight:300;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcU2Ftc3VuZ1xcY29kZVxcY2FjcFxcY2xpZW50XFxjb21wb25lbnRzXFxtb2RhbHNcXEF3YXJkQXNzZXRNb2RhbC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFrSGEsQUFFNkMsQUFDZSxBQUNoQixBQUNNLEFBQ0gsZ0JBSmEsQUFHRyxBQUNOLElBRkMsS0FERyxFQUdXLEdBRFIsRUFISCxHQUVGLFFBRWMiLCJmaWxlIjoiQzpcXFVzZXJzXFxTYW1zdW5nXFxjb2RlXFxjYWNwXFxjbGllbnRcXGNvbXBvbmVudHNcXG1vZGFsc1xcQXdhcmRBc3NldE1vZGFsLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IGNvbm5lY3QgfSBmcm9tICdyZWFjdC1yZWR1eCc7XHJcbmltcG9ydCBBY2NvcmRpb24gZnJvbSAncmVhY3QtYm9vdHN0cmFwL0FjY29yZGlvbic7XHJcbmltcG9ydCB7IENvbCwgQ29udGFpbmVyLCBCdXR0b24sIFJvdywgRm9ybSB9IGZyb20gXCJzaGFyZHMtcmVhY3RcIjtcclxuaW1wb3J0IFdlYjMgZnJvbSBcIndlYjNcIjtcclxuaW1wb3J0IENsYWltQnRuIGZyb20gXCIuLi9idXR0b25zL0NsYWltQXNzZXRCdG5cIjtcclxuXHJcbi8vXHJcbmltcG9ydCB7IG5ld0NvbnRleHRDb21wb25lbnRzIH0gZnJvbSBcIkBkcml6emxlL3JlYWN0LWNvbXBvbmVudHNcIjtcclxuY29uc3QgeyBDb250cmFjdEZvcm0sIENvbnRyYWN0RGF0YSB9ID0gbmV3Q29udGV4dENvbXBvbmVudHM7XHJcbi8vXHJcblxyXG5jb25zdCBBd2FyZEFzc2V0ID0gICh7IGRyaXp6bGUsIGRyaXp6bGVTdGF0ZSwgcHJvcEFkZHJlc3MsIHByb3Bvc2FsQmFsYW5jZSwgdG9rZW5JZCwgcHJldk9yZGVyU3RhdHVzIH0pID0+IHsgXHJcbiAgY29uc3QgYWNjb3VudCA9IGRyaXp6bGVTdGF0ZS5hY2NvdW50c1swXTtcclxuICBjb25zdCBbZGVwb3NpdHMsIHNldERlc3Bvc2l0SW5mb10gPSB1c2VTdGF0ZShbXSk7XHJcbiAgY29uc3QgW3dpbm5lciwgc2V0V2lubmVyXSA9IHVzZVN0YXRlKG51bGwpO1xyXG5cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgZmV0Y2hQcm9wb3NhbEluZm8oKTtcclxuICB9LCBbXSlcclxuXHJcbiAgY29uc3QgZmV0Y2hQcm9wb3NhbEluZm8gPSBhc3luYyAoKSA9PiB7IFxyXG4gICAgICBsZXQgc3RhdGUgPSBkcml6emxlLnN0b3JlLmdldFN0YXRlKClcclxuICAgICAgaWYoc3RhdGUuZHJpenpsZVN0YXR1cy5pbml0aWFsaXplZCl7XHJcbiAgICAgIGNvbnN0IHByb3Bvc2FsQ29udHJhY3QgPSBhd2FpdCBkcml6emxlLmNvbnRyYWN0c1tgJHtwcm9wQWRkcmVzc31gXTtcclxuICAgICAgY29uc3QgZGVwb3NpdEluZm9MZW5ndGggPSBhd2FpdCBwcm9wb3NhbENvbnRyYWN0Lm1ldGhvZHMuY291bnREZXBvc2l0ZXJzKCkuY2FsbCgpO1xyXG4gICAgICBjb25zdCBwcm9wRGF0YSA9IGF3YWl0IHByb3Bvc2FsQ29udHJhY3QubWV0aG9kc1tcInByb3Bvc2Fsc1wiXShgJHt0b2tlbklkfWApLmNhbGwoKTtcclxuICAgICAgY29uc3QgY29udmVydGVkTGlzdFByaWNlPSBXZWIzLnV0aWxzLmZyb21XZWkoYCR7cHJvcERhdGEubGlzdFByaWNlfWAsJ2V0aGVyJyk7XHJcblxyXG4gICAgICBsZXQgaTtcclxuICAgICAgbGV0IGRlcG9zaXRlckFycmF5ID0gW107XHJcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGRlcG9zaXRJbmZvTGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgIGNvbnN0IGRlcG9zaXRlciA9IGF3YWl0IHByb3Bvc2FsQ29udHJhY3QubWV0aG9kcy5kZXBvc2l0ZXJzQXJyYXkoW2ldKS5jYWxsKCk7XHJcbiAgICAgICAgICBjb25zdCBkZXBvc2l0QW1vdW50ID0gYXdhaXQgcHJvcG9zYWxDb250cmFjdC5tZXRob2RzLmRlcG9zaXRzKGRlcG9zaXRlcikuY2FsbCgpO1xyXG4gICAgICAgICAgbGV0IGRlcG9zaXRlckFtb3VudCA9IFdlYjMudXRpbHMuZnJvbVdlaShkZXBvc2l0QW1vdW50LCdldGhlcicpO1xyXG4gICAgICAgICAgbGV0IGxpc3RQcmljZVBlcmNlbnQgPSAoKGRlcG9zaXRlckFtb3VudCAvIGNvbnZlcnRlZExpc3RQcmljZSkgKiAxMDApLnRvRml4ZWQoMCk7XHJcbiAgICAgICAgICBkZXBvc2l0ZXJBcnJheS5wdXNoKFtpLCBkZXBvc2l0ZXIsIGxpc3RQcmljZVBlcmNlbnRdKTtcclxuICAgICAgICAgIHNldERlc3Bvc2l0SW5mbyhkZXBvc2l0ZXJBcnJheSk7XHJcbiAgICAgIH0gIFxyXG4gIH1cclxuICAgcmV0dXJuIGNvbnNvbGUubG9nKCdMb2FkaW5nLi4uLicpXHJcbiAgfTtcclxuXHJcbmNvbnN0IGdldFdpbm5lciA9IGFzeW5jICgpID0+IHtcclxuICBjb25zdCBjb250cmFjdCA9IGF3YWl0IGRyaXp6bGUuY29udHJhY3RzW2Ake3Byb3BBZGRyZXNzfWBdO1xyXG4gIC8vY29uc3Qgd2lubmluZ093bmVyID0gYXdhaXQgY29udHJhY3QubWV0aG9kcy53aW5uaW5nQ29udHJpYnV0b3IuY2FjaGVDYWxsKCk7XHJcbiAgY29uc3Qgd2lubmluZ093bmVyID08Q29udHJhY3REYXRhIGRyaXp6bGU9e2RyaXp6bGV9IGRyaXp6bGVTdGF0ZT17ZHJpenpsZVN0YXRlfSBjb250cmFjdD17cHJvcEFkZHJlc3N9IG1ldGhvZD1cIndpbm5pbmdDb250cmlidXRvclwiIFxyXG4gIHJlbmRlcj17ZGF0YSA9PiAoXHJcbiAgICBkYXRhXHJcbiApfVxyXG4vPlxyXG4gIC8vY2FuIGFkZCBpZiBzdGF0ZW1lbnQgaGVyZSBcclxuICBjb25zb2xlLmxvZyh3aW5uaW5nT3duZXIpXHJcbiAgc2V0V2lubmVyKHdpbm5pbmdPd25lcik7IFxyXG59ICBcclxuXHJcbmNvbnN0IHNlbGVjdCA9IGFzeW5jICgpID0+IHtcclxuICBjb25zdCBhY2NvdW50ID0gYXdhaXQgZHJpenpsZVN0YXRlLmFjY291bnRzWzBdO1xyXG4gIGNvbnN0IGNvbnRyYWN0ID0gYXdhaXQgZHJpenpsZS5jb250cmFjdHNbYCR7cHJvcEFkZHJlc3N9YF07XHJcbiAgdHJ5IHtcclxuICAgICAgY29udHJhY3QubWV0aG9kc1tcIndlaWdodENvbnRyaWJ1dG9yc1wiXS5jYWNoZVNlbmQoe2Zyb206YCR7YWNjb3VudH1gLCBnYXM6MzAwMDAwMH0pO1xyXG4gICAgICBnZXRXaW5uZXIoKTtcclxuICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyOlwiLCBlcnIpXHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgcmV0dXJuIChcclxuICAgIDw+XHJcbiAgICAgIHt3aW5uZXIgIT0gJ251bGwnID9cclxuICAgICAgPGRpdj5cclxuICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgPENvbnRhaW5lciBjbGFzc05hbWU9XCJcIj5cclxuICAgICAgICAgICAgPGg1IGNsYXNzTmFtZT1cInRleHQtY2VudGVyIG1iLTFcIj5cclxuICAgICAgICAgICAgICBPd25lcnNcclxuICAgICAgICAgICAgPC9oNT5cclxuICAgICAgICAgICAgPENvbnRyYWN0RGF0YSBkcml6emxlPXtkcml6emxlfSBkcml6emxlU3RhdGU9e2RyaXp6bGVTdGF0ZX0gY29udHJhY3Q9e3Byb3BBZGRyZXNzfSBtZXRob2Q9XCJ3aW5uaW5nQ29udHJpYnV0b3JcIiAvPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZ1bmRzLWluZm8tY29udGFpbmVyIGJvcmRlciBib3JkZXItc2Vjb25kYXJ5IHJvdW5kZWQgcHgtMyBteS0yXCI+XHJcbiAgICAgICAgICAgIDxSb3cgY2xhc3NOYW1lPVwiY2FyZC10ZXh0IGp1c3RpZnktY29udGVudC1jZW50ZXIgbXQtMVwiPiBcclxuICAgICAgICAgICAgICB7ZGVwb3NpdHMubWFwKGRlcG9zaXQgPT4gKFxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJcIiAga2V5PXtkZXBvc2l0WzBdfSA+XHJcbiAgICAgICAgICAgICAgICAgIDxDb250YWluZXIgY2xhc3NOYW1lPVwibXQtMVwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxSb3c+IHtjb25zb2xlLmxvZyh3aW5uZXIpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgPENvbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwiYWRkcmVzc2VzLXRleHQgbWItMVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkZXBvc2l0WzFdfSBcclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJwcm9iYWJpbGl0eS10ZXh0IHRleHQtY2VudGVyIG1iLTEgYm9yZGVyLXRvcCBib3JkZXItcHJpbWFyeVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFByb2JhYmlsaXR5OiZuYnNwOzxzcGFuIGNsYXNzTmFtZT1cInByb2JhYmlsaXR5LXBlcmNlbnRcIj4mbmJzcDt7ZGVwb3NpdFsyXX0lPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8L0NvbD5cclxuICAgICAgICAgICAgICAgICAgICA8L1Jvdz5cclxuICAgICAgICAgICAgICAgICAgPC9Db250YWluZXI+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICApKX1cclxuICAgICAgICAgICAgPC9Sb3c+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPC9Db250YWluZXI+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPENvbnRhaW5lcj5cclxuICAgICAgICAgIDxSb3cgY2xhc3NOYW1lPVwiIG10LTIgbWItMSBqdXN0aWZ5LWNvbnRlbnQtY2VudGVyXCI+XHJcbiAgICAgICAgICAgIDxGb3JtIG9uU3VibWl0PXtzZWxlY3R9PlxyXG4gICAgICAgICAgICAgIDxCdXR0b24gc2l6ZT1cIm1kXCIgdGhlbWU9XCJkYXJrXCIgY2xhc3NOYW1lPVwibXQtMiBteC1hdXRvXCJcclxuICAgICAgICAgICAgICAgIGtleT1cInN1Ym1pdFwiXHJcbiAgICAgICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcclxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3NlbGVjdH0gXHJcbiAgICAgICAgICAgICAgICBzdHlsZT17eyBmb250U2l6ZTogMTQgfX1cclxuICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICBBd2FyZCBETkFcclxuICAgICAgICAgICAgICA8L0J1dHRvbj5cclxuICAgICAgICAgICAgPC9Gb3JtPlxyXG4gICAgICAgICAgPC9Sb3c+XHJcbiAgICAgICAgPC9Db250YWluZXI+XHJcbiAgICAgICAgPHN0eWxlIGpzeD4gXHJcbiAgICAgICAgICAgIHtgIFxyXG4gICAgICAgICAgICAgIC5hZGRyZXNzZXMtdGV4dHtmb250LXNpemU6LjlyZW07Zm9udC13ZWlnaHQ6MzAwO31cclxuICAgICAgICAgICAgICAuZnVuZHMtaW5mby1jb250YWluZXJ7YmFja2dyb3VuZC1jb2xvcjojZWNmMmY5O31cclxuICAgICAgICAgICAgICAuY2FyZC10ZXh0e2ZvbnQtZmFtaWx5OlBvcHBpbnM7Zm9udC1zaXplOjFyZW07fVxyXG4gICAgICAgICAgICAgIC5wcm9iYWJpbGl0eS1wZXJjZW50e2ZvbnQtc2l6ZTouOXJlbTtjb2xvcjojMDA3YmZmO31cclxuICAgICAgICAgICAgICAucHJvYmFiaWxpdHktdGV4dHtmb250LXNpemU6LjlyZW07Y29sb3I6IzAwMDtmb250LXdlaWdodDozMDA7fVxyXG4gICAgICAgICAgICBgfSAgICBcclxuICAgICAgICA8L3N0eWxlPlxyXG4gICAgICA8L2Rpdj4gICAgICAgXHJcbiAgICA6XHJcbiAgICAgICAgPGRpdj5cclxuICAgICAgICAgIDxDbGFpbUJ0biBkcml6emxlPXtkcml6emxlfSBkcml6emxlU3RhdGU9e2RyaXp6bGVTdGF0ZX0gcHJvcEFkZHJlc3M9e3Byb3BBZGRyZXNzfSAvPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgfVxyXG4gIDwvPlxyXG4gIClcclxufVxyXG5cclxuY29uc3QgbWFwU3RhdGVUb1Byb3BzID0gKHN0YXRlKSA9PiAoe1xyXG4gIHByb3Bvc2FsQmFsYW5jZTogc3RhdGUuYXBwUmVkdWNlcnMucHJvcG9zYWxCYWxhbmNlXHJcbn0pXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjb25uZWN0KG1hcFN0YXRlVG9Qcm9wcywgbnVsbCkoQXdhcmRBc3NldCk7XHJcblxyXG5cclxuXHJcbiJdfQ== */\\n/*@ sourceURL=C:\\\\\\\\Users\\\\\\\\Samsung\\\\\\\\code\\\\\\\\cacp\\\\\\\\client\\\\\\\\components\\\\\\\\modals\\\\\\\\AwardAssetModal.js */\")) : __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 9\n    }\n  }, __jsx(ClaimBtn, {\n    drizzle: drizzle,\n    drizzleState: drizzleState,\n    propAddress: propAddress,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 11\n    }\n  })));\n};\n\n_s(AwardAsset, \"Gd6zNCn8iR+jaLtn/L6NfGA5YPc=\");\n\n_c = AwardAsset;\n\nconst mapStateToProps = state => ({\n  proposalBalance: state.appReducers.proposalBalance\n});\n\nexport default connect(mapStateToProps, null)(AwardAsset);\n\nvar _c;\n\n$RefreshReg$(_c, \"AwardAsset\");","map":{"version":3,"sources":["C:/Users/Samsung/code/cacp/client/components/modals/AwardAssetModal.js"],"names":["React","useEffect","useState","connect","Accordion","Col","Container","Button","Row","Form","Web3","ClaimBtn","newContextComponents","ContractForm","ContractData","AwardAsset","drizzle","drizzleState","propAddress","proposalBalance","tokenId","prevOrderStatus","account","accounts","deposits","setDespositInfo","winner","setWinner","fetchProposalInfo","state","store","getState","drizzleStatus","initialized","contracts","proposalContract","methods","countDepositers","call","depositInfoLength","propData","convertedListPrice","utils","fromWei","listPrice","depositerArray","i","depositersArray","depositer","depositAmount","depositerAmount","listPricePercent","toFixed","push","console","log","getWinner","contract","winningOwner","data","select","cacheSend","from","gas","err","error","map","deposit","fontSize","mapStateToProps","appReducers"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport Accordion from 'react-bootstrap/Accordion';\r\nimport { Col, Container, Button, Row, Form } from \"shards-react\";\r\nimport Web3 from \"web3\";\r\nimport ClaimBtn from \"../buttons/ClaimAssetBtn\";\r\n\r\n//\r\nimport { newContextComponents } from \"@drizzle/react-components\";\r\nconst { ContractForm, ContractData } = newContextComponents;\r\n//\r\n\r\nconst AwardAsset =  ({ drizzle, drizzleState, propAddress, proposalBalance, tokenId, prevOrderStatus }) => { \r\n  const account = drizzleState.accounts[0];\r\n  const [deposits, setDespositInfo] = useState([]);\r\n  const [winner, setWinner] = useState(null);\r\n\r\n  useEffect(() => {\r\n    fetchProposalInfo();\r\n  }, [])\r\n\r\n  const fetchProposalInfo = async () => { \r\n      let state = drizzle.store.getState()\r\n      if(state.drizzleStatus.initialized){\r\n      const proposalContract = await drizzle.contracts[`${propAddress}`];\r\n      const depositInfoLength = await proposalContract.methods.countDepositers().call();\r\n      const propData = await proposalContract.methods[\"proposals\"](`${tokenId}`).call();\r\n      const convertedListPrice= Web3.utils.fromWei(`${propData.listPrice}`,'ether');\r\n\r\n      let i;\r\n      let depositerArray = [];\r\n        for (i = 0; i < depositInfoLength; i++) {\r\n          const depositer = await proposalContract.methods.depositersArray([i]).call();\r\n          const depositAmount = await proposalContract.methods.deposits(depositer).call();\r\n          let depositerAmount = Web3.utils.fromWei(depositAmount,'ether');\r\n          let listPricePercent = ((depositerAmount / convertedListPrice) * 100).toFixed(0);\r\n          depositerArray.push([i, depositer, listPricePercent]);\r\n          setDespositInfo(depositerArray);\r\n      }  \r\n  }\r\n   return console.log('Loading....')\r\n  };\r\n\r\nconst getWinner = async () => {\r\n  const contract = await drizzle.contracts[`${propAddress}`];\r\n  //const winningOwner = await contract.methods.winningContributor.cacheCall();\r\n  const winningOwner =<ContractData drizzle={drizzle} drizzleState={drizzleState} contract={propAddress} method=\"winningContributor\" \r\n  render={data => (\r\n    data\r\n )}\r\n/>\r\n  //can add if statement here \r\n  console.log(winningOwner)\r\n  setWinner(winningOwner); \r\n}  \r\n\r\nconst select = async () => {\r\n  const account = await drizzleState.accounts[0];\r\n  const contract = await drizzle.contracts[`${propAddress}`];\r\n  try {\r\n      contract.methods[\"weightContributors\"].cacheSend({from:`${account}`, gas:3000000});\r\n      getWinner();\r\n    } catch (err) {\r\n      console.error(\"Err:\", err)\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {winner != 'null' ?\r\n      <div>\r\n        <div>\r\n          <Container className=\"\">\r\n            <h5 className=\"text-center mb-1\">\r\n              Owners\r\n            </h5>\r\n            <ContractData drizzle={drizzle} drizzleState={drizzleState} contract={propAddress} method=\"winningContributor\" />\r\n            <div className=\"funds-info-container border border-secondary rounded px-3 my-2\">\r\n            <Row className=\"card-text justify-content-center mt-1\"> \r\n              {deposits.map(deposit => (\r\n                <div className=\"\"  key={deposit[0]} >\r\n                  <Container className=\"mt-1\">\r\n                    <Row> {console.log(winner)}\r\n                      <Col>\r\n                        <p className=\"addresses-text mb-1\">\r\n                          {deposit[1]} \r\n                        </p>\r\n                        <p className=\"probability-text text-center mb-1 border-top border-primary\">\r\n                          Probability:&nbsp;<span className=\"probability-percent\">&nbsp;{deposit[2]}%</span>\r\n                        </p>\r\n                      </Col>\r\n                    </Row>\r\n                  </Container>\r\n                </div>\r\n              ))}\r\n            </Row>\r\n            </div>\r\n          </Container>\r\n        </div>\r\n        <Container>\r\n          <Row className=\" mt-2 mb-1 justify-content-center\">\r\n            <Form onSubmit={select}>\r\n              <Button size=\"md\" theme=\"dark\" className=\"mt-2 mx-auto\"\r\n                key=\"submit\"\r\n                type=\"button\"\r\n                onClick={select} \r\n                style={{ fontSize: 14 }}\r\n              >\r\n                Award DNA\r\n              </Button>\r\n            </Form>\r\n          </Row>\r\n        </Container>\r\n        <style jsx> \r\n            {` \r\n              .addresses-text{font-size:.9rem;font-weight:300;}\r\n              .funds-info-container{background-color:#ecf2f9;}\r\n              .card-text{font-family:Poppins;font-size:1rem;}\r\n              .probability-percent{font-size:.9rem;color:#007bff;}\r\n              .probability-text{font-size:.9rem;color:#000;font-weight:300;}\r\n            `}    \r\n        </style>\r\n      </div>       \r\n    :\r\n        <div>\r\n          <ClaimBtn drizzle={drizzle} drizzleState={drizzleState} propAddress={propAddress} />\r\n        </div>\r\n    }\r\n  </>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  proposalBalance: state.appReducers.proposalBalance\r\n})\r\n\r\nexport default connect(mapStateToProps, null)(AwardAsset);\r\n\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}