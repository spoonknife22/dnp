{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Samsung\\\\code\\\\cacp\\\\client\\\\components\\\\forms\\\\ProposalForm.js\";\nvar __jsx = React.createElement;\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nimport React, { useState, useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { Loader } from 'rimble-ui';\nimport InitialContributeModal from '../modals/InitialContibModal';\nimport InnerPropForm from './InnerPropForm';\n\nconst ProposalForm = ({\n  drizzle,\n  drizzleState,\n  props,\n  getCurrentProp,\n  tokenId,\n  assetPrice,\n  userManaBalance\n}) => {\n  const _useState = useState(null),\n        currentProp = _useState[0],\n        setCurrentProp = _useState[1];\n\n  const fetchProposalAddress = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n      var proposalAddress;\n      return regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return drizzle.contracts.ProposalController.methods.getPropTokenIdMap(\"\".concat(tokenId)).call();\n\n          case 2:\n            proposalAddress = _context.sent;\n            setCurrentProp(proposalAddress);\n            getCurrentProp(proposalAddress);\n\n          case 5:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee);\n    }));\n\n    return function fetchProposalAddress() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  useEffect(() => {\n    fetchProposalAddress();\n  }, [currentProp]);\n\n  if (!currentProp) {\n    return __jsx(\"div\", {\n      className: \"mx-auto align-items-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 24,\n        columnNumber: 5\n      }\n    }, tokenId, \" ProposalForm 25\", __jsx(Loader, {\n      color: \"#007bff\",\n      size: \"40px\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 26,\n        columnNumber: 7\n      }\n    }));\n  }\n\n  if (currentProp) {\n    return __jsx(InnerPropForm, {\n      assetPrice: assetPrice,\n      props: props,\n      drizzle: drizzle,\n      drizzleState: drizzleState,\n      tokenId: tokenId,\n      userManaBalance: userManaBalance,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 5\n      }\n    });\n  }\n};\n\nconst mapDispatchToProps = dispatch => ({\n  getCurrentProp: proposalAddress => dispatch({\n    type: \"GOT_PROP_ADDRESS\",\n    proposalAddress: proposalAddress\n  })\n});\n\nexport default connect(null, mapDispatchToProps)(ProposalForm);","map":{"version":3,"sources":["C:/Users/Samsung/code/cacp/client/components/forms/ProposalForm.js"],"names":["React","useState","useEffect","connect","Loader","InitialContributeModal","InnerPropForm","ProposalForm","drizzle","drizzleState","props","getCurrentProp","tokenId","assetPrice","userManaBalance","currentProp","setCurrentProp","fetchProposalAddress","contracts","ProposalController","methods","getPropTokenIdMap","call","proposalAddress","mapDispatchToProps","dispatch","type"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,MAAT,QAAuB,WAAvB;AACA,OAAOC,sBAAP,MAAmC,8BAAnC;AACA,OAAOC,aAAP,MAA2B,iBAA3B;;AAEA,MAAMC,YAAY,GAAG,CAAC;AAAEC,EAAAA,OAAF;AAAWC,EAAAA,YAAX;AAAyBC,EAAAA,KAAzB;AAAgCC,EAAAA,cAAhC;AAAgDC,EAAAA,OAAhD;AAAyDC,EAAAA,UAAzD;AAAqEC,EAAAA;AAArE,CAAD,KAA4F;AAAA,oBAE3Eb,QAAQ,CAAC,IAAD,CAFmE;AAAA,QAE1Gc,WAF0G;AAAA,QAE7FC,cAF6F;;AAIjH,QAAMC,oBAAoB;AAAA,uEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACGT,OAAO,CAACU,SAAR,CAAkBC,kBAAlB,CAAqCC,OAArC,CAA6CC,iBAA7C,WAAkET,OAAlE,GAA6EU,IAA7E,EADH;;AAAA;AACrBC,YAAAA,eADqB;AAE3BP,YAAAA,cAAc,CAACO,eAAD,CAAd;AACAZ,YAAAA,cAAc,CAACY,eAAD,CAAd;;AAH2B;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAApBN,oBAAoB;AAAA;AAAA;AAAA,KAA1B;;AAMAf,EAAAA,SAAS,CAAC,MAAM;AACde,IAAAA,oBAAoB;AACrB,GAFQ,EAEN,CAACF,WAAD,CAFM,CAAT;;AAKA,MAAG,CAACA,WAAJ,EAAgB;AACd,WACE;AAAK,MAAA,SAAS,EAAC,4BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGH,OADH,sBAEE,MAAC,MAAD;AAAQ,MAAA,KAAK,EAAC,SAAd;AAAwB,MAAA,IAAI,EAAC,MAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,CADF;AAMC;;AACH,MAAGG,WAAH,EAAe;AACd,WACG,MAAC,aAAD;AACE,MAAA,UAAU,EAAEF,UADd;AAEE,MAAA,KAAK,EAAEH,KAFT;AAGE,MAAA,OAAO,EAAEF,OAHX;AAIE,MAAA,YAAY,EAAEC,YAJhB;AAKE,MAAA,OAAO,EAAEG,OALX;AAME,MAAA,eAAe,EAAEE,eANnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADH;AAUE;AACF,CAnCD;;AAqCA,MAAMU,kBAAkB,GAAIC,QAAD,KAAe;AACxCd,EAAAA,cAAc,EAAGY,eAAD,IAAsBE,QAAQ,CAAC;AAAEC,IAAAA,IAAI,EAAE,kBAAR;AAA4BH,IAAAA,eAAe,EAACA;AAA5C,GAAD;AADN,CAAf,CAA3B;;AAKA,eAAepB,OAAO,CAAC,IAAD,EAAOqB,kBAAP,CAAP,CAAkCjB,YAAlC,CAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Loader } from 'rimble-ui';\r\nimport InitialContributeModal from '../modals/InitialContibModal';\r\nimport InnerPropForm  from './InnerPropForm'\r\n\r\nconst ProposalForm = ({ drizzle, drizzleState, props, getCurrentProp, tokenId, assetPrice, userManaBalance }) => {     \r\n\r\nconst [currentProp, setCurrentProp] = useState(null);\r\n\r\nconst fetchProposalAddress = async () => {\r\n  const proposalAddress = await drizzle.contracts.ProposalController.methods.getPropTokenIdMap(`${tokenId}`).call(); \r\n  setCurrentProp(proposalAddress);\r\n  getCurrentProp(proposalAddress);\r\n}\r\n\r\nuseEffect(() => {\r\n  fetchProposalAddress();\r\n}, [currentProp]);\r\n\r\n\r\nif(!currentProp){\r\n  return (\r\n    <div className=\"mx-auto align-items-center\"> \r\n      {tokenId} ProposalForm 25  \r\n      <Loader color=\"#007bff\" size=\"40px\" />\r\n    </div>\r\n    )\r\n  }\r\nif(currentProp){\r\n return (\r\n    <InnerPropForm\r\n      assetPrice={assetPrice}  \r\n      props={props}\r\n      drizzle={drizzle}\r\n      drizzleState={drizzleState}\r\n      tokenId={tokenId}\r\n      userManaBalance={userManaBalance}\r\n    />\r\n    )\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  getCurrentProp: (proposalAddress) =>  dispatch({ type: \"GOT_PROP_ADDRESS\", proposalAddress:proposalAddress })\r\n});\r\n      \r\n      \r\nexport default connect(null, mapDispatchToProps)(ProposalForm);"]},"metadata":{},"sourceType":"module"}