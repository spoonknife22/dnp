{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\Samsung\\\\code\\\\cacp\\\\client\\\\components\\\\buttons\\\\AwardAssetBtn.js\",\n    _s = $RefreshSig$();\n\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport Accordion from 'react-bootstrap/Accordion';\nimport { Col, Container, Button, Row, Form } from \"shards-react\";\nimport Web3 from \"web3\";\n\nconst AwardAssetBtn = ({\n  drizzle,\n  drizzleState,\n  propAddress,\n  proposalBalance,\n  tokenId\n}) => {\n  _s();\n\n  const account = drizzleState.accounts[0];\n\n  const _useState = useState([]),\n        deposits = _useState[0],\n        setDespositInfo = _useState[1]; //const [reSalePrice, setReSalePrice] = useState(null);\n\n\n  useEffect(() => {\n    fetchProposalInfo();\n  }, []);\n\n  const fetchProposalInfo = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var state, proposalContract, depositInfoLength, propData, convertedListPrice, i, depositerArray, depositer, depositAmount, depositerAmount, listPricePercent;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            state = drizzle.store.getState();\n\n            if (!state.drizzleStatus.initialized) {\n              _context.next = 28;\n              break;\n            }\n\n            _context.next = 4;\n            return drizzle.contracts[\"\".concat(propAddress)];\n\n          case 4:\n            proposalContract = _context.sent;\n            _context.next = 7;\n            return proposalContract.methods.countDepositers().call();\n\n          case 7:\n            depositInfoLength = _context.sent;\n            _context.next = 10;\n            return proposalContract.methods[\"proposals\"](\"\".concat(tokenId)).call();\n\n          case 10:\n            propData = _context.sent;\n            //const convertedReSalePrice = Web3.utils.fromWei(`${propData.reSalePrice}`,'ether');\n            convertedListPrice = Web3.utils.fromWei(\"\".concat(propData.listPrice), 'ether'); //setReSalePrice(convertedReSalePrice)\n\n            depositerArray = [];\n            i = 0;\n\n          case 14:\n            if (!(i < depositInfoLength)) {\n              _context.next = 28;\n              break;\n            }\n\n            _context.next = 17;\n            return proposalContract.methods.depositersArray([i]).call();\n\n          case 17:\n            depositer = _context.sent;\n            _context.next = 20;\n            return proposalContract.methods.deposits(depositer).call();\n\n          case 20:\n            depositAmount = _context.sent;\n            depositerAmount = Web3.utils.fromWei(depositAmount, 'ether'); //let convertPropBalance = Web3.utils.fromWei(`${proposalBalance}`,'ether');\n\n            listPricePercent = (depositerAmount / convertedListPrice * 100).toFixed(0); //let listPricePercent = (convertPropBalance/100) * listPricePercent;\n\n            depositerArray.push([i, depositer, listPricePercent]);\n            setDespositInfo(depositerArray);\n\n          case 25:\n            i++;\n            _context.next = 14;\n            break;\n\n          case 28:\n            return _context.abrupt(\"return\", console.log('Loading....'));\n\n          case 29:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee);\n    }));\n\n    return function fetchProposalInfo() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  const select = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var account, contract;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return drizzleState.accounts[0];\n\n          case 2:\n            account = _context2.sent;\n            _context2.next = 5;\n            return drizzle.contracts[\"\".concat(propAddress)];\n\n          case 5:\n            contract = _context2.sent;\n\n            try {\n              contract.methods[\"weightContributors\"].cacheSend({\n                from: \"\".concat(account)\n              });\n            } catch (err) {\n              console.error(\"Err:\", err);\n            }\n\n          case 7:\n          case \"end\":\n            return _context2.stop();\n        }\n      }, _callee2);\n    }));\n\n    return function select() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(React.Fragment, null, __jsx(\"div\", {\n    className: \"jsx-4258972430\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }\n  }, __jsx(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }\n  }, __jsx(\"h5\", {\n    className: \"jsx-4258972430\" + \" \" + \"mb-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 9\n    }\n  }, \"Investors\"), __jsx(\"div\", {\n    className: \"jsx-4258972430\" + \" \" + \"funds-info-container px-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 9\n    }\n  }, __jsx(Row, {\n    className: \"card-text justify-content-center mt-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }\n  }, deposits.map(deposit => __jsx(\"div\", {\n    key: deposit[0],\n    className: \"jsx-4258972430\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }\n  }, __jsx(Container, {\n    className: \"mt-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 15\n    }\n  }, __jsx(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 17\n    }\n  }, __jsx(Col, {\n    sm: \"12\",\n    lg: \"6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 19\n    }\n  }, __jsx(\"p\", {\n    className: \"jsx-4258972430\" + \" \" + \"addresses-text mb-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 21\n    }\n  }, deposit[1]), __jsx(\"p\", {\n    className: \"jsx-4258972430\" + \" \" + \"probability-text text-center mb-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 21\n    }\n  }, \"Probability:\\xA0\", __jsx(\"span\", {\n    className: \"jsx-4258972430\" + \" \" + \"probability-percent\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 41\n    }\n  }, \"\\xA0\", deposit[2], \"%\"))))))))))), __jsx(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }\n  }, __jsx(Row, {\n    className: \" mt-2 mb-1 justify-content-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 9\n    }\n  }, __jsx(Form, {\n    onSubmit: select,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 11\n    }\n  }, __jsx(\"label\", {\n    htmlFor: \"#username\",\n    className: \"jsx-4258972430\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 11\n    }\n  }, \"Username\"), __jsx(Button, {\n    size: \"md\",\n    theme: \"dark\",\n    className: \"mt-2 mx-auto\",\n    key: \"submit\",\n    type: \"button\",\n    onClick: select,\n    style: {\n      fontSize: 14\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }\n  }, \"Award NFT\")))), __jsx(_JSXStyle, {\n    id: \"4258972430\",\n    __self: this\n  }, \".addresses-text.jsx-4258972430{font-size:.9rem;font-weight:300;}.funds-info-container.jsx-4258972430{background-color:#ecf2f9;}.card-text.jsx-4258972430{font-family:Poppins;font-size:1rem;}.probability-percent.jsx-4258972430{font-size:.9rem;color:#007bff;}.probability-text.jsx-4258972430{font-size:.9rem;color:#000;font-weight:300;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcU2Ftc3VuZ1xcY29kZVxcY2FjcFxcY2xpZW50XFxjb21wb25lbnRzXFxidXR0b25zXFxBd2FyZEFzc2V0QnRuLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQWdHVyxBQUUyQyxBQUNlLEFBQ2hCLEFBQ00sQUFDSCxnQkFKYSxBQUdHLEFBQ04sSUFGQyxLQURHLEVBR1csR0FEUixFQUhILEdBRUYsUUFFYyIsImZpbGUiOiJDOlxcVXNlcnNcXFNhbXN1bmdcXGNvZGVcXGNhY3BcXGNsaWVudFxcY29tcG9uZW50c1xcYnV0dG9uc1xcQXdhcmRBc3NldEJ0bi5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBjb25uZWN0IH0gZnJvbSAncmVhY3QtcmVkdXgnO1xyXG5pbXBvcnQgQWNjb3JkaW9uIGZyb20gJ3JlYWN0LWJvb3RzdHJhcC9BY2NvcmRpb24nO1xyXG5pbXBvcnQgeyBDb2wsIENvbnRhaW5lciwgQnV0dG9uLCBSb3csIEZvcm0gfSBmcm9tIFwic2hhcmRzLXJlYWN0XCI7XHJcbmltcG9ydCBXZWIzIGZyb20gXCJ3ZWIzXCI7XHJcblxyXG5jb25zdCBBd2FyZEFzc2V0QnRuID0gICh7IGRyaXp6bGUsIGRyaXp6bGVTdGF0ZSwgcHJvcEFkZHJlc3MsIHByb3Bvc2FsQmFsYW5jZSwgdG9rZW5JZCB9KSA9PiB7IFxyXG4gIGNvbnN0IGFjY291bnQgPSBkcml6emxlU3RhdGUuYWNjb3VudHNbMF07XHJcbiAgY29uc3QgW2RlcG9zaXRzLCBzZXREZXNwb3NpdEluZm9dID0gdXNlU3RhdGUoW10pO1xyXG4gIC8vY29uc3QgW3JlU2FsZVByaWNlLCBzZXRSZVNhbGVQcmljZV0gPSB1c2VTdGF0ZShudWxsKTtcclxuXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGZldGNoUHJvcG9zYWxJbmZvKCk7XHJcbiAgfSwgW10pXHJcblxyXG4gIGNvbnN0IGZldGNoUHJvcG9zYWxJbmZvID0gYXN5bmMgKCkgPT4geyBcclxuICAgICAgbGV0IHN0YXRlID0gZHJpenpsZS5zdG9yZS5nZXRTdGF0ZSgpXHJcbiAgICAgIGlmKHN0YXRlLmRyaXp6bGVTdGF0dXMuaW5pdGlhbGl6ZWQpe1xyXG4gICAgICBjb25zdCBwcm9wb3NhbENvbnRyYWN0ID0gYXdhaXQgZHJpenpsZS5jb250cmFjdHNbYCR7cHJvcEFkZHJlc3N9YF07XHJcbiAgICAgIGNvbnN0IGRlcG9zaXRJbmZvTGVuZ3RoID0gYXdhaXQgcHJvcG9zYWxDb250cmFjdC5tZXRob2RzLmNvdW50RGVwb3NpdGVycygpLmNhbGwoKTtcclxuICAgICAgY29uc3QgcHJvcERhdGEgPSBhd2FpdCBwcm9wb3NhbENvbnRyYWN0Lm1ldGhvZHNbXCJwcm9wb3NhbHNcIl0oYCR7dG9rZW5JZH1gKS5jYWxsKCk7XHJcbiAgICAgIC8vY29uc3QgY29udmVydGVkUmVTYWxlUHJpY2UgPSBXZWIzLnV0aWxzLmZyb21XZWkoYCR7cHJvcERhdGEucmVTYWxlUHJpY2V9YCwnZXRoZXInKTtcclxuICAgICAgY29uc3QgY29udmVydGVkTGlzdFByaWNlPSBXZWIzLnV0aWxzLmZyb21XZWkoYCR7cHJvcERhdGEubGlzdFByaWNlfWAsJ2V0aGVyJyk7XHJcbiAgICAgIC8vc2V0UmVTYWxlUHJpY2UoY29udmVydGVkUmVTYWxlUHJpY2UpXHJcblxyXG4gICAgICBsZXQgaTtcclxuICAgICAgbGV0IGRlcG9zaXRlckFycmF5ID0gW107XHJcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGRlcG9zaXRJbmZvTGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgIGNvbnN0IGRlcG9zaXRlciA9IGF3YWl0IHByb3Bvc2FsQ29udHJhY3QubWV0aG9kcy5kZXBvc2l0ZXJzQXJyYXkoW2ldKS5jYWxsKCk7XHJcbiAgICAgICAgICBjb25zdCBkZXBvc2l0QW1vdW50ID0gYXdhaXQgcHJvcG9zYWxDb250cmFjdC5tZXRob2RzLmRlcG9zaXRzKGRlcG9zaXRlcikuY2FsbCgpO1xyXG4gICAgICAgICAgbGV0IGRlcG9zaXRlckFtb3VudCA9IFdlYjMudXRpbHMuZnJvbVdlaShkZXBvc2l0QW1vdW50LCdldGhlcicpO1xyXG4gICAgICAgICAgLy9sZXQgY29udmVydFByb3BCYWxhbmNlID0gV2ViMy51dGlscy5mcm9tV2VpKGAke3Byb3Bvc2FsQmFsYW5jZX1gLCdldGhlcicpO1xyXG4gICAgICAgICAgbGV0IGxpc3RQcmljZVBlcmNlbnQgPSAoKGRlcG9zaXRlckFtb3VudCAvIGNvbnZlcnRlZExpc3RQcmljZSkgKiAxMDApLnRvRml4ZWQoMCk7XHJcbiAgICAgICAgICAvL2xldCBsaXN0UHJpY2VQZXJjZW50ID0gKGNvbnZlcnRQcm9wQmFsYW5jZS8xMDApICogbGlzdFByaWNlUGVyY2VudDtcclxuICAgICAgICAgIGRlcG9zaXRlckFycmF5LnB1c2goW2ksIGRlcG9zaXRlciwgbGlzdFByaWNlUGVyY2VudF0pO1xyXG4gICAgICAgICAgc2V0RGVzcG9zaXRJbmZvKGRlcG9zaXRlckFycmF5KTtcclxuICAgICAgfSAgXHJcbiAgfVxyXG4gICByZXR1cm4gY29uc29sZS5sb2coJ0xvYWRpbmcuLi4uJylcclxuICB9O1xyXG5cclxuY29uc3Qgc2VsZWN0ID0gYXN5bmMgKCkgPT4ge1xyXG4gIGNvbnN0IGFjY291bnQgPSBhd2FpdCBkcml6emxlU3RhdGUuYWNjb3VudHNbMF07XHJcbiAgY29uc3QgY29udHJhY3QgPSBhd2FpdCBkcml6emxlLmNvbnRyYWN0c1tgJHtwcm9wQWRkcmVzc31gXTtcclxuICB0cnkge1xyXG4gICAgICBjb250cmFjdC5tZXRob2RzW1wid2VpZ2h0Q29udHJpYnV0b3JzXCJdLmNhY2hlU2VuZCh7ZnJvbTpgJHthY2NvdW50fWB9KTtcclxuICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyOlwiLCBlcnIpXHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgcmV0dXJuIChcclxuICAgIDw+XHJcbiAgICAgIDxkaXY+XHJcbiAgICAgICAgPENvbnRhaW5lcj5cclxuICAgICAgICA8aDUgY2xhc3NOYW1lPVwibWItMVwiPlxyXG4gICAgICAgICAgSW52ZXN0b3JzXHJcbiAgICAgICAgPC9oNT5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZ1bmRzLWluZm8tY29udGFpbmVyIHB4LTNcIj5cclxuICAgICAgICA8Um93IGNsYXNzTmFtZT1cImNhcmQtdGV4dCBqdXN0aWZ5LWNvbnRlbnQtY2VudGVyIG10LTFcIj4gXHJcbiAgICAgICAgICB7ZGVwb3NpdHMubWFwKGRlcG9zaXQgPT4gKFxyXG4gICAgICAgICAgICA8ZGl2ICBrZXk9e2RlcG9zaXRbMF19ID5cclxuICAgICAgICAgICAgICA8Q29udGFpbmVyIGNsYXNzTmFtZT1cIm10LTFcIj5cclxuICAgICAgICAgICAgICAgIDxSb3c+IFxyXG4gICAgICAgICAgICAgICAgICA8Q29sIHNtPVwiMTJcIiBsZz1cIjZcIj5cclxuICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJhZGRyZXNzZXMtdGV4dCBtYi0xXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICB7ZGVwb3NpdFsxXX0gXHJcbiAgICAgICAgICAgICAgICAgICAgPC9wPlxyXG4gICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInByb2JhYmlsaXR5LXRleHQgdGV4dC1jZW50ZXIgbWItMVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgUHJvYmFiaWxpdHk6Jm5ic3A7PHNwYW4gY2xhc3NOYW1lPVwicHJvYmFiaWxpdHktcGVyY2VudFwiPiZuYnNwO3tkZXBvc2l0WzJdfSU8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9wPlxyXG4gICAgICAgICAgICAgICAgICA8L0NvbD5cclxuICAgICAgICAgICAgICAgIDwvUm93PlxyXG4gICAgICAgICAgICAgIDwvQ29udGFpbmVyPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICkpfVxyXG4gICAgICAgIDwvUm93PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L0NvbnRhaW5lcj5cclxuICAgICAgPC9kaXY+XHJcbiAgICAgIDxDb250YWluZXI+XHJcbiAgICAgICAgPFJvdyBjbGFzc05hbWU9XCIgbXQtMiBtYi0xIGp1c3RpZnktY29udGVudC1jZW50ZXJcIj5cclxuICAgICAgICAgIDxGb3JtIG9uU3VibWl0PXtzZWxlY3R9PlxyXG4gICAgICAgICAgPGxhYmVsIGh0bWxGb3I9XCIjdXNlcm5hbWVcIj5Vc2VybmFtZTwvbGFiZWw+XHJcbiAgICAgICAgICAgIDxCdXR0b24gc2l6ZT1cIm1kXCIgdGhlbWU9XCJkYXJrXCIgY2xhc3NOYW1lPVwibXQtMiBteC1hdXRvXCJcclxuICAgICAgICAgICAgICBrZXk9XCJzdWJtaXRcIlxyXG4gICAgICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxyXG4gICAgICAgICAgICAgIG9uQ2xpY2s9e3NlbGVjdH0gXHJcbiAgICAgICAgICAgICAgc3R5bGU9e3sgZm9udFNpemU6IDE0IH19XHJcbiAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICBBd2FyZCBORlQgIFxyXG4gICAgICAgICAgICA8L0J1dHRvbj5cclxuICAgICAgICAgIDwvRm9ybT5cclxuICAgICAgICA8L1Jvdz5cclxuICAgICAgPC9Db250YWluZXI+XHJcbiAgICAgIDxzdHlsZSBqc3g+IFxyXG4gICAgICAgICAge2AgXHJcbiAgICAgICAgICAgIC5hZGRyZXNzZXMtdGV4dHtmb250LXNpemU6LjlyZW07Zm9udC13ZWlnaHQ6MzAwO31cclxuICAgICAgICAgICAgLmZ1bmRzLWluZm8tY29udGFpbmVye2JhY2tncm91bmQtY29sb3I6I2VjZjJmOTt9XHJcbiAgICAgICAgICAgIC5jYXJkLXRleHR7Zm9udC1mYW1pbHk6UG9wcGlucztmb250LXNpemU6MXJlbTt9XHJcbiAgICAgICAgICAgIC5wcm9iYWJpbGl0eS1wZXJjZW50e2ZvbnQtc2l6ZTouOXJlbTtjb2xvcjojMDA3YmZmO31cclxuICAgICAgICAgICAgLnByb2JhYmlsaXR5LXRleHR7Zm9udC1zaXplOi45cmVtO2NvbG9yOiMwMDA7Zm9udC13ZWlnaHQ6MzAwO31cclxuICAgICAgICAgIGB9ICAgIFxyXG4gICAgICA8L3N0eWxlPlxyXG4gICAgPC8+XHJcbiAgKVxyXG59XHJcblxyXG5jb25zdCBtYXBTdGF0ZVRvUHJvcHMgPSAoc3RhdGUpID0+ICh7XHJcbiAgcHJvcG9zYWxCYWxhbmNlOiBzdGF0ZS5hcHBSZWR1Y2Vycy5wcm9wb3NhbEJhbGFuY2VcclxufSlcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNvbm5lY3QobWFwU3RhdGVUb1Byb3BzLCBudWxsKShBd2FyZEFzc2V0QnRuKTtcclxuXHJcblxyXG5cclxuIl19 */\\n/*@ sourceURL=C:\\\\\\\\Users\\\\\\\\Samsung\\\\\\\\code\\\\\\\\cacp\\\\\\\\client\\\\\\\\components\\\\\\\\buttons\\\\\\\\AwardAssetBtn.js */\"));\n};\n\n_s(AwardAssetBtn, \"q4sGxVxrVCXZPesBf4qww2MYAzU=\");\n\n_c = AwardAssetBtn;\n\nconst mapStateToProps = state => ({\n  proposalBalance: state.appReducers.proposalBalance\n});\n\nexport default connect(mapStateToProps, null)(AwardAssetBtn);\n\nvar _c;\n\n$RefreshReg$(_c, \"AwardAssetBtn\");","map":{"version":3,"sources":["C:/Users/Samsung/code/cacp/client/components/buttons/AwardAssetBtn.js"],"names":["React","useEffect","useState","connect","Accordion","Col","Container","Button","Row","Form","Web3","AwardAssetBtn","drizzle","drizzleState","propAddress","proposalBalance","tokenId","account","accounts","deposits","setDespositInfo","fetchProposalInfo","state","store","getState","drizzleStatus","initialized","contracts","proposalContract","methods","countDepositers","call","depositInfoLength","propData","convertedListPrice","utils","fromWei","listPrice","depositerArray","i","depositersArray","depositer","depositAmount","depositerAmount","listPricePercent","toFixed","push","console","log","select","contract","cacheSend","from","err","error","map","deposit","fontSize","mapStateToProps","appReducers"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport Accordion from 'react-bootstrap/Accordion';\r\nimport { Col, Container, Button, Row, Form } from \"shards-react\";\r\nimport Web3 from \"web3\";\r\n\r\nconst AwardAssetBtn =  ({ drizzle, drizzleState, propAddress, proposalBalance, tokenId }) => { \r\n  const account = drizzleState.accounts[0];\r\n  const [deposits, setDespositInfo] = useState([]);\r\n  //const [reSalePrice, setReSalePrice] = useState(null);\r\n\r\n  useEffect(() => {\r\n    fetchProposalInfo();\r\n  }, [])\r\n\r\n  const fetchProposalInfo = async () => { \r\n      let state = drizzle.store.getState()\r\n      if(state.drizzleStatus.initialized){\r\n      const proposalContract = await drizzle.contracts[`${propAddress}`];\r\n      const depositInfoLength = await proposalContract.methods.countDepositers().call();\r\n      const propData = await proposalContract.methods[\"proposals\"](`${tokenId}`).call();\r\n      //const convertedReSalePrice = Web3.utils.fromWei(`${propData.reSalePrice}`,'ether');\r\n      const convertedListPrice= Web3.utils.fromWei(`${propData.listPrice}`,'ether');\r\n      //setReSalePrice(convertedReSalePrice)\r\n\r\n      let i;\r\n      let depositerArray = [];\r\n        for (i = 0; i < depositInfoLength; i++) {\r\n          const depositer = await proposalContract.methods.depositersArray([i]).call();\r\n          const depositAmount = await proposalContract.methods.deposits(depositer).call();\r\n          let depositerAmount = Web3.utils.fromWei(depositAmount,'ether');\r\n          //let convertPropBalance = Web3.utils.fromWei(`${proposalBalance}`,'ether');\r\n          let listPricePercent = ((depositerAmount / convertedListPrice) * 100).toFixed(0);\r\n          //let listPricePercent = (convertPropBalance/100) * listPricePercent;\r\n          depositerArray.push([i, depositer, listPricePercent]);\r\n          setDespositInfo(depositerArray);\r\n      }  \r\n  }\r\n   return console.log('Loading....')\r\n  };\r\n\r\nconst select = async () => {\r\n  const account = await drizzleState.accounts[0];\r\n  const contract = await drizzle.contracts[`${propAddress}`];\r\n  try {\r\n      contract.methods[\"weightContributors\"].cacheSend({from:`${account}`});\r\n    } catch (err) {\r\n      console.error(\"Err:\", err)\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div>\r\n        <Container>\r\n        <h5 className=\"mb-1\">\r\n          Investors\r\n        </h5>\r\n        <div className=\"funds-info-container px-3\">\r\n        <Row className=\"card-text justify-content-center mt-1\"> \r\n          {deposits.map(deposit => (\r\n            <div  key={deposit[0]} >\r\n              <Container className=\"mt-1\">\r\n                <Row> \r\n                  <Col sm=\"12\" lg=\"6\">\r\n                    <p className=\"addresses-text mb-1\">\r\n                      {deposit[1]} \r\n                    </p>\r\n                    <p className=\"probability-text text-center mb-1\">\r\n                      Probability:&nbsp;<span className=\"probability-percent\">&nbsp;{deposit[2]}%</span>\r\n                    </p>\r\n                  </Col>\r\n                </Row>\r\n              </Container>\r\n            </div>\r\n          ))}\r\n        </Row>\r\n        </div>\r\n      </Container>\r\n      </div>\r\n      <Container>\r\n        <Row className=\" mt-2 mb-1 justify-content-center\">\r\n          <Form onSubmit={select}>\r\n          <label htmlFor=\"#username\">Username</label>\r\n            <Button size=\"md\" theme=\"dark\" className=\"mt-2 mx-auto\"\r\n              key=\"submit\"\r\n              type=\"button\"\r\n              onClick={select} \r\n              style={{ fontSize: 14 }}\r\n            >\r\n              Award NFT  \r\n            </Button>\r\n          </Form>\r\n        </Row>\r\n      </Container>\r\n      <style jsx> \r\n          {` \r\n            .addresses-text{font-size:.9rem;font-weight:300;}\r\n            .funds-info-container{background-color:#ecf2f9;}\r\n            .card-text{font-family:Poppins;font-size:1rem;}\r\n            .probability-percent{font-size:.9rem;color:#007bff;}\r\n            .probability-text{font-size:.9rem;color:#000;font-weight:300;}\r\n          `}    \r\n      </style>\r\n    </>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  proposalBalance: state.appReducers.proposalBalance\r\n})\r\n\r\nexport default connect(mapStateToProps, null)(AwardAssetBtn);\r\n\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}