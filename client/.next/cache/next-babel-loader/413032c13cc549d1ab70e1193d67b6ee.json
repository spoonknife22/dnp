{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Samsung\\\\code\\\\cacp\\\\client\\\\components\\\\modals\\\\NominationModal.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nimport React, { useState, useEffect } from 'react';\nimport Modal from 'react-bootstrap/Modal';\nimport NominationForm from '../forms/NominationForm';\nimport { connect } from 'react-redux';\nimport Web3 from 'web3';\nimport ProposalForm from '../forms/ProposalForm';\nimport { Loader } from 'rimble-ui';\n\nconst NominationModal = ({\n  parcel,\n  props,\n  userManaBalance,\n  getNftAddress\n}) => {\n  const drizzleState = props.drizzleState,\n        drizzle = props.drizzle;\n\n  const _useState = useState(false),\n        show = _useState[0],\n        setShow = _useState[1];\n\n  const handleShow = () => setShow(true);\n\n  const handleClose = () => setShow(false);\n\n  const _useState2 = useState(null),\n        tokenId = _useState2[0],\n        setTokenId = _useState2[1];\n\n  const myHeaders = new Headers();\n  myHeaders.append(\"Content-Type\", \"application/json\");\n  useEffect(() => {\n    const fetchDetailsLink = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        var graphql, assetId, proxyUrl, targetUrl;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              graphql = JSON.stringify({\n                query: \"{ parcels(where: {x:\\\"\".concat(parcel.x, \"\\\",y:\\\"\").concat(parcel.y, \"\\\"}) \\n      {\\n        nft{\\n          activeOrder{\\n              Order:\\n              nftAddress\\n              price\\n          }\\n          tokenId\\n        }\\n      }\\n    }\")\n              });\n              assetId = drizzle.contracts.LANDRegistry.methods.encodeTokenId.call(parcel.x, parcel.y);\n              console.log(assetId);\n              proxyUrl = 'https://cors-anywhere.herokuapp.com/', targetUrl = 'https://api.thegraph.com/subgraphs/name/decentraland/marketplace';\n              fetch(proxyUrl + targetUrl, {\n                method: \"POST\",\n                headers: myHeaders,\n                body: graphql,\n                variables: {},\n                redirect: 'follow'\n              }).then(res => res.json()).then(result => {\n                const parcelData = result.data.parcels[0];\n                return parcelData;\n              }).then(result => {\n                const nft = result.nft;\n                const tokenId = nft.tokenId; //const nftAddress = nft.activeOrder.Order\n\n                const nftAddress = '0x3f27363c9f86E8ac151a0D332abC2C3b60B7bCf5';\n                setTokenId(tokenId);\n                getNftAddress(nftAddress);\n                console.log(nftAddress);\n              });\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      }));\n\n      return function fetchDetailsLink() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    fetchDetailsLink();\n  }, []);\n  return __jsx(React.Fragment, null, __jsx(\"button\", {\n    type: \"button\",\n    onClick: handleShow,\n    className: \"jsx-2818753896\" + \" \" + \"btn btn-lg btn-block card-footer-btn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }\n  }, \"Nominate Asset\"), __jsx(Modal, {\n    className: \"nomintation-modal\",\n    show: show,\n    onHide: handleClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 9\n    }\n  }, __jsx(Modal.Header, {\n    className: \"text-center justify-content-center\",\n    closeButton: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 11\n    }\n  }, __jsx(Modal.Title, {\n    className: \"text-center justify-content-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }\n  }, \"Current Price:\\xA0\", parcel.publication.price, \"\\xA0MANA\", __jsx(\"p\", {\n    className: \"jsx-2818753896\" + \" \" + \"mana-balance mb-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }\n  }, \"Your MANA Balance:\\xA0\", __jsx(\"span\", {\n    className: \"jsx-2818753896\" + \" \" + \"amount-number\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 71\n    }\n  }, \"\".concat(userManaBalance))))), __jsx(Modal.Body, {\n    className: \"pt-1 align-items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 11\n    }\n  }, tokenId !== null ? __jsx(ProposalForm, {\n    assetPrice: parcel.publication.price,\n    props: props,\n    drizzle: drizzle,\n    drizzleState: drizzleState,\n    tokenId: tokenId,\n    userManaBalance: userManaBalance,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 11\n    }\n  }) : __jsx(\"div\", {\n    className: \"jsx-2818753896\" + \" \" + \"align-items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }\n  }, tokenId, \" Nomination Modal 76\", __jsx(Loader, {\n    className: \"mx-auto\",\n    color: \"#007bff\",\n    size: \"40px\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 15\n    }\n  })))), __jsx(_JSXStyle, {\n    id: \"2818753896\",\n    __self: this\n  }, \".nomintation-modal.jsx-2818753896{font-family:Poppins;}.mana-balance.jsx-2818753896{font-size:.9rem;color:#000;font-weight:200;text-align:left;}.amount-number.jsx-2818753896{font-family:Poppins;color:#66a3ff;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcU2Ftc3VuZ1xcY29kZVxcY2FjcFxcY2xpZW50XFxjb21wb25lbnRzXFxtb2RhbHNcXE5vbWluYXRpb25Nb2RhbC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFtR1csQUFDeUMsQUFDRSxBQUNLLGdCQURLLElBRFgsQUFFbUIsT0FEUSxPQUNQLFNBRHFCLGdCQUFDIiwiZmlsZSI6IkM6XFxVc2Vyc1xcU2Ftc3VuZ1xcY29kZVxcY2FjcFxcY2xpZW50XFxjb21wb25lbnRzXFxtb2RhbHNcXE5vbWluYXRpb25Nb2RhbC5qcyIsInNvdXJjZXNDb250ZW50IjpbIiAgXHJcbmltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgTW9kYWwgZnJvbSAncmVhY3QtYm9vdHN0cmFwL01vZGFsJztcclxuaW1wb3J0IE5vbWluYXRpb25Gb3JtIGZyb20gJy4uL2Zvcm1zL05vbWluYXRpb25Gb3JtJztcclxuaW1wb3J0IHsgY29ubmVjdCB9IGZyb20gJ3JlYWN0LXJlZHV4JztcclxuaW1wb3J0IFdlYjMgZnJvbSAnd2ViMyc7XHJcbmltcG9ydCBQcm9wb3NhbEZvcm0gZnJvbSAnLi4vZm9ybXMvUHJvcG9zYWxGb3JtJztcclxuaW1wb3J0IHsgTG9hZGVyIH0gZnJvbSAncmltYmxlLXVpJztcclxuXHJcbmNvbnN0IE5vbWluYXRpb25Nb2RhbCA9ICh7IHBhcmNlbCwgcHJvcHMsIHVzZXJNYW5hQmFsYW5jZSwgZ2V0TmZ0QWRkcmVzcyB9KSA9PiB7XHJcblxyXG4gIGNvbnN0IHtkcml6emxlU3RhdGUsIGRyaXp6bGV9ID0gcHJvcHM7XHJcblxyXG4gIGNvbnN0IFtzaG93LCBzZXRTaG93XSA9IHVzZVN0YXRlKGZhbHNlKTtcclxuICBjb25zdCBoYW5kbGVTaG93ID0gKCkgPT4gc2V0U2hvdyh0cnVlKTtcclxuICBjb25zdCBoYW5kbGVDbG9zZSA9ICgpID0+IHNldFNob3coZmFsc2UpO1xyXG4gIGNvbnN0IFt0b2tlbklkLCBzZXRUb2tlbklkXSA9IHVzZVN0YXRlKG51bGwpO1xyXG5cclxuICBjb25zdCBteUhlYWRlcnMgPSBuZXcgSGVhZGVycygpO1xyXG4gIG15SGVhZGVycy5hcHBlbmQoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uXCIpO1xyXG5cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gIGNvbnN0IGZldGNoRGV0YWlsc0xpbmsgPSBhc3luYyAoKSA9PiB7XHJcblxyXG4gIGNvbnN0IGdyYXBocWw9IEpTT04uc3RyaW5naWZ5KHsgcXVlcnk6IFxyXG4gICAgYHsgcGFyY2Vscyh3aGVyZToge3g6XCIke3BhcmNlbC54fVwiLHk6XCIke3BhcmNlbC55fVwifSkgXHJcbiAgICAgIHtcclxuICAgICAgICBuZnR7XHJcbiAgICAgICAgICBhY3RpdmVPcmRlcntcclxuICAgICAgICAgICAgICBPcmRlcjpcclxuICAgICAgICAgICAgICBuZnRBZGRyZXNzXHJcbiAgICAgICAgICAgICAgcHJpY2VcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHRva2VuSWRcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1gXHJcbiAgfSlcclxuXHJcbiAgY29uc3QgYXNzZXRJZCA9IGRyaXp6bGUuY29udHJhY3RzLkxBTkRSZWdpc3RyeS5tZXRob2RzLmVuY29kZVRva2VuSWQuY2FsbChwYXJjZWwueCwgcGFyY2VsLnkpXHJcbiAgY29uc29sZS5sb2coYXNzZXRJZClcclxuICBjb25zdCBwcm94eVVybCA9ICdodHRwczovL2NvcnMtYW55d2hlcmUuaGVyb2t1YXBwLmNvbS8nLFxyXG4gIHRhcmdldFVybCA9ICdodHRwczovL2FwaS50aGVncmFwaC5jb20vc3ViZ3JhcGhzL25hbWUvZGVjZW50cmFsYW5kL21hcmtldHBsYWNlJ1xyXG5cclxuICBmZXRjaChwcm94eVVybCArIHRhcmdldFVybCwge1xyXG4gICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgIGhlYWRlcnM6bXlIZWFkZXJzLCAgXHJcbiAgICBib2R5OmdyYXBocWwsIHZhcmlhYmxlczp7fSxcclxuICAgIHJlZGlyZWN0OiAnZm9sbG93J1xyXG4gIH0pXHJcbiAgICAudGhlbihyZXMgPT4gcmVzLmpzb24oKSlcclxuICAgIC50aGVuKChyZXN1bHQpID0+IHtcclxuICAgICAgY29uc3QgcGFyY2VsRGF0YSA9IHJlc3VsdC5kYXRhLnBhcmNlbHNbMF07XHJcbiAgICAgIHJldHVybiBwYXJjZWxEYXRhO1xyXG4gICAgfSlcclxuICAgIC50aGVuKChyZXN1bHQpID0+IHsgXHJcbiAgICAgIGNvbnN0IHsgbmZ0IH0gPSByZXN1bHQ7XHJcbiAgICAgIGNvbnN0IHsgdG9rZW5JZCB9ID0gbmZ0O1xyXG4gICAgICAvL2NvbnN0IG5mdEFkZHJlc3MgPSBuZnQuYWN0aXZlT3JkZXIuT3JkZXJcclxuICAgICAgY29uc3QgbmZ0QWRkcmVzcyA9ICcweDNmMjczNjNjOWY4NkU4YWMxNTFhMEQzMzJhYkMyQzNiNjBCN2JDZjUnO1xyXG4gICAgICBzZXRUb2tlbklkKHRva2VuSWQpO1xyXG4gICAgICBnZXROZnRBZGRyZXNzKG5mdEFkZHJlc3MpO1xyXG4gICAgICBjb25zb2xlLmxvZyhuZnRBZGRyZXNzKVxyXG4gICAgfSlcclxuICB9O1xyXG5mZXRjaERldGFpbHNMaW5rKCk7XHJcblxyXG59LCBbXSk7XHJcblxyXG5yZXR1cm4gKCAgIFxyXG4gICAgICA8PiBcclxuICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzc05hbWU9XCJidG4gYnRuLWxnIGJ0bi1ibG9jayBjYXJkLWZvb3Rlci1idG5cIiBvbkNsaWNrPXtoYW5kbGVTaG93fT5cclxuICAgICAgICAgIE5vbWluYXRlIEFzc2V0XHJcbiAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgPE1vZGFsIGNsYXNzTmFtZT1cIm5vbWludGF0aW9uLW1vZGFsXCIgc2hvdz17c2hvd30gb25IaWRlPXtoYW5kbGVDbG9zZX0+XHJcbiAgICAgICAgICA8TW9kYWwuSGVhZGVyIGNsYXNzTmFtZT1cInRleHQtY2VudGVyIGp1c3RpZnktY29udGVudC1jZW50ZXJcIiBjbG9zZUJ1dHRvbj5cclxuICAgICAgICAgICAgPE1vZGFsLlRpdGxlIGNsYXNzTmFtZT1cInRleHQtY2VudGVyIGp1c3RpZnktY29udGVudC1jZW50ZXJcIj5DdXJyZW50IFByaWNlOiZuYnNwO3twYXJjZWwucHVibGljYXRpb24ucHJpY2V9Jm5ic3A7TUFOQVxyXG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYW5hLWJhbGFuY2UgbWItMVwiID5Zb3VyIE1BTkEgQmFsYW5jZTombmJzcDs8c3BhbiBjbGFzc05hbWU9XCJhbW91bnQtbnVtYmVyXCI+e2Ake3VzZXJNYW5hQmFsYW5jZX1gfTwvc3Bhbj48L3A+XHJcbiAgICAgICAgICA8L01vZGFsLlRpdGxlPlxyXG4gICAgICAgIDwvTW9kYWwuSGVhZGVyPlxyXG4gICAgICAgICAgPE1vZGFsLkJvZHkgY2xhc3NOYW1lPVwicHQtMSBhbGlnbi1pdGVtcy1jZW50ZXJcIj5cclxuICAgICAgICAge3Rva2VuSWQgIT09IG51bGwgPyAgIFxyXG4gICAgICAgICAgPFByb3Bvc2FsRm9ybSAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBhc3NldFByaWNlPXtwYXJjZWwucHVibGljYXRpb24ucHJpY2V9ICBcclxuICAgICAgICAgICAgcHJvcHM9e3Byb3BzfVxyXG4gICAgICAgICAgICBkcml6emxlPXtkcml6emxlfVxyXG4gICAgICAgICAgICBkcml6emxlU3RhdGU9e2RyaXp6bGVTdGF0ZX1cclxuICAgICAgICAgICAgdG9rZW5JZD17dG9rZW5JZH1cclxuICAgICAgICAgICAgdXNlck1hbmFCYWxhbmNlPXt1c2VyTWFuYUJhbGFuY2V9XHJcbiAgICAgICAgICAgIC8+IFxyXG4gICAgICAgICAgOlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFsaWduLWl0ZW1zLWNlbnRlclwiPiAgIFxyXG4gICAgICAgICAgICB7dG9rZW5JZH0gTm9taW5hdGlvbiBNb2RhbCA3NlxyXG4gICAgICAgICAgICAgIDxMb2FkZXIgY2xhc3NOYW1lPVwibXgtYXV0b1wiIGNvbG9yPVwiIzAwN2JmZlwiIHNpemU9XCI0MHB4XCIgLz5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICB9IFxyXG4gICAgICAgICAgPC9Nb2RhbC5Cb2R5PlxyXG4gICAgICAgIDwvTW9kYWw+XHJcbiAgICAgICAgPHN0eWxlIGpzeD5cclxuICAgICAgICAgIHtgICAubm9taW50YXRpb24tbW9kYWx7Zm9udC1mYW1pbHk6IFBvcHBpbnM7fVxyXG4gICAgICAgICAgICAgIC5tYW5hLWJhbGFuY2V7Zm9udC1zaXplOi45cmVtO2NvbG9yOiMwMDA7Zm9udC13ZWlnaHQ6IDIwMDt0ZXh0LWFsaWduOmxlZnR9XHJcbiAgICAgICAgICAgICAgLmFtb3VudC1udW1iZXJ7Zm9udC1mYW1pbHk6UG9wcGlucztjb2xvcjojNjZhM2ZmO31cclxuICAgICAgICAgIGB9ICAgICAgICAgICAgICAgIFxyXG4gICAgICAgIDwvc3R5bGU+XHJcbiAgICAgIDwvPlxyXG4gICAgICAgICk7ICAgIFxyXG4gICAgICB9IFxyXG4gIFxyXG4gICAgICAgIGNvbnN0IG1hcERpc3BhdGNoVG9Qcm9wcyA9IChkaXNwYXRjaCkgPT4gKHtcclxuICAgICAgICAgIGdldFRva2VuSWQ6ICh0b2tlbklkKSA9PiAgZGlzcGF0Y2goeyB0eXBlOiBcIlNFVF9UT0tFTl9JRFwiLCB0b2tlbklkOnRva2VuSWQgfSksXHJcbiAgICAgICAgICBnZXROZnRBZGRyZXNzOiAobmZ0QWRkcmVzcykgPT4gIGRpc3BhdGNoKHsgdHlwZTogXCJTRVRfTmZ0QWRkcmVzc1wiLCBOZnRBZGRyZXNzOm5mdEFkZHJlc3MgfSksXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgXHJcbmV4cG9ydCBkZWZhdWx0IGNvbm5lY3QobnVsbCwgbWFwRGlzcGF0Y2hUb1Byb3BzKShOb21pbmF0aW9uTW9kYWwpO1xyXG4gICAgICJdfQ== */\\n/*@ sourceURL=C:\\\\\\\\Users\\\\\\\\Samsung\\\\\\\\code\\\\\\\\cacp\\\\\\\\client\\\\\\\\components\\\\\\\\modals\\\\\\\\NominationModal.js */\"));\n};\n\nconst mapDispatchToProps = dispatch => ({\n  getTokenId: tokenId => dispatch({\n    type: \"SET_TOKEN_ID\",\n    tokenId: tokenId\n  }),\n  getNftAddress: nftAddress => dispatch({\n    type: \"SET_NftAddress\",\n    NftAddress: nftAddress\n  })\n});\n\nexport default connect(null, mapDispatchToProps)(NominationModal);","map":{"version":3,"sources":["C:/Users/Samsung/code/cacp/client/components/modals/NominationModal.js"],"names":["React","useState","useEffect","Modal","NominationForm","connect","Web3","ProposalForm","Loader","NominationModal","parcel","props","userManaBalance","getNftAddress","drizzleState","drizzle","show","setShow","handleShow","handleClose","tokenId","setTokenId","myHeaders","Headers","append","fetchDetailsLink","graphql","JSON","stringify","query","x","y","assetId","contracts","LANDRegistry","methods","encodeTokenId","call","console","log","proxyUrl","targetUrl","fetch","method","headers","body","variables","redirect","then","res","json","result","parcelData","data","parcels","nft","nftAddress","publication","price","mapDispatchToProps","dispatch","getTokenId","type","NftAddress"],"mappings":"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","sourcesContent":["  \r\nimport React, { useState, useEffect } from 'react';\r\nimport Modal from 'react-bootstrap/Modal';\r\nimport NominationForm from '../forms/NominationForm';\r\nimport { connect } from 'react-redux';\r\nimport Web3 from 'web3';\r\nimport ProposalForm from '../forms/ProposalForm';\r\nimport { Loader } from 'rimble-ui';\r\n\r\nconst NominationModal = ({ parcel, props, userManaBalance, getNftAddress }) => {\r\n\r\n  const {drizzleState, drizzle} = props;\r\n\r\n  const [show, setShow] = useState(false);\r\n  const handleShow = () => setShow(true);\r\n  const handleClose = () => setShow(false);\r\n  const [tokenId, setTokenId] = useState(null);\r\n\r\n  const myHeaders = new Headers();\r\n  myHeaders.append(\"Content-Type\", \"application/json\");\r\n\r\n  useEffect(() => {\r\n  const fetchDetailsLink = async () => {\r\n\r\n  const graphql= JSON.stringify({ query: \r\n    `{ parcels(where: {x:\"${parcel.x}\",y:\"${parcel.y}\"}) \r\n      {\r\n        nft{\r\n          activeOrder{\r\n              Order:\r\n              nftAddress\r\n              price\r\n          }\r\n          tokenId\r\n        }\r\n      }\r\n    }`\r\n  })\r\n\r\n  const assetId = drizzle.contracts.LANDRegistry.methods.encodeTokenId.call(parcel.x, parcel.y)\r\n  console.log(assetId)\r\n  const proxyUrl = 'https://cors-anywhere.herokuapp.com/',\r\n  targetUrl = 'https://api.thegraph.com/subgraphs/name/decentraland/marketplace'\r\n\r\n  fetch(proxyUrl + targetUrl, {\r\n    method: \"POST\",\r\n    headers:myHeaders,  \r\n    body:graphql, variables:{},\r\n    redirect: 'follow'\r\n  })\r\n    .then(res => res.json())\r\n    .then((result) => {\r\n      const parcelData = result.data.parcels[0];\r\n      return parcelData;\r\n    })\r\n    .then((result) => { \r\n      const { nft } = result;\r\n      const { tokenId } = nft;\r\n      //const nftAddress = nft.activeOrder.Order\r\n      const nftAddress = '0x3f27363c9f86E8ac151a0D332abC2C3b60B7bCf5';\r\n      setTokenId(tokenId);\r\n      getNftAddress(nftAddress);\r\n      console.log(nftAddress)\r\n    })\r\n  };\r\nfetchDetailsLink();\r\n\r\n}, []);\r\n\r\nreturn (   \r\n      <> \r\n        <button type=\"button\" className=\"btn btn-lg btn-block card-footer-btn\" onClick={handleShow}>\r\n          Nominate Asset\r\n        </button>\r\n        <Modal className=\"nomintation-modal\" show={show} onHide={handleClose}>\r\n          <Modal.Header className=\"text-center justify-content-center\" closeButton>\r\n            <Modal.Title className=\"text-center justify-content-center\">Current Price:&nbsp;{parcel.publication.price}&nbsp;MANA\r\n            <p className=\"mana-balance mb-1\" >Your MANA Balance:&nbsp;<span className=\"amount-number\">{`${userManaBalance}`}</span></p>\r\n          </Modal.Title>\r\n        </Modal.Header>\r\n          <Modal.Body className=\"pt-1 align-items-center\">\r\n         {tokenId !== null ?   \r\n          <ProposalForm                  \r\n            assetPrice={parcel.publication.price}  \r\n            props={props}\r\n            drizzle={drizzle}\r\n            drizzleState={drizzleState}\r\n            tokenId={tokenId}\r\n            userManaBalance={userManaBalance}\r\n            /> \r\n          :\r\n            <div className=\"align-items-center\">   \r\n            {tokenId} Nomination Modal 76\r\n              <Loader className=\"mx-auto\" color=\"#007bff\" size=\"40px\" />\r\n            </div>\r\n          } \r\n          </Modal.Body>\r\n        </Modal>\r\n        <style jsx>\r\n          {`  .nomintation-modal{font-family: Poppins;}\r\n              .mana-balance{font-size:.9rem;color:#000;font-weight: 200;text-align:left}\r\n              .amount-number{font-family:Poppins;color:#66a3ff;}\r\n          `}                \r\n        </style>\r\n      </>\r\n        );    \r\n      } \r\n  \r\n        const mapDispatchToProps = (dispatch) => ({\r\n          getTokenId: (tokenId) =>  dispatch({ type: \"SET_TOKEN_ID\", tokenId:tokenId }),\r\n          getNftAddress: (nftAddress) =>  dispatch({ type: \"SET_NftAddress\", NftAddress:nftAddress }),\r\n        });\r\n        \r\n        \r\nexport default connect(null, mapDispatchToProps)(NominationModal);\r\n     "]},"metadata":{},"sourceType":"module"}